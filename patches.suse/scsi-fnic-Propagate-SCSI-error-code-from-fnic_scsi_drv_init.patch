From: Arun Easi <aeasi@cisco.com>
Date: Fri, 10 Jan 2025 01:19:56 -0800
Subject: scsi: fnic: Propagate SCSI error code from fnic_scsi_drv_init()
Git-commit: 8697934682f1873b7b1cb9cc61b81edf042c9272
Patch-mainline: v6.14-rc1
References: jsc#PED-12186

Propagate scsi_add_host() error instead of returning -1.

Suggested-by: Dan Carpenter <dan.carpenter@linaro.org>
Reviewed-by: Sesidhar Baddela <sebaddel@cisco.com>
Reviewed-by: Arulprabhu Ponnusamy <arulponn@cisco.com>
Reviewed-by: Gian Carlo Boffa <gcboffa@cisco.com>
Signed-off-by: Arun Easi <aeasi@cisco.com>
Signed-off-by: Karan Tilak Kumar <kartilak@cisco.com>
Link: https://lore.kernel.org/r/20250110091956.17749-1-kartilak@cisco.com
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Acked-by: Lee Duncan <lduncan@suse.com>
---
 drivers/scsi/fnic/fnic_main.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/scsi/fnic/fnic_main.c b/drivers/scsi/fnic/fnic_main.c
index f8fe67bebf3e..2f626b860f7a 100644
--- a/drivers/scsi/fnic/fnic_main.c
+++ b/drivers/scsi/fnic/fnic_main.c
@@ -637,7 +637,7 @@ static int fnic_scsi_drv_init(struct fnic *fnic)
 	err = scsi_add_host(fnic->host, &pdev->dev);
 	if (err) {
 		dev_err(&fnic->pdev->dev, "fnic: scsi add host failed: aborting\n");
-		return -1;
+		return err;
 	}
 	fc_host_maxframe_size(fnic->host) = iport->max_payload_size;
 	fc_host_dev_loss_tmo(fnic->host) =

