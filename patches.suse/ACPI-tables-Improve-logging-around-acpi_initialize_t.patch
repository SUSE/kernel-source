From: Bartosz Szczepanek <bsz@amazon.de>
Date: Wed, 23 Apr 2025 08:56:36 +0000
Subject: ACPI: tables: Improve logging around acpi_initialize_tables()
Patch-mainline: v6.16-rc1
Git-commit: 8e66be071bd4d44e8870a37d2e1a9109c47ef22e
References: jsc#PED-14260

Emit a warning that includes return code in a readable format. Example:

  ACPI: Failed to initialize tables, status=0x5 (AE_NOT_FOUND)

No other functional changes intended.

Signed-off-by: Bartosz Szczepanek <bsz@amazon.de>
Link: https://patch.msgid.link/20250423085637.38658-1-bsz@amazon.de
[ rjw: Subject and changelog edits ]
Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
Acked-by: Chun-Yi Lee <jlee@suse.com>
---
 drivers/acpi/tables.c |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

--- a/drivers/acpi/tables.c
+++ b/drivers/acpi/tables.c
@@ -719,8 +719,12 @@ int __init acpi_locate_initial_tables(vo
 	}
 
 	status = acpi_initialize_tables(initial_tables, ACPI_MAX_TABLES, 0);
-	if (ACPI_FAILURE(status))
+	if (ACPI_FAILURE(status)) {
+		const char *msg = acpi_format_exception(status);
+
+		pr_warn("Failed to initialize tables, status=0x%x (%s)", status, msg);
 		return -EINVAL;
+	}
 
 	return 0;
 }
