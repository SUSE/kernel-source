From f2553d46783409656d82e46913354ed0c058cc0c Mon Sep 17 00:00:00 2001
From: Takashi Iwai <tiwai@suse.de>
Date: Wed, 4 Aug 2021 09:52:23 +0200
Subject: [PATCH] ASoC: amd: vangogh: Drop superfluous mmap callback
Git-commit: f2553d46783409656d82e46913354ed0c058cc0c
Patch-mainline: v5.15-rc1
References: bsc#1192354

The mmap callback of vangogh driver just calls the default mmap
handler, and it's superfluous, as the PCM core would call it if not
set.  Let's drop the superfluous mmap callback.

Fixes: 361414dc1f07 ("ASoC: amd: add vangogh i2s dma driver pm ops")
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Link: https://lore.kernel.org/r/20210804075223.9823-1-tiwai@suse.de
Signed-off-by: Mark Brown <broonie@kernel.org>

---
 sound/soc/amd/vangogh/acp5x-pcm-dma.c | 8 --------
 1 file changed, 8 deletions(-)

diff --git a/sound/soc/amd/vangogh/acp5x-pcm-dma.c b/sound/soc/amd/vangogh/acp5x-pcm-dma.c
index 9f8eb72ac834..f10de38976cb 100644
--- a/sound/soc/amd/vangogh/acp5x-pcm-dma.c
+++ b/sound/soc/amd/vangogh/acp5x-pcm-dma.c
@@ -315,13 +315,6 @@ static int acp5x_dma_new(struct snd_soc_component *component,
 	return 0;
 }
 
-static int acp5x_dma_mmap(struct snd_soc_component *component,
-			  struct snd_pcm_substream *substream,
-			  struct vm_area_struct *vma)
-{
-	return snd_pcm_lib_default_mmap(substream, vma);
-}
-
 static int acp5x_dma_close(struct snd_soc_component *component,
 			   struct snd_pcm_substream *substream)
 {
@@ -364,7 +357,6 @@ static const struct snd_soc_component_driver acp5x_i2s_component = {
 	.close		= acp5x_dma_close,
 	.hw_params	= acp5x_dma_hw_params,
 	.pointer	= acp5x_dma_pointer,
-	.mmap		= acp5x_dma_mmap,
 	.pcm_construct	= acp5x_dma_new,
 };
 
-- 
2.26.2

