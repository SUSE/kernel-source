From cb808ab833d1a9bbca0c7ed27e5a31c5c2c9f8cb Mon Sep 17 00:00:00 2001
From: Alex Deucher <alexander.deucher@amd.com>
Date: Wed, 26 Feb 2025 20:58:42 -0500
Subject: drm/amdgpu: add tmz queue parameter to mqd props
Git-commit: cb808ab833d1a9bbca0c7ed27e5a31c5c2c9f8cb
Patch-mainline: v6.16-rc1
References: jsc#PED-13979 jsc#PED-14039 jsc#PED-14046 jsc#PED-14211 jsc#PED-14333 jsc#PED-14487 jsc#PED-14488 jsc#PED-14497 jsc#PED-14499 jsc#PED-15868

Use this to track the whether we want TMZ for queues.

Reviewed-by: Sunil Khatri <sunil.khatri@amd.com>
Reviewed-by: Jesse.Zhang <Jesse.zhang@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Acked-by: Patrik Jakobsson <pjakobsson@suse.de>

---
 drivers/gpu/drm/amd/amdgpu/amdgpu.h | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu.h b/drivers/gpu/drm/amd/amdgpu/amdgpu.h
index c0ba139895e4..24e5d8970c05 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu.h
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu.h
@@ -835,6 +835,7 @@ struct amdgpu_mqd_prop {
 	uint64_t gds_bkup_addr;
 	uint64_t csa_addr;
 	uint64_t fence_address;
+	bool tmz_queue;
 };
 
 struct amdgpu_mqd {
-- 
2.52.0

