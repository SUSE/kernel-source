From: "Rafael J. Wysocki" <rafael.j.wysocki@intel.com>
Date: Tue, 1 Feb 2022 20:18:56 +0100
Subject: ACPI: EC / PM: Print additional debug message in
 acpi_ec_dispatch_gpe()
Patch-mainline: v5.18-rc1
Git-commit: 977dc3082285206e7b1fcbc4496671194cfb7980
References: jsc#PED-1408

Make acpi_ec_dispatch_gpe() print an additional debug message after
seeing the EC GPE status bit set to help diagnose wakeup-related
issues.

Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
Acked-by: Lee, Chun-Yi <jlee@suse.com>
---
 drivers/acpi/ec.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

--- a/drivers/acpi/ec.c
+++ b/drivers/acpi/ec.c
@@ -2071,8 +2071,11 @@ bool acpi_ec_dispatch_gpe(void)
 	 */
 	spin_lock_irq(&first_ec->lock);
 
-	if (acpi_ec_gpe_status_set(first_ec))
+	if (acpi_ec_gpe_status_set(first_ec)) {
+		pm_pr_dbg("ACPI EC GPE status set\n");
+
 		work_in_progress = advance_transaction(first_ec, false);
+	}
 
 	spin_unlock_irq(&first_ec->lock);
 
