From: Fangzhi Zuo <Jerry.Zuo@amd.com>
Date: Thu, 15 Aug 2024 18:45:24 -0400
Subject: drm/amd/display: Fix a typo in revert commit
Patch-mainline: Submitted, 20240815224525.3077505-13-Roman.Li@amd.com
References: bsc#1228093 #3495

A typo is fixed for "drm/amd/display: Fix MST BW calculation Regression"

Fixes: 4b6564cb120c ("drm/amd/display: Fix MST BW calculation Regression")

Reviewed-by: Roman Li <roman.li@amd.com>
Signed-off-by: Fangzhi Zuo <Jerry.Zuo@amd.com>
Signed-off-by: Roman Li <roman.li@amd.com>
Fixes: 4b6564cb120c ("drm/amd/display: Fix MST BW calculation Regression")
Reported-by: jirislaby@kernel.org
Closes: https://gitlab.freedesktop.org/drm/amd/-/issues/3495
Closes: https://bugzilla.suse.com/show_bug.cgi?id=1228093
Tested-by: Daniel Wheeler <daniel.wheeler@amd.com>
Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c
+++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c
@@ -1061,7 +1061,7 @@ static int try_disable_dsc(struct drm_at
 			vars[next_index].dsc_enabled = false;
 			vars[next_index].bpp_x16 = 0;
 		} else {
-			vars[next_index].pbn = kbps_to_peak_pbn(params[next_index].bw_range.stream_kbps, fec_overhead_multiplier_x1000);
+			vars[next_index].pbn = kbps_to_peak_pbn(params[next_index].bw_range.max_kbps, fec_overhead_multiplier_x1000);
 			ret = drm_dp_atomic_find_time_slots(state,
 							    params[next_index].port->mgr,
 							    params[next_index].port,
