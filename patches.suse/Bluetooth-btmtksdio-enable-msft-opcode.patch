From: =?UTF-8?q?=C5=81ukasz=20Bartosik?= <lb@semihalf.com>
Date: Wed, 1 Dec 2021 21:13:51 +0100
Subject: Bluetooth: btmtksdio: enable msft opcode
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
Patch-mainline: v5.17-rc1
Git-commit: 630491ffd53cd2237445bd058e8d95662666947b
References: jsc#PED-1407

Enable msft opcode for mt7921 chip.

Signed-off-by: ≈Åukasz Bartosik <lb@semihalf.com>
Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
Acked-by: Lee, Chun-Yi <jlee@suse.com>
---
 drivers/bluetooth/btmtksdio.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/bluetooth/btmtksdio.c
+++ b/drivers/bluetooth/btmtksdio.c
@@ -791,6 +791,8 @@ static int mt79xx_setup(struct hci_dev *
 		return err;
 	}
 
+	hci_set_msft_opcode(hdev, 0xFD30);
+
 	return err;
 }
 
