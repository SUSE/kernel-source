From: Haowen Bai <baihaowen@meizu.com>
Date: Fri, 22 Apr 2022 14:08:32 +0800
Subject: net/mlx5: Remove useless kfree
Patch-mainline: v5.19-rc1
Git-commit: 7134c602812a69885de9be7b6bc15c7250c5e637
References: jsc#PED-1549

After alloc fail, we do not need to kfree.

Signed-off-by: Haowen Bai <baihaowen@meizu.com>
Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/net/ethernet/mellanox/mlx5/core/en/tc_ct.c |    1 -
 1 file changed, 1 deletion(-)

--- a/drivers/net/ethernet/mellanox/mlx5/core/en/tc_ct.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en/tc_ct.c
@@ -1808,7 +1808,6 @@ __mlx5_tc_ct_flow_offload(struct mlx5_tc
 
 	ct_flow = kzalloc(sizeof(*ct_flow), GFP_KERNEL);
 	if (!ct_flow) {
-		kfree(ct_flow);
 		return ERR_PTR(-ENOMEM);
 	}
 
