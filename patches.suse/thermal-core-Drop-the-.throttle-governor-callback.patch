From: "Rafael J. Wysocki" <rafael.j.wysocki@intel.com>
Date: Wed, 10 Apr 2024 19:42:35 +0200
Subject: thermal: core: Drop the .throttle() governor callback
Patch-mainline: v6.10-rc1
Git-commit: ad2f8bccd0e6e65af4e771e69cc2f2cfa69a6e07
References: jsc#PED-11164

Since all of the governors in the tree have been switched over to using
the new callbacks, either .trip_crossed() or .manage(), the .throttle()
governor callback is not used any more, so drop it.

Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
Reviewed-by: Lukasz Luba <lukasz.luba@arm.com>
Acked-by: Daniel Lezcano <daniel.lezcano@linaro.org>
Acked-by: Chun-Yi Lee <jlee@suse.com>
---
 drivers/thermal/thermal_core.c |   11 -----------
 drivers/thermal/thermal_core.h |    4 ----
 2 files changed, 15 deletions(-)

--- a/drivers/thermal/thermal_core.c
+++ b/drivers/thermal/thermal_core.c
@@ -310,15 +310,6 @@ static struct thermal_governor *thermal_
 	return def_governor;
 }
 
-static void handle_non_critical_trips(struct thermal_zone_device *tz,
-				      const struct thermal_trip *trip)
-{
-	struct thermal_governor *governor = thermal_get_tz_governor(tz);
-
-	if (governor->throttle)
-		governor->throttle(tz, trip);
-}
-
 void thermal_governor_update_tz(struct thermal_zone_device *tz,
 				enum thermal_notify_event reason)
 {
@@ -418,8 +409,6 @@ static void handle_thermal_trip(struct t
 
 	if (trip->type == THERMAL_TRIP_CRITICAL || trip->type == THERMAL_TRIP_HOT)
 		handle_critical_trips(tz, trip);
-	else
-		handle_non_critical_trips(tz, trip);
 }
 
 static void update_temperature(struct thermal_zone_device *tz)
--- a/drivers/thermal/thermal_core.h
+++ b/drivers/thermal/thermal_core.h
@@ -32,8 +32,6 @@ struct thermal_trip_desc {
  *			thermal zone.
  * @trip_crossed:	called for trip points that have just been crossed
  * @manage:	called on thermal zone temperature updates
- * @throttle:	callback called for every trip point even if temperature is
- *		below the trip point temperature
  * @update_tz:	callback called when thermal zone internals have changed, e.g.
  *		thermal cooling instance was added/removed
  * @governor_list:	node in thermal_governor_list (in thermal_core.c)
@@ -46,8 +44,6 @@ struct thermal_governor {
 			     const struct thermal_trip *trip,
 			     bool crossed_up);
 	void (*manage)(struct thermal_zone_device *tz);
-	int (*throttle)(struct thermal_zone_device *tz,
-			const struct thermal_trip *trip);
 	void (*update_tz)(struct thermal_zone_device *tz,
 			  enum thermal_notify_event reason);
 	struct list_head	governor_list;
