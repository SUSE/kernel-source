From: Masahiro Yamada <masahiroy@kernel.org>
Date: Thu, 19 Aug 2021 09:57:38 +0900
Subject: kbuild: do not remove 'linux' link in scripts/link-vmlinux.sh
Patch-mainline: v5.15-rc1
Git-commit: d40aecd108d2a6413d53f6f8339e787a23150595
References: jsc#PED-1368

arch/um/Makefile passes the -f option to the ln command:

  linux: vmlinux
          @echo '  LINK $@'
          $(Q)ln -f $< $@

So, the hard link is always re-created, and the old one is removed
anyway.

Signed-off-by: Masahiro Yamada <masahiroy@kernel.org>
Reviewed-by: Kees Cook <keescook@chromium.org>
Acked-by: Shung-Hsi Yu <shung-hsi.yu@suse.com>
---
 scripts/link-vmlinux.sh |    1 -
 1 file changed, 1 deletion(-)

--- a/scripts/link-vmlinux.sh
+++ b/scripts/link-vmlinux.sh
@@ -206,7 +206,6 @@ vmlinux_link()
 			-Wl,-T,${lds}				\
 			${objects}				\
 			-lutil -lrt -lpthread
-		rm -f linux
 	fi
 }
 
