From 276c53c66e032c8e7cc0da63555f2742eb1afd69 Mon Sep 17 00:00:00 2001
From: Alexandre Courbot <acourbot@nvidia.com>
Date: Thu, 15 May 2025 17:23:20 +0900
Subject: gpu: drm: nova: select AUXILIARY_BUS instead of depending on it
Git-commit: 276c53c66e032c8e7cc0da63555f2742eb1afd69
Patch-mainline: v6.16-rc1
References: jsc#PED-13979 jsc#PED-14039 jsc#PED-14046 jsc#PED-14211 jsc#PED-14333 jsc#PED-14487 jsc#PED-14488 jsc#PED-14497 jsc#PED-14499 jsc#PED-15868

CONFIG_AUXILIARY_BUS cannot be enabled explicitly, and unless we select
it we have no way to include it (and thus to enable NOVA_DRM) unless
another driver happens to do it for us.

Fixes: cdeaeb9dd762 ("drm: nova-drm: add initial driver skeleton")
Signed-off-by: Alexandre Courbot <acourbot@nvidia.com>
Link: https://lore.kernel.org/r/20250515-aux_bus-v2-3-47c70f96ae9b@nvidia.com
Signed-off-by: Danilo Krummrich <dakr@kernel.org>
Acked-by: Patrik Jakobsson <pjakobsson@suse.de>

---
 drivers/gpu/drm/nova/Kconfig | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/nova/Kconfig b/drivers/gpu/drm/nova/Kconfig
index 123e96788484..cca6a3fea879 100644
--- a/drivers/gpu/drm/nova/Kconfig
+++ b/drivers/gpu/drm/nova/Kconfig
@@ -1,9 +1,9 @@
 config DRM_NOVA
 	tristate "Nova DRM driver"
-	depends on AUXILIARY_BUS
 	depends on DRM=y
 	depends on PCI
 	depends on RUST
+	select AUXILIARY_BUS
 	default n
 	help
 	  Choose this if you want to build the Nova DRM driver for Nvidia
-- 
2.52.0

