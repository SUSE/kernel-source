From 8b6b67938ed5a0a4385c38efad91cb3e6f7e5765 Mon Sep 17 00:00:00 2001
From: Imre Deak <imre.deak@intel.com>
Date: Fri, 4 Apr 2025 18:03:10 +0300
Subject: drm/i915/dp_mst: Rename intel_dp::mst.active_links to
 mst.active_streams
Git-commit: 8b6b67938ed5a0a4385c38efad91cb3e6f7e5765
Patch-mainline: v6.16-rc1
References: jsc#PED-13979 jsc#PED-14039 jsc#PED-14046 jsc#PED-14211 jsc#PED-14333 jsc#PED-14487 jsc#PED-14488 jsc#PED-14497 jsc#PED-14499 jsc#PED-15868

intel_dp::mst.active_links actually indicates the number of MST streams,
not the number of MST links (one MST link carrying one or more MST
streams), rename the field accordingly.

Reviewed-by: Jani Nikula <jani.nikula@intel.com>
Signed-off-by: Imre Deak <imre.deak@intel.com>
Link: https://lore.kernel.org/r/20250404150310.1156696-7-imre.deak@intel.com
Acked-by: Patrik Jakobsson <pjakobsson@suse.de>

---
 drivers/gpu/drm/i915/display/intel_display_types.h |  2 +-
 drivers/gpu/drm/i915/display/intel_dp_mst.c        | 12 ++++++------
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/drivers/gpu/drm/i915/display/intel_display_types.h b/drivers/gpu/drm/i915/display/intel_display_types.h
index 769e3a48d9c5..94468a9d2e0d 100644
--- a/drivers/gpu/drm/i915/display/intel_display_types.h
+++ b/drivers/gpu/drm/i915/display/intel_display_types.h
@@ -1739,7 +1739,7 @@ struct intel_dp {
 	struct {
 		struct intel_dp_mst_encoder *stream_encoders[I915_MAX_PIPES];
 		struct drm_dp_mst_topology_mgr mgr;
-		int active_links;
+		int active_streams;
 	} mst;
 
 	u32 (*get_aux_clock_divider)(struct intel_dp *dp, int index);
diff --git a/drivers/gpu/drm/i915/display/intel_dp_mst.c b/drivers/gpu/drm/i915/display/intel_dp_mst.c
index ac5beefcc4e7..36d87bd9b32f 100644
--- a/drivers/gpu/drm/i915/display/intel_dp_mst.c
+++ b/drivers/gpu/drm/i915/display/intel_dp_mst.c
@@ -107,7 +107,7 @@ static struct intel_dp *to_primary_dp(struct intel_encoder *encoder)
 
 int intel_dp_mst_active_streams(struct intel_dp *intel_dp)
 {
-	return intel_dp->mst.active_links;
+	return intel_dp->mst.active_streams;
 }
 
 static bool intel_dp_mst_dec_active_streams(struct intel_dp *intel_dp)
@@ -115,12 +115,12 @@ static bool intel_dp_mst_dec_active_streams(struct intel_dp *intel_dp)
 	struct intel_display *display = to_intel_display(intel_dp);
 
 	drm_dbg_kms(display->drm, "active MST streams %d -> %d\n",
-		    intel_dp->mst.active_links, intel_dp->mst.active_links - 1);
+		    intel_dp->mst.active_streams, intel_dp->mst.active_streams - 1);
 
-	if (drm_WARN_ON(display->drm, intel_dp->mst.active_links == 0))
+	if (drm_WARN_ON(display->drm, intel_dp->mst.active_streams == 0))
 		return true;
 
-	return --intel_dp->mst.active_links == 0;
+	return --intel_dp->mst.active_streams == 0;
 }
 
 static bool intel_dp_mst_inc_active_streams(struct intel_dp *intel_dp)
@@ -128,9 +128,9 @@ static bool intel_dp_mst_inc_active_streams(struct intel_dp *intel_dp)
 	struct intel_display *display = to_intel_display(intel_dp);
 
 	drm_dbg_kms(display->drm, "active MST streams %d -> %d\n",
-		    intel_dp->mst.active_links, intel_dp->mst.active_links + 1);
+		    intel_dp->mst.active_streams, intel_dp->mst.active_streams + 1);
 
-	return intel_dp->mst.active_links++ == 0;
+	return intel_dp->mst.active_streams++ == 0;
 }
 
 static int intel_dp_mst_max_dpt_bpp(const struct intel_crtc_state *crtc_state,
-- 
2.52.0

