From: Miquel Raynal <miquel.raynal@bootlin.com>
Date: Fri, 15 Oct 2021 10:14:55 +0200
Subject: mfd: ti_am335x_tscadc: Support the correctly spelled DT property
Git-commit: 90fc6ff48be44ece2cb9b0012074bd0e642f48bc
Patch-mainline: v5.16-rc1
References: git-fixes

There was in the past a typo in the coordinate readouts property. The
bindings have been updated, the touchscreen driver as well and now
supports both. However, the MFD driver that is in charge of verifying
the validity of the property only checks the bogus one. Add support for
the correctly spelled DT property.

Fixes: c9aeb249bf72 ("Input: ti_am335x_tsc - fix spelling mistake in TSC/ADC DT binding")
Signed-off-by: Miquel Raynal <miquel.raynal@bootlin.com>
Reviewed-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>
Signed-off-by: Lee Jones <lee.jones@linaro.org>
Link: https://lore.kernel.org/r/20211015081506.933180-38-miquel.raynal@bootlin.com
Signed-off-by: Matthias Brugger <mbrugger@suse.com>
---
 drivers/mfd/ti_am335x_tscadc.c |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

--- a/drivers/mfd/ti_am335x_tscadc.c
+++ b/drivers/mfd/ti_am335x_tscadc.c
@@ -141,7 +141,11 @@ static	int ti_tscadc_probe(struct platfo
 
 	node = of_get_child_by_name(pdev->dev.of_node, "tsc");
 	of_property_read_u32(node, "ti,wires", &tsc_wires);
-	of_property_read_u32(node, "ti,coordiante-readouts", &readouts);
+	err = of_property_read_u32(node, "ti,coordinate-readouts",
+				   &readouts);
+	if (err < 0)
+		of_property_read_u32(node, "ti,coordiante-readouts",
+				     &readouts);
 
 	node = of_get_child_by_name(pdev->dev.of_node, "adc");
 	of_property_for_each_u32(node, "ti,adc-channels", prop, cur, val) {
@@ -166,7 +170,6 @@ static	int ti_tscadc_probe(struct platfo
 		dev_err(&pdev->dev, "Too many step configurations requested\n");
 		return -EINVAL;
 	}
-
 	/* Allocate memory for device */
 	tscadc = devm_kzalloc(&pdev->dev, sizeof(*tscadc), GFP_KERNEL);
 	if (!tscadc)
