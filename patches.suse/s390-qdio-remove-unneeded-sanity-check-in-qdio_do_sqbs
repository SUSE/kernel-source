From: Julian Wiedmann <jwi@linux.ibm.com>
Date: Wed, 24 Nov 2021 10:16:53 +0100
Subject: s390/qdio: remove unneeded sanity check in qdio_do_sqbs()
Git-commit: e628f28793033ff760c82e04a73abe415b10a66c
Patch-mainline: v5.17-rc1
References: jsc#PED-455 bsc#1203836 LTC#198623

All callers of set_buf_states() are already making sure that 'count'
is not 0. So don't check it an additional time.

Note that our own code also doesn't _require_ the count to be sane
(ie. we can't overrun an array or similar). So worst case HW would
simply reject the SQBS operation and report an error.

Signed-off-by: Julian Wiedmann <jwi@linux.ibm.com>
Reviewed-by: Benjamin Block <bblock@linux.ibm.com>
Signed-off-by: Heiko Carstens <hca@linux.ibm.com>
Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/s390/cio/qdio_main.c |    2 --
 1 file changed, 2 deletions(-)

--- a/drivers/s390/cio/qdio_main.c
+++ b/drivers/s390/cio/qdio_main.c
@@ -170,8 +170,6 @@ static int qdio_do_sqbs(struct qdio_q *q
 	int tmp_count = count, tmp_start = start;
 	int nr = q->nr;
 
-	if (!count)
-		return 0;
 	qperf_inc(q, sqbs);
 
 	if (!q->is_input_q)
