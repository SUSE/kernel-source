From 4bf74f8e56054cf3521f646313301d19c331ba54 Mon Sep 17 00:00:00 2001
From: Geert Uytterhoeven <geert+renesas@glider.be>
Date: Tue, 26 Oct 2021 17:11:23 +0200
Subject: [PATCH] ASoC: amd: acp: SND_SOC_AMD_ACP_COMMON should depend on X86 && PCI
Git-commit: 4bf74f8e56054cf3521f646313301d19c331ba54
Patch-mainline: v5.16-rc1
References: jsc#PED-850

All configuration symbols for AMD Audio ACP conponents depend on X86 &&
PCI, except for SND_SOC_AMD_ACP_COMMON.  Add a dependency on X86 && PCI
to SND_SOC_AMD_ACP_COMMON, to prevent asking the user about AMD Audio
ACP support when configuring a kernel without X86 or PCI support.

Signed-off-by: Geert Uytterhoeven <geert+renesas@glider.be>
Link: https://lore.kernel.org/r/30fcedce513186bf89f1f2655b665298250fdc66.1635260849.git.geert+renesas@glider.be
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 sound/soc/amd/acp/Kconfig | 1 +
 1 file changed, 1 insertion(+)

diff --git a/sound/soc/amd/acp/Kconfig b/sound/soc/amd/acp/Kconfig
index 006bd2dc5f04..ba6ec96f0a64 100644
--- a/sound/soc/amd/acp/Kconfig
+++ b/sound/soc/amd/acp/Kconfig
@@ -8,6 +8,7 @@
 config SND_SOC_AMD_ACP_COMMON
 	tristate "AMD Audio ACP Common support"
 	select SND_AMD_ACP_CONFIG
+	depends on X86 && PCI
 	help
 	  This option enables common modules for Audio-Coprocessor i.e. ACP
 	  IP block on AMD platforms.
-- 
2.35.3

