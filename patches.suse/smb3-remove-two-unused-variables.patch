From: Steve French <stfrench@microsoft.com>
Date: Fri, 23 Oct 2020 08:23:45 -0500
Subject: [PATCH] smb3: remove two unused variables
Git-commit: 6a87266c043b7a279941d17834540d173babca5f
Patch-mainline: v5.10-rc1
References: bsc#1192606

Fix two unused variables in commit
"add support for stat of WSL reparse points for special file types"

Reported-by: kernel test robot <lkp@intel.com>
Signed-off-by: Steve French <stfrench@microsoft.com>
Acked-by: Enzo Matsumiya <ematsumiya@suse.de>
---
 fs/cifs/smb2ops.c | 5 -----
 1 file changed, 5 deletions(-)

diff --git a/fs/cifs/smb2ops.c b/fs/cifs/smb2ops.c
index 0fe87f397ac5..504766cb6c19 100644
--- a/fs/cifs/smb2ops.c
+++ b/fs/cifs/smb2ops.c
@@ -3044,7 +3044,6 @@ smb2_query_reparse_tag(const unsigned int xid, struct cifs_tcon *tcon,
 	__u8 oplock = SMB2_OPLOCK_LEVEL_NONE;
 	struct cifs_open_parms oparms;
 	struct cifs_fid fid;
-	struct kvec err_iov = {NULL, 0};
 	struct TCP_Server_Info *server = cifs_pick_channel(tcon->ses);
 	int flags = 0;
 	struct smb_rqst rqst[3];
@@ -3053,7 +3052,6 @@ smb2_query_reparse_tag(const unsigned int xid, struct cifs_tcon *tcon,
 	struct kvec open_iov[SMB2_CREATE_IOV_SIZE];
 	struct kvec io_iov[SMB2_IOCTL_IOV_SIZE];
 	struct kvec close_iov[1];
-	struct smb2_create_rsp *create_rsp;
 	struct smb2_ioctl_rsp *ioctl_rsp;
 	struct reparse_data_buffer *reparse_buf;
 	u32 plen;
@@ -3129,9 +3127,6 @@ smb2_query_reparse_tag(const unsigned int xid, struct cifs_tcon *tcon,
 				flags, 3, rqst,
 				resp_buftype, rsp_iov);
 
-	create_rsp = rsp_iov[0].iov_base;
-	if (create_rsp && create_rsp->sync_hdr.Status)
-		err_iov = rsp_iov[0];
 	ioctl_rsp = rsp_iov[1].iov_base;
 
 	/*
-- 
2.33.1

