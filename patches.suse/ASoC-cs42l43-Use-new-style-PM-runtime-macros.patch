From 2b59332ead54870ed0f1a8b122a1d640a4865fdc Mon Sep 17 00:00:00 2001
From: Charles Keepax <ckeepax@opensource.cirrus.com>
Date: Thu, 24 Aug 2023 11:39:02 +0100
Subject: [PATCH] ASoC: cs42l43: Use new-style PM runtime macros
Git-commit: 2b59332ead54870ed0f1a8b122a1d640a4865fdc
Patch-mainline: v6.6-rc1
References: jsc#PED-9993 jsc#PED-10202

Update to the newer style PM runtime macros, no functional change.

Signed-off-by: Charles Keepax <ckeepax@opensource.cirrus.com
Link: https://lore.kernel.org/r/20230824103902.1606288-1-ckeepax@opensource.cirrus.com
Signed-off-by: Mark Brown <broonie@kernel.org
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 sound/soc/codecs/cs42l43.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/sound/soc/codecs/cs42l43.c b/sound/soc/codecs/cs42l43.c
index 18178ffa82f2..24e718e51174 100644
--- a/sound/soc/codecs/cs42l43.c
+++ b/sound/soc/codecs/cs42l43.c
@@ -2238,7 +2238,7 @@ static int cs42l43_codec_remove(struct platform_device *pdev)
 	return 0;
 }
 
-static int __maybe_unused cs42l43_codec_runtime_resume(struct device *dev)
+static int cs42l43_codec_runtime_resume(struct device *dev)
 {
 	struct cs42l43_codec *priv = dev_get_drvdata(dev);
 
@@ -2250,9 +2250,8 @@ static int __maybe_unused cs42l43_codec_runtime_resume(struct device *dev)
 	return 0;
 }
 
-static const struct dev_pm_ops cs42l43_codec_pm_ops = {
-	SET_RUNTIME_PM_OPS(NULL, cs42l43_codec_runtime_resume, NULL)
-};
+DEFINE_RUNTIME_DEV_PM_OPS(cs42l43_codec_pm_ops, NULL,
+			  cs42l43_codec_runtime_resume, NULL);
 
 static const struct platform_device_id cs42l43_codec_id_table[] = {
 	{ "cs42l43-codec", },
-- 
2.43.0

