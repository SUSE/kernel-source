From: Paolo Abeni <pabeni@redhat.com>
Date: Wed, 28 Jul 2021 18:24:01 +0200
Subject: sk_buff: track extension status in slow_gro
Patch-mainline: v5.15-rc1
Git-commit: b0999f385ac30cb17880ae1c1512491fbf0c9542
References: jsc#PED-1565

Similar to the previous one, but tracking the
active_extensions field status.

Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 net/core/skbuff.c |    1 +
 1 file changed, 1 insertion(+)

--- a/net/core/skbuff.c
+++ b/net/core/skbuff.c
@@ -6449,6 +6449,7 @@ void *skb_ext_add(struct sk_buff *skb, e
 	new->chunks = newlen;
 	new->offset[id] = newoff;
 set_active:
+	skb->slow_gro = 1;
 	skb->extensions = new;
 	skb->active_extensions |= 1 << id;
 	return skb_ext_get_ptr(new, id);
