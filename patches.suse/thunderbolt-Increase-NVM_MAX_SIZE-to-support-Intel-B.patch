From 322ff701ffed52fb1cade855b2145a3b4316ccd7 Mon Sep 17 00:00:00 2001
From: Gil Fine <gil.fine@linux.intel.com>
Date: Thu, 11 May 2023 11:19:20 +0300
Subject: [PATCH] thunderbolt: Increase NVM_MAX_SIZE to support Intel Barlow
 Ridge controller
Git-commit: 322ff701ffed52fb1cade855b2145a3b4316ccd7
References: jsc#PED-6061
Patch-mainline: v6.5-rc1

Intel Barlow Ridge discrete USB4 controller has larger NOR Flash, hence
increase NVM_MAX_SIZE to support it.

Signed-off-by: Gil Fine <gil.fine@linux.intel.com>
Signed-off-by: Mika Westerberg <mika.westerberg@linux.intel.com>
Signed-off-by: Oliver Neukum <oneukum@suse.com>
---
 drivers/thunderbolt/nvm.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/thunderbolt/nvm.c b/drivers/thunderbolt/nvm.c
index b004f29ad2b6..69fb3b0fa34f 100644
--- a/drivers/thunderbolt/nvm.c
+++ b/drivers/thunderbolt/nvm.c
@@ -13,7 +13,7 @@
 #include "tb.h"
 
 #define NVM_MIN_SIZE		SZ_32K
-#define NVM_MAX_SIZE		SZ_512K
+#define NVM_MAX_SIZE		SZ_1M
 #define NVM_DATA_DWORDS		16
 
 /* Intel specific NVM offsets */
-- 
2.41.0

