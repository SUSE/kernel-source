From: Jonathan Lemon <jonathan.lemon@gmail.com>
Date: Mon, 16 Aug 2021 15:13:34 -0700
Subject: ptp: ocp: Fix uninitialized variable warning spotted by clang.
Patch-mainline: v5.15-rc1
Git-commit: 7c8075728f4df477d94df2e4d23a95ee69ee9493
References: jsc#SLE-19253

If attempting to flash the firmware with a blob of size 0,
the entire write loop is skipped and the uninitialized err
is returned.  Fix by setting to 0 first.

Fixes: 773bda964921 ("ptp: ocp: Expose various resources on the timecard.")
Signed-off-by: Jonathan Lemon <jonathan.lemon@gmail.com>
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/ptp/ptp_ocp.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/ptp/ptp_ocp.c
+++ b/drivers/ptp/ptp_ocp.c
@@ -763,7 +763,7 @@ ptp_ocp_devlink_flash(struct devlink *de
 	size_t off, len, resid, wrote;
 	struct erase_info erase;
 	size_t base, blksz;
-	int err;
+	int err = 0;
 
 	off = 0;
 	base = bp->flash_start;
