From 0ae9b9a14d54bd0aa68c1e8bda9dd8e6346f1d87 Mon Sep 17 00:00:00 2001
From: Jens Axboe <axboe@kernel.dk>
Date: Sat, 16 Mar 2024 18:23:44 -0600
Subject: [PATCH] io_uring/alloc_cache: shrink default max entries from 512 to
 128
Git-commit: 0ae9b9a14d54bd0aa68c1e8bda9dd8e6346f1d87
Patch-mainline: v6.10-rc1
References: bsc#1230569

In practice, we just need to recycle a few elements for (by far) most
use cases. Shrink the total size down from 512 to 128, which should be
more than plenty.

Signed-off-by: Jens Axboe <axboe@kernel.dk>
Signed-off-by: Gabriel Krisman Bertazi <krisman@suse.de>
---
 io_uring/alloc_cache.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/io_uring/alloc_cache.h b/io_uring/alloc_cache.h
index bf2fb26a6539..138ad14b0b12 100644
--- a/io_uring/alloc_cache.h
+++ b/io_uring/alloc_cache.h
@@ -4,7 +4,7 @@
 /*
  * Don't allow the cache to grow beyond this size.
  */
-#define IO_ALLOC_CACHE_MAX	512
+#define IO_ALLOC_CACHE_MAX	128
 
 struct io_cache_entry {
 	struct io_wq_work_node node;
-- 
2.47.0

