From b7bca42d101d8d9678068cde645bd6d0afa8a20f Mon Sep 17 00:00:00 2001
From: Masahiro Yamada <masahiroy@kernel.org>
Date: Wed, 20 Nov 2024 08:56:40 +0900
Subject: [PATCH] modpost: remove unnecessary check in do_acpi_entry()
Git-commit: b7bca42d101d8d9678068cde645bd6d0afa8a20f
References: jsc#PED-10906
Patch-mainline: v6.13-rc1

The 'id' pointer is never NULL since it has the same address as
'symval'.

Also, checking (*id)[0] is simpler than calling strlen().

Signed-off-by: Masahiro Yamada <masahiroy@kernel.org>
Signed-off-by: Oliver Neukum <oneukum@suse.com>

---
 scripts/mod/file2alias.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/scripts/mod/file2alias.c b/scripts/mod/file2alias.c
index 634e40748287..34678ed40fdb 100644
--- a/scripts/mod/file2alias.c
+++ b/scripts/mod/file2alias.c
@@ -570,7 +570,7 @@ static int do_acpi_entry(const char *filename,
 	DEF_FIELD(symval, acpi_device_id, cls);
 	DEF_FIELD(symval, acpi_device_id, cls_msk);
 
-	if (id && strlen((const char *)*id))
+	if ((*id)[0])
 		sprintf(alias, "acpi*:%s:*", *id);
 	else {
 		int i, byte_shift, cnt = 0;
-- 
2.49.0

