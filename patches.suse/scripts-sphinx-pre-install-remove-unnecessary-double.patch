From 9b8a79f4c1d844d52273a31bc6511fa8ab5e8669 Mon Sep 17 00:00:00 2001
From: Sebastian Muxel <sebastian@muxel.dev>
Date: Tue, 27 Aug 2024 15:32:24 +0200
Subject: [PATCH] scripts: sphinx-pre-install: remove unnecessary double check for $cur_version
Git-commit: 9b8a79f4c1d844d52273a31bc6511fa8ab5e8669
Patch-mainline: v6.12-rc1
References: git-fixes

$cur_version is currently being tested twice with the first test
resulting in an unhelpful "$sphinx returned an error", not continuing to
the more helpful "$sphinx didn't return its version".

This patch removes the first test to return the more useful message.

Fixes: a8b380c379ef ("scripts: sphinx-pre-install: only ask to activate valid venvs")
Signed-off-by: Sebastian Muxel <sebastian@muxel.dev>
Signed-off-by: Jonathan Corbet <corbet@lwn.net>
Link: https://lore.kernel.org/r/20240827133224.160776-1-sebastian@muxel.dev
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 scripts/sphinx-pre-install | 2 --
 1 file changed, 2 deletions(-)

diff --git a/scripts/sphinx-pre-install b/scripts/sphinx-pre-install
index c1121f098542..ad9945ccb0cf 100755
--- a/scripts/sphinx-pre-install
+++ b/scripts/sphinx-pre-install
@@ -300,8 +300,6 @@ sub check_sphinx()
 	}
 
 	$cur_version = get_sphinx_version($sphinx);
-	die ("$sphinx returned an error") if (!$cur_version);
-
 	die "$sphinx didn't return its version" if (!$cur_version);
 
 	if ($cur_version lt $min_version) {
-- 
2.43.0

