From 184ec61b8ec98d71cf327f296d49b73335cc0e64 Mon Sep 17 00:00:00 2001
From: Mike Christie <michaelc@cs.wisc.edu>
Date: Wed, 29 Jul 2015 04:23:55 -0500
Subject: [PATCH] target: add lio rbd to makefile/Kconfig
References: fate#318836
Patch-mainline: Not yet, SES clustered LIO/RBD

Add lio rbd backend module to target Makefile and Kconfig.

Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
Acked-by: David Disseldorp <ddiss@suse.de>
---
 drivers/target/Kconfig  | 6 ++++++
 drivers/target/Makefile | 1 +
 2 files changed, 7 insertions(+)

diff --git a/drivers/target/Kconfig b/drivers/target/Kconfig
index c163b14774d7..7cd8107a9884 100644
--- a/drivers/target/Kconfig
+++ b/drivers/target/Kconfig
@@ -43,6 +43,12 @@ config TCM_USER2
 	process to handle requests. This is version 2 of the ABI; version 1
 	is obsolete.
 
+config TCM_RBD
+	tristate "TCM/RBD Subsystem Plugin for Linux/RBD"
+	depends on BLK_DEV_RBD
+	help
+	Say Y here to enable the TCM/RBD subsystem plugin for Ceph RBD	access.
+
 source "drivers/target/loopback/Kconfig"
 source "drivers/target/tcm_fc/Kconfig"
 source "drivers/target/iscsi/Kconfig"
diff --git a/drivers/target/Makefile b/drivers/target/Makefile
index 45634747377e..ae6d83309c29 100644
--- a/drivers/target/Makefile
+++ b/drivers/target/Makefile
@@ -24,6 +24,7 @@ obj-$(CONFIG_TCM_IBLOCK)	+= target_core_iblock.o
 obj-$(CONFIG_TCM_FILEIO)	+= target_core_file.o
 obj-$(CONFIG_TCM_PSCSI)		+= target_core_pscsi.o
 obj-$(CONFIG_TCM_USER2)		+= target_core_user.o
+obj-$(CONFIG_TCM_RBD)		+= target_core_rbd.o
 
 # Fabric modules
 obj-$(CONFIG_LOOPBACK_TARGET)	+= loopback/
-- 
2.16.4

