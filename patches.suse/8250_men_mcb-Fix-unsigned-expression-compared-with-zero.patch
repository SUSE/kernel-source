From: Li Zetao <lizetao1@huawei.com>
Date: Thu, 3 Aug 2023 22:20:53 +0800
Subject: 8250_men_mcb: Fix unsigned expression compared with zero
Git-commit: b58168698c6e462ef02c49b14989d8c9175fbfc8
Patch-mainline: v6.6-rc1
References: git-fixes

There is a warning reported by coccinelle:

./drivers/tty/serial/8250/8250_men_mcb.c:226:6-19: WARNING:
	Unsigned expression compared with zero: data -> line [ i ]     <     0

The array "line" of serial_8250_men_mcb_data is used to record the
registered serial port. When register a port failed, it will return
an error code, but the type of "line" is "unsigned int", causing
the error code to reverse. Modify the type of "data -> line" to solve
this problem.

Fixes: 2554e6ba28a2 ("8250_men_mcb: Read num ports from register data.")
Signed-off-by: Li Zetao <lizetao1@huawei.com>
Reviewed-by: Jiri Slaby <jirislaby@kernel.org>
Reviewed-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
Link: https://lore.kernel.org/r/20230803142053.1308926-1-lizetao1@huawei.com
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/tty/serial/8250/8250_men_mcb.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/tty/serial/8250/8250_men_mcb.c b/drivers/tty/serial/8250/8250_men_mcb.c
index c27c52d18dfa..b43b7e7f8142 100644
--- a/drivers/tty/serial/8250/8250_men_mcb.c
+++ b/drivers/tty/serial/8250/8250_men_mcb.c
@@ -46,7 +46,7 @@
 
 struct serial_8250_men_mcb_data {
 	int num_ports;
-	unsigned int line[MAX_PORTS];
+	int line[MAX_PORTS];
 	unsigned int offset[MAX_PORTS];
 };
 

