From e78bd50b4078b3b2d9f85d97796b7c271e7860ca Mon Sep 17 00:00:00 2001
From: Frank Li <Frank.Li@nxp.com>
Date: Mon, 21 Aug 2023 14:48:13 -0400
Subject: [PATCH] PCI: Add PCIE_PME_TO_L2_TIMEOUT_US L2 ready timeout value
Git-commit: e78bd50b4078b3b2d9f85d97796b7c271e7860ca
References: git-fixes
Patch-mainline: v6.6-rc1

Add the PCIE_PME_TO_L2_TIMEOUT_US macro to define the L2 ready timeout
as described in the PCI specifications.

Link: https://lore.kernel.org/r/20230821184815.2167131-2-Frank.Li@nxp.com
Signed-off-by: Frank Li <Frank.Li@nxp.com>
Signed-off-by: Lorenzo Pieralisi <lpieralisi@kernel.org>
Acked-by: Manivannan Sadhasivam <mani@kernel.org>
Signed-off-by: Oliver Neukum <oneukum@suse.com>

---
 drivers/pci/pci.h |    6 ++++++
 1 file changed, 6 insertions(+)

--- a/drivers/pci/pci.h
+++ b/drivers/pci/pci.h
@@ -11,6 +11,12 @@
 
 #define PCI_VSEC_ID_INTEL_TBT	0x1234	/* Thunderbolt */
 
+/*
+ * PCIe r6.0, sec 5.3.3.2.1 <PME Synchronization>
+ * Recommends 1ms to 10ms timeout to check L2 ready.
+ */
+#define PCIE_PME_TO_L2_TIMEOUT_US	10000
+
 extern const unsigned char pcie_link_speed[];
 extern bool pci_early_dump;
 
