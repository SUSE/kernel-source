From: Ilkka Koskinen <ilkka@os.amperecomputing.com>
Date: Thu, 15 Jun 2023 16:26:30 -0700
Subject: perf: arm_cspmu: Add missing MODULE_DEVICE_TABLE
Git-commit: 7e51d05e43f19f394b3b0df01a22225143f9c5b5
Patch-mainline: v6.5-rc1
References: bsc#1216837

Add missing MODULE_DEVICE_TABLE definition to generate modalias, which
enables module autoloading.

Signed-off-by: Ilkka Koskinen <ilkka@os.amperecomputing.com>
Link: https://lore.kernel.org/r/20230615232630.304870-1-ilkka@os.amperecomputing.com
Signed-off-by: Will Deacon <will@kernel.org>
Acked-by: Ivan T. Ivanov <iivanov@suse.de>
---
 drivers/perf/arm_cspmu/arm_cspmu.c |    7 +++++++
 1 file changed, 7 insertions(+)

--- a/drivers/perf/arm_cspmu/arm_cspmu.c
+++ b/drivers/perf/arm_cspmu/arm_cspmu.c
@@ -1213,6 +1213,12 @@ static int arm_cspmu_device_remove(struc
 	return 0;
 }
 
+static const struct platform_device_id arm_cspmu_id[] = {
+	{DRVNAME, 0},
+	{ },
+};
+MODULE_DEVICE_TABLE(platform, arm_cspmu_id);
+
 static struct platform_driver arm_cspmu_driver = {
 	.driver = {
 			.name = DRVNAME,
@@ -1220,6 +1226,7 @@ static struct platform_driver arm_cspmu_
 		},
 	.probe = arm_cspmu_device_probe,
 	.remove = arm_cspmu_device_remove,
+	.id_table = arm_cspmu_id,
 };
 
 static void arm_cspmu_set_active_cpu(int cpu, struct arm_cspmu *cspmu)
