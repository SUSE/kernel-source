From: Antoine Tenart <atenart@kernel.org>
Date: Wed, 21 Sep 2022 15:51:18 +0200
Subject: net: macsec: remove the prepare flag from the MACsec offloading
 context
Patch-mainline: v6.1-rc1
Git-commit: 99383f1298ee25901b1f6a665bdcc3344acb2382
References: jsc#PED-1549

Now that the MACsec offloading preparation phase was removed from the
MACsec core implementation as well as from drivers implementing it, we
can safely remove the flag representing it.

Signed-off-by: Antoine Tenart <atenart@kernel.org>
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/net/macsec.c |    1 -
 include/net/macsec.h |    2 --
 2 files changed, 3 deletions(-)

--- a/drivers/net/macsec.c
+++ b/drivers/net/macsec.c
@@ -1663,7 +1663,6 @@ static int macsec_offload(int (* const f
 	if (ctx->offload == MACSEC_OFFLOAD_PHY)
 		mutex_lock(&ctx->phydev->lock);
 
-	ctx->prepare = false;
 	ret = (*func)(ctx);
 
 	if (ctx->offload == MACSEC_OFFLOAD_PHY)
--- a/include/net/macsec.h
+++ b/include/net/macsec.h
@@ -271,8 +271,6 @@ struct macsec_context {
 		struct macsec_rx_sa_stats *rx_sa_stats;
 		struct macsec_dev_stats  *dev_stats;
 	} stats;
-
-	u8 prepare:1;
 };
 
 /**
