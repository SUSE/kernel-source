From b5d15961d95565934109b4cc53f50c3f5caf0d80 Mon Sep 17 00:00:00 2001
From: Mika Westerberg <mika.westerberg@linux.intel.com>
Date: Thu, 25 May 2023 12:22:11 +0300
Subject: [PATCH] thunderbolt: Prefix CL state related log messages with "CLx:
 "
Git-commit: b5d15961d95565934109b4cc53f50c3f5caf0d80
References: jsc#PED-6057
Patch-mainline: v6.5-rc1

This makes it easier to spot from the logs and follows what we do with
the TMU code already. We also log enabling/disabling CL states using the
tb_sw_dbg() instead of tb_port_dbg().

Signed-off-by: Mika Westerberg <mika.westerberg@linux.intel.com>
Signed-off-by: Oliver Neukum <oneukum@suse.com>
---
 drivers/thunderbolt/clx.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/thunderbolt/clx.c b/drivers/thunderbolt/clx.c
index b8cfbd643311..5e745386c413 100644
--- a/drivers/thunderbolt/clx.c
+++ b/drivers/thunderbolt/clx.c
@@ -296,9 +296,9 @@ int tb_switch_clx_enable(struct tb_switch *sw, unsigned int clx)
 	up_clx_support = tb_port_clx_supported(up, clx);
 	down_clx_support = tb_port_clx_supported(down, clx);
 
-	tb_port_dbg(up, "%s %ssupported\n", clx_name(clx),
+	tb_port_dbg(up, "CLx: %s %ssupported\n", clx_name(clx),
 		    up_clx_support ? "" : "not ");
-	tb_port_dbg(down, "%s %ssupported\n", clx_name(clx),
+	tb_port_dbg(down, "CLx: %s %ssupported\n", clx_name(clx),
 		    down_clx_support ? "" : "not ");
 
 	if (!up_clx_support || !down_clx_support)
@@ -323,7 +323,7 @@ int tb_switch_clx_enable(struct tb_switch *sw, unsigned int clx)
 
 	sw->clx |= clx;
 
-	tb_port_dbg(up, "%s enabled\n", clx_name(clx));
+	tb_sw_dbg(sw, "CLx: %s enabled\n", clx_name(clx));
 	return 0;
 }
 
@@ -361,6 +361,6 @@ int tb_switch_clx_disable(struct tb_switch *sw)
 
 	sw->clx = 0;
 
-	tb_port_dbg(up, "%s disabled\n", clx_name(clx));
+	tb_sw_dbg(sw, "CLx: %s disabled\n", clx_name(clx));
 	return 0;
 }
-- 
2.41.0

