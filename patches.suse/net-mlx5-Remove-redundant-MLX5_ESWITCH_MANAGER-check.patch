From: Jiri Pirko <jiri@nvidia.com>
Date: Thu, 1 Jun 2023 13:12:37 +0200
Subject: net/mlx5: Remove redundant MLX5_ESWITCH_MANAGER() check from
 is_ib_rep_supported()
Patch-mainline: v6.5-rc1
Git-commit: 61955da523d93b4d89f45f84dc6ce9d44ced7bae
References: jsc#PED-3311

MLX5_ESWITCH_MANAGER() check is done in is_eth_rep_supported().
Function is_ib_rep_supported() calls is_eth_rep_supported().
Remove the redundant check from it.

Signed-off-by: Jiri Pirko <jiri@nvidia.com>
Reviewed-by: Shay Drory <shayd@nvidia.com>
Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/net/ethernet/mellanox/mlx5/core/dev.c |    3 ---
 1 file changed, 3 deletions(-)

--- a/drivers/net/ethernet/mellanox/mlx5/core/dev.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/dev.c
@@ -151,9 +151,6 @@ static bool is_ib_rep_supported(struct m
 	if (!is_eth_rep_supported(dev))
 		return false;
 
-	if (!MLX5_ESWITCH_MANAGER(dev))
-		return false;
-
 	if (!is_mdev_switchdev_mode(dev))
 		return false;
 
