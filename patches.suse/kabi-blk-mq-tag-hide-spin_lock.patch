From: Daniel Wagner <dwagner@suse.de>
Subject: blk-tag: Hide spin_lock
Patch-mainline: Never, kABI workaround
References: bsc#1193787

Hide the spin_lock from the symbol finger printing. struct blk_mq_tag
is a private data structure no one can access outside of the block
layer.

Signed-off-by: Daniel Wagner <dwagner@suse.de>
---
 block/blk-mq-tag.h |    2 ++
 1 file changed, 2 insertions(+)

--- a/block/blk-mq-tag.h
+++ b/block/blk-mq-tag.h
@@ -23,11 +23,13 @@ struct blk_mq_tags {
 	struct request **static_rqs;
 	struct list_head page_list;
 
+#ifndef __GENKSYMS__
 	/*
 	 * used to clear request reference in rqs[] before freeing one
 	 * request pool
 	 */
 	spinlock_t lock;
+#endif
 };
 
 extern struct blk_mq_tags *blk_mq_init_tags(unsigned int nr_tags,
