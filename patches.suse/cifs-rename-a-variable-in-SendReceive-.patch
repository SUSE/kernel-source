From: Dan Carpenter <dan.carpenter@oracle.com>
Date: Fri, 25 Oct 2019 13:35:08 +0300
Subject: [PATCH] cifs: rename a variable in SendReceive()
Git-commit: 8bd3754cff3aa6e80e73cb56042cdc6f76d6510e
References: bsc#1164565
Patch-mainline: v5.5-rc1

Smatch gets confused because we sometimes refer to "server->srv_mutex" and
sometimes to "sess->server->srv_mutex".  They refer to the same lock so
let's just make this consistent.

Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Steve French <stfrench@microsoft.com>
Acked-by: Paulo Alcantara <palcantara@suse.de>
---
 fs/cifs/transport.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/fs/cifs/transport.c b/fs/cifs/transport.c
index ca3de62688d6..f27842fb9f75 100644
--- a/fs/cifs/transport.c
+++ b/fs/cifs/transport.c
@@ -1287,7 +1287,7 @@ SendReceive(const unsigned int xid, struct cifs_ses *ses,
 
 	rc = allocate_mid(ses, in_buf, &midQ);
 	if (rc) {
-		mutex_unlock(&ses->server->srv_mutex);
+		mutex_unlock(&server->srv_mutex);
 		/* Update # of requests on wire to server */
 		add_credits(server, &credits, 0);
 		return rc;
-- 
2.33.1

