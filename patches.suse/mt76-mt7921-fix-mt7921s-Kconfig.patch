From 8603caaec98f7a46419a661f306abfaf2f18ec4b Mon Sep 17 00:00:00 2001
From: Lorenzo Bianconi <lorenzo@kernel.org>
Date: Fri, 22 Oct 2021 11:02:31 +0200
Subject: [PATCH] mt76: mt7921: fix mt7921s Kconfig
Git-commit: 8603caaec98f7a46419a661f306abfaf2f18ec4b
Patch-mainline: v5.16-rc1
References: bsc#1209980

Add missing MMC dependency in mt7921s Kconfig:

Ld: drivers/net/wireless/mediatek/mt76/sdio.o: in function `mt76s_rr':
sdio.c:(.text+0x1263): undefined reference to `sdio_claim_host'
Ld: sdio.c:(.text+0x1278): undefined reference to `sdio_writel'
Ld: sdio.c:(.text+0x12c8): undefined reference to `sdio_writel'
Ld: sdio.c:(.text+0x1327): undefined reference to `sdio_readl'
Ld: sdio.c:(.text+0x134d): undefined reference to `sdio_writel'
Ld: sdio.c:(.text+0x138c): undefined reference to `sdio_readl'
Ld: sdio.c:(.text+0x140f): undefined reference to `sdio_readl'
Ld: sdio.c:(.text+0x1498): undefined reference to `sdio_readl'
Ld: sdio.c:(.text+0x14e5): undefined reference to `sdio_release_host'
Ld: drivers/net/wireless/mediatek/mt76/sdio.o: in function `mt76s_wr':
sdio.c:(.text+0x1599): undefined reference to `sdio_claim_host'
Ld: sdio.c:(.text+0x15ae): undefined reference to `sdio_writel'
Ld: sdio.c:(.text+0x15f9): undefined reference to `sdio_writel'
Ld: sdio.c:(.text+0x1646): undefined reference to `sdio_writel'
Ld: sdio.c:(.text+0x16a5): undefined reference to `sdio_readl'
Ld: sdio.c:(.text+0x16cb): undefined reference to `sdio_writel'
Ld: sdio.c:(.text+0x170a): undefined reference to `sdio_readl'
Ld: sdio.c:(.text+0x1782): undefined reference to `sdio_readl'
Ld: sdio.c:(.text+0x17e9): undefined reference to `sdio_release_host'

Fixes: 48fab5bbef409 ("mt76: mt7921: introduce mt7921s support")
Reported-by: Randy Dunlap <rdunlap@infradead.org>
Tested-by: Randy Dunlap <rdunlap@infradead.org>
Signed-off-by: Lorenzo Bianconi <lorenzo@kernel.org>
Signed-off-by: Kalle Valo <kvalo@codeaurora.org>
Link: https://lore.kernel.org/r/1ce6cb04ba1ab5aabd2b06b45fd8266537ef5359.1634893214.git.lorenzo@kernel.org
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/net/wireless/mediatek/mt76/mt7921/Kconfig | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/net/wireless/mediatek/mt76/mt7921/Kconfig b/drivers/net/wireless/mediatek/mt76/mt7921/Kconfig
index ce3a06227901..71154fc2a87c 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7921/Kconfig
+++ b/drivers/net/wireless/mediatek/mt76/mt7921/Kconfig
@@ -19,6 +19,7 @@ config MT7921S
 	select MT76_SDIO
 	select MT7921_COMMON
 	depends on MAC80211
+	depends on MMC
 	help
 	  This adds support for MT7921S 802.11ax 2x2:2SS wireless devices.
 
-- 
2.35.3

