From ca27441efe696a8990858156c6c332e786c30b4a Mon Sep 17 00:00:00 2001
From: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Date: Fri, 9 Jun 2023 01:40:41 +0000
Subject: [PATCH] ASoC: audio-graph-card2-custom-sample: add missing CPU:Codec = 1:N sample
Git-commit: ca27441efe696a8990858156c6c332e786c30b4a
Patch-mainline: v6.5-rc1
References: jsc#PED-6045 jsc#PED-6036 jsc#PED-6104 jsc#PED-6114 jsc#PED-6067 jsc#PED-6123

It has CPU:Codec = 1:1 and N:N samples, but missing 1:N settings.
This patch adds it.

One note here is that because of registering timing, probing and
CPU/Codec numbering are mismatching.

Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Link: https://lore.kernel.org/r/87ilbx1kh3.wl-kuninori.morimoto.gx@renesas.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 .../audio-graph-card2-custom-sample.dtsi      | 26 +++++++++++++++++++
 1 file changed, 26 insertions(+)

diff --git a/sound/soc/generic/audio-graph-card2-custom-sample.dtsi b/sound/soc/generic/audio-graph-card2-custom-sample.dtsi
index 994db61a26b3..f5e7d669da45 100644
--- a/sound/soc/generic/audio-graph-card2-custom-sample.dtsi
+++ b/sound/soc/generic/audio-graph-card2-custom-sample.dtsi
@@ -42,6 +42,15 @@ / {
 	 * [Normal]
 	 *	cpu0 <-@-----------------> codec0
 	 *
+	 * [Semi-Multi]
+	 *
+	 * CPU:Codec = 1:N
+	 *
+	 *			+-+
+	 *	cpu7 <-@------->| |-> codec12
+	 *			| |-> codec13
+	 *			+-+
+	 *
 	 * [Multi-CPU/Codec]
 	 *		+-+		+-+
 	 *	cpu1 <--| |<-@--------->| |-> codec1
@@ -128,6 +137,9 @@ audio-graph-card2-custom-sample {
 			 */
 			 &cpu0
 
+			/* [Semi-Multi] */
+			&sm0
+
 			/*
 			 * [Multi-CPU/Codec]: cpu side only
 			 * cpu1/cpu2/codec1/codec2
@@ -194,6 +206,13 @@ ports@4 {
 				port@1 { mc2c10_ep: endpoint { remote-endpoint = <&codec10_ep>; }; };
 				port@2 { mc2c11_ep: endpoint { remote-endpoint = <&codec11_ep>; }; };
 			};
+
+			/* [Semi-Multi] */
+			ports@5 {
+				port@0 { smcodec0_ep: endpoint { remote-endpoint = <&cpu7_ep>;    }; };
+				port@1 { smcodec1_ep: endpoint { remote-endpoint = <&codec12_ep>; }; };
+				port@2 { smcodec2_ep: endpoint { remote-endpoint = <&codec13_ep>; }; };
+			};
 		};
 
 		dpcm {
@@ -261,6 +280,9 @@ ports {
 			/* [DPCM-Multi]::FE */
 			      port@5 { cpu5_ep: endpoint { remote-endpoint = <&fe10_ep>; }; };
 			      port@6 { cpu6_ep: endpoint { remote-endpoint = <&fe11_ep>; }; };
+
+			/* [Semi-Multi] */
+			sm0:  port@7 { cpu7_ep: endpoint { remote-endpoint = <&smcodec0_ep>; }; };
 		};
 	};
 
@@ -311,6 +333,10 @@ port@3  {
 			port@9  { codec9_ep:  endpoint { remote-endpoint = <&mc2c01_ep>; }; };
 			port@10 { codec10_ep: endpoint { remote-endpoint = <&mc2c10_ep>; }; };
 			port@11 { codec11_ep: endpoint { remote-endpoint = <&mc2c11_ep>; }; };
+
+			/* [Semi-Multi] */
+			port@12 { codec12_ep: endpoint { remote-endpoint = <&smcodec1_ep>; }; };
+			port@13 { codec13_ep: endpoint { remote-endpoint = <&smcodec2_ep>; }; };
 		};
 	};
 };
-- 
2.35.3

