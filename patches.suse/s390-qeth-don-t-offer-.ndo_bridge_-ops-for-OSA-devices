From: Julian Wiedmann <jwi@linux.ibm.com>
Date: Tue, 7 Dec 2021 10:04:50 +0100
Subject: s390/qeth: don't offer .ndo_bridge_* ops for OSA devices
Git-commit: cdf8df5b42e7d9e2f6e660e672d42edb0514b862
Patch-mainline: v5.17-rc1
References: jsc#PED-594 LTC#198619 bsc#1208368

qeth_l2_detect_dev2br_support() will only set brport_hw_features for IQD
devices. So qeth_l2_bridge_getlink() and qeth_l2_bridge_setlink() will
always return -EOPNOTSUPP on OSA devices. Just don't offer these
callbacks instead.

2023-03-23: fixed the SLE15-SP5 backport (the original backport applied the
change to qeth_l2_iqd_netdev_ops rather than qeth_l2_osa_netdev_ops)

Signed-off-by: Julian Wiedmann <jwi@linux.ibm.com>
Signed-off-by: Alexandra Winter <wintera@linux.ibm.com>
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Acked-by: Petr Tesarik <ptesarik@suse.com>
Acked-by: Michal Kubecek <mkubecek@suse.cz>
---
 drivers/s390/net/qeth_l2_main.c | 2 --
 1 file changed, 2 deletions(-)

--- a/drivers/s390/net/qeth_l2_main.c
+++ b/drivers/s390/net/qeth_l2_main.c
@@ -1126,8 +1126,6 @@ static const struct net_device_ops qeth_l2_osa_netdev_ops = {
 	.ndo_tx_timeout		= qeth_tx_timeout,
 	.ndo_fix_features	= qeth_fix_features,
 	.ndo_set_features	= qeth_set_features,
-	.ndo_bridge_getlink	= qeth_l2_bridge_getlink,
-	.ndo_bridge_setlink	= qeth_l2_bridge_setlink,
 };
 
 static const struct net_device_ops qeth_osn_netdev_ops = {
