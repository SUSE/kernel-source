From fbae863de87bf50c7b13b40e3b4dc4b479335020 Mon Sep 17 00:00:00 2001
From: Ajit Kumar Pandey <AjitKumar.Pandey@amd.com>
Date: Wed, 20 Apr 2022 15:14:36 +0530
Subject: [PATCH] ASoC: amd: acp: Add pm ops callback in machine driver
Git-commit: fbae863de87bf50c7b13b40e3b4dc4b479335020
Patch-mainline: v5.19-rc1
References: jsc#PED-850

Add alsa snd_soc_pm_ops callback in ACP machine driver to support
suspend and resume operation of sound card components

Signed-off-by: Ajit Kumar Pandey <AjitKumar.Pandey@amd.com>
Link: https://lore.kernel.org/r/20220420094442.1352717-1-AjitKumar.Pandey@amd.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 sound/soc/amd/acp/acp-legacy-mach.c | 1 +
 sound/soc/amd/acp/acp-sof-mach.c    | 1 +
 2 files changed, 2 insertions(+)

diff --git a/sound/soc/amd/acp/acp-legacy-mach.c b/sound/soc/amd/acp/acp-legacy-mach.c
index 5d276365d644..442d5644e0f3 100644
--- a/sound/soc/amd/acp/acp-legacy-mach.c
+++ b/sound/soc/amd/acp/acp-legacy-mach.c
@@ -131,6 +131,7 @@ static const struct platform_device_id board_ids[] = {
 };
 static struct platform_driver acp_asoc_audio = {
 	.driver = {
+		.pm = &snd_soc_pm_ops,
 		.name = "acp_mach",
 	},
 	.probe = acp_asoc_probe,
diff --git a/sound/soc/amd/acp/acp-sof-mach.c b/sound/soc/amd/acp/acp-sof-mach.c
index 3346677949e3..bf61a1726f0e 100644
--- a/sound/soc/amd/acp/acp-sof-mach.c
+++ b/sound/soc/amd/acp/acp-sof-mach.c
@@ -144,6 +144,7 @@ static const struct platform_device_id board_ids[] = {
 static struct platform_driver acp_asoc_audio = {
 	.driver = {
 		.name = "sof_mach",
+		.pm = &snd_soc_pm_ops,
 	},
 	.probe = acp_sof_probe,
 	.id_table = board_ids,
-- 
2.35.3

