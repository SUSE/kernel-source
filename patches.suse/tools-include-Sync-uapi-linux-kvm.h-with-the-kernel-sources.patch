From: Namhyung Kim <namhyung@kernel.org>
Date: Tue, 6 Aug 2024 12:07:50 -0700
Subject: tools/include: Sync uapi/linux/kvm.h with the kernel sources
Git-commit: a625df3995c31a5d8cf46f2337b207e93bef9bdd (partial)
Patch-mainline: v6.11-rc4
References: perf-sp7-v6.11-userspace-update
X-Info: limit to header files currently backported

And other arch-specific UAPI headers to pick up changes from:

  [NOT IN SUSE PATCH -- tonyj] 4b23e0c199b2 KVM: Ensure new code that references immediate_exit gets extra scrutiny
  [NOT IN SUSE PATCH -- tonyj] 85542adb65ec KVM: x86: Add KVM_RUN_X86_GUEST_MODE kvm_run flag
  [NOT IN SUSE PATCH -- tonyj] 6fef518594bc KVM: x86: Add a capability to configure bus frequency for APIC timer
  [NOT IN SUSE PATCH -- tonyj] 34ff65901735 x86/sev: Use kernel provided SVSM Calling Areas
  [NOT IN SUSE PATCH -- tonyj] 5dcc1e76144f Merge tag 'kvm-x86-misc-6.11' of https://github.com/kvm-x86/linux into HEAD
  9a0d2f4995dd KVM: PPC: Book3S HV: Add one-reg interface for HASHPKEYR register
  e9eb790b2557 KVM: PPC: Book3S HV: Add one-reg interface for HASHKEYR register
  1a1e6865f516 KVM: PPC: Book3S HV: Add one-reg interface for DEXCR register

This should be used to beautify KVM syscall arguments and it addresses
these tools/perf build warnings:

  Warning: Kernel ABI header differences:
  diff -u tools/include/uapi/linux/kvm.h include/uapi/linux/kvm.h
  diff -u tools/arch/x86/include/uapi/asm/kvm.h arch/x86/include/uapi/asm/kvm.h
  diff -u tools/arch/x86/include/uapi/asm/svm.h arch/x86/include/uapi/asm/svm.h
  diff -u tools/arch/powerpc/include/uapi/asm/kvm.h arch/powerpc/include/uapi/asm/kvm.h

Please see tools/include/uapi/README for details (it's in the first patch
of this series).

Cc: Paolo Bonzini <pbonzini@redhat.com>
Cc: kvm@vger.kernel.org
Signed-off-by: Namhyung Kim <namhyung@kernel.org>
Signed-off-by: Tony Jones <tonyj@suse.de>
---
 tools/arch/powerpc/include/uapi/asm/kvm.h |    3 +++
 1 file changed, 3 insertions(+)

--- a/tools/arch/powerpc/include/uapi/asm/kvm.h
+++ b/tools/arch/powerpc/include/uapi/asm/kvm.h
@@ -646,6 +646,9 @@
 #define KVM_REG_PPC_SIER3	(KVM_REG_PPC | KVM_REG_SIZE_U64 | 0xc3)
 #define KVM_REG_PPC_DAWR1	(KVM_REG_PPC | KVM_REG_SIZE_U64 | 0xc4)
 #define KVM_REG_PPC_DAWRX1	(KVM_REG_PPC | KVM_REG_SIZE_U64 | 0xc5)
+#define KVM_REG_PPC_DEXCR	(KVM_REG_PPC | KVM_REG_SIZE_U64 | 0xc6)
+#define KVM_REG_PPC_HASHKEYR	(KVM_REG_PPC | KVM_REG_SIZE_U64 | 0xc7)
+#define KVM_REG_PPC_HASHPKEYR	(KVM_REG_PPC | KVM_REG_SIZE_U64 | 0xc8)
 
 /* Transactional Memory checkpointed state:
  * This is all GPRs, all VSX regs and a subset of SPRs
