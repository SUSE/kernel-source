From: Irvin Cote <irvincoteg@gmail.com>
Date: Wed, 17 May 2023 19:09:15 -0300
Subject: nvme-core: remove redundant check from nvme_init_ns_head
Patch-mainline: v6.5-rc1
Git-commit: 2110a6bcd7afd313ae10e9808878cd7c419c6b65
References: jsc#PED-6252 jsc#PED-5728 jsc#PED-5062 jsc#PED-3535

nvme_find_ns_head already checks that the list of namescpaces
in an already existing namespace head is not empty

Signed-off-by: Irvin Cote <irvincoteg@gmail.com>
Reviewed-by: Sagi Grimberg <sagi@grimberg.me>
Reviewed-by: Christoph Hellwig <hch@lst.de>
Signed-off-by: Keith Busch <kbusch@kernel.org>
Acked-by: Daniel Wagner <dwagner@suse.de>
---
 drivers/nvme/host/core.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/nvme/host/core.c
+++ b/drivers/nvme/host/core.c
@@ -3607,7 +3607,7 @@ static int nvme_init_ns_head(struct nvme
 			goto out_put_ns_head;
 		}
 
-		if (!multipath && !list_empty(&head->list)) {
+		if (!multipath) {
 			dev_warn(ctrl->device,
 				"Found shared namespace %d, but multipathing not supported.\n",
 				info->nsid);
