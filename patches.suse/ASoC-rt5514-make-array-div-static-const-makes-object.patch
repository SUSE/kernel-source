From 5c8a7efc2fd5eb716c48d7d7ab4295effbc09ba3 Mon Sep 17 00:00:00 2001
From: Colin Ian King <colin.king@canonical.com>
Date: Sun, 1 Aug 2021 07:40:23 +0100
Subject: [PATCH] ASoC: rt5514: make array div static const, makes object smaller
Git-commit: 5c8a7efc2fd5eb716c48d7d7ab4295effbc09ba3
Patch-mainline: v5.15-rc1
References: bsc#1192354

Don't populate the array div on the stack but instead it
static const. Makes the object code smaller by 48 bytes.

Before: text    data     bss     dec     hex filename  53894   16368     128   70390   112f6 ./sound/soc/codecs/rt5514.o

After: text    data     bss     dec     hex filename  53750   16464     128   70342   112c6 ./sound/soc/codecs/rt5514.o

(gcc version 10.2.0)

Signed-off-by: Colin Ian King <colin.king@canonical.com>
Link: https://lore.kernel.org/r/20210801064023.138359-1-colin.king@canonical.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 sound/soc/codecs/rt5514.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/sound/soc/codecs/rt5514.c b/sound/soc/codecs/rt5514.c
index 7081142a355e..4b1ad5054e8d 100644
--- a/sound/soc/codecs/rt5514.c
+++ b/sound/soc/codecs/rt5514.c
@@ -494,7 +494,7 @@ static const struct snd_kcontrol_new rt5514_sto2_dmic_mux =
  */
 static int rt5514_calc_dmic_clk(struct snd_soc_component *component, int rate)
 {
-	int div[] = {2, 3, 4, 8, 12, 16, 24, 32};
+	static const int div[] = {2, 3, 4, 8, 12, 16, 24, 32};
 	int i;
 
 	if (rate < 1000000 * div[0]) {
-- 
2.26.2

