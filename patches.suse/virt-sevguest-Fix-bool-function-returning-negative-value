From: Haowen Bai <baihaowen@meizu.com>
Date: Thu, 14 Apr 2022 18:04:17 +0800
Subject: virt: sevguest: Fix bool function returning negative value
Git-commit: 101826e02ac6c829bf4e768295e79ae9c37b4b2a
Patch-mainline: v5.19-rc1
References: jsc#SLE-19924, jsc#SLE-24814

The function enc_payload() is wrongly declared bool but returns an
integer value. Correct it.

  [ bp: Massage commit message. ]

Fixes: fce96cf04430 ("virt: Add SEV-SNP guest driver")
Signed-off-by: Haowen Bai <baihaowen@meizu.com>
Signed-off-by: Borislav Petkov <bp@suse.de>
Link: https://lore.kernel.org/r/1649930657-10837-1-git-send-email-baihaowen@meizu.com

Acked-by: Joerg Roedel <jroedel@suse.de>
---
 drivers/virt/coco/sevguest/sevguest.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/virt/coco/sevguest/sevguest.c
+++ b/drivers/virt/coco/sevguest/sevguest.c
@@ -276,7 +276,7 @@ static int verify_and_dec_payload(struct
 	return dec_payload(snp_dev, resp, payload, resp_hdr->msg_sz + crypto->a_len);
 }
 
-static bool enc_payload(struct snp_guest_dev *snp_dev, u64 seqno, int version, u8 type,
+static int enc_payload(struct snp_guest_dev *snp_dev, u64 seqno, int version, u8 type,
 			void *payload, size_t sz)
 {
 	struct snp_guest_msg *req = snp_dev->request;
