From: Jiri Pirko <jiri@nvidia.com>
Date: Thu, 1 Jun 2023 13:15:12 +0200
Subject: net/mlx5: Remove redundant is_mdev_switchdev_mode() check from
 is_ib_rep_supported()
Patch-mainline: v6.5-rc1
Git-commit: 0d0946d6488e785c30a0c4fce4cf21dc7da6dc1f
References: jsc#PED-3311

is_mdev_switchdev_mode() check is done in is_eth_rep_supported().
Function is_ib_rep_supported() calls is_eth_rep_supported().
Remove the redundant check from it.

Signed-off-by: Jiri Pirko <jiri@nvidia.com>
Reviewed-by: Shay Drory <shayd@nvidia.com>
Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/net/ethernet/mellanox/mlx5/core/dev.c |    3 ---
 1 file changed, 3 deletions(-)

--- a/drivers/net/ethernet/mellanox/mlx5/core/dev.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/dev.c
@@ -151,9 +151,6 @@ static bool is_ib_rep_supported(struct m
 	if (!is_eth_rep_supported(dev))
 		return false;
 
-	if (!is_mdev_switchdev_mode(dev))
-		return false;
-
 	if (mlx5_core_mp_enabled(dev))
 		return false;
 
