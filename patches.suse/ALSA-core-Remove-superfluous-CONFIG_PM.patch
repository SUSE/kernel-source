From da0713fff528112890aac02fea08937b65d5c8ba Mon Sep 17 00:00:00 2001
From: Takashi Iwai <tiwai@suse.de>
Date: Fri, 10 May 2024 14:51:27 +0200
Subject: [PATCH] ALSA: core: Remove superfluous CONFIG_PM
Git-commit: da0713fff528112890aac02fea08937b65d5c8ba
Patch-mainline: v6.10-rc1
References: jsc#PED-9993 jsc#PED-10202

Since the recent code change, the conditional build with CONFIG_PM is
calling only snd_power_sync_ref().  As a dummy function is provided
for this function, we can get rid of CONFIG_PM gracefully now.

Link: https://lore.kernel.org/r/20240510125128.6058-1-tiwai@suse.de
Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 sound/core/init.c | 2 --
 1 file changed, 2 deletions(-)

diff --git a/sound/core/init.c b/sound/core/init.c
index 89c8354862c4..6b127864a1a3 100644
--- a/sound/core/init.c
+++ b/sound/core/init.c
@@ -550,9 +550,7 @@ void snd_card_disconnect(struct snd_card *card)
 		clear_bit(card->number, snd_cards_lock);
 	}
 
-#ifdef CONFIG_PM
 	snd_power_sync_ref(card);
-#endif
 }
 EXPORT_SYMBOL(snd_card_disconnect);
 
-- 
2.43.0

