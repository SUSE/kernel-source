From: Hongbo Li <lihongbo22@huawei.com>
Date: Wed, 4 Sep 2024 09:15:53 +0800
Patch-mainline: v6.11
Subject: hv: vmbus: Constify struct kobj_type and struct attribute_group
Git-commit: 895384881ec960aa4c602397a69f0a44a8169405
References: git-fixes

vmbus_chan_group  and vmbus_chan_type are not modified. They are only
used in the helpers which take a const type parameter.

Constifying these structures and moving them to a read-only section can
increase over all security.

```
[Before]
   text   data    bss    dec    hex    filename
  20568   4699     48  25315   62e3    drivers/hv/vmbus_drv.o

[After]
   text   data    bss    dec    hex    filename
  20696   4571     48  25315   62e3    drivers/hv/vmbus_drv.o
```

Signed-off-by: Hongbo Li <lihongbo22@huawei.com>
Reviewed-by: Naman Jain <namjain@linux.microsoft.com>
Link: https://lore.kernel.org/r/20240904011553.2010203-1-lihongbo22@huawei.com
Signed-off-by: Wei Liu <wei.liu@kernel.org>
Message-ID: <20240904011553.2010203-1-lihongbo22@huawei.com>
Acked-by: Olaf Hering <ohering@suse.de>
---
 drivers/hv/vmbus_drv.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/hv/vmbus_drv.c b/drivers/hv/vmbus_drv.c
--- a/drivers/hv/vmbus_drv.c
+++ b/drivers/hv/vmbus_drv.c
@@ -1803,12 +1803,12 @@ static umode_t vmbus_chan_attr_is_visible(struct kobject *kobj,
 	return attr->mode;
 }
 
-static struct attribute_group vmbus_chan_group = {
+static const struct attribute_group vmbus_chan_group = {
 	.attrs = vmbus_chan_attrs,
 	.is_visible = vmbus_chan_attr_is_visible
 };
 
-static struct kobj_type vmbus_chan_ktype = {
+static const struct kobj_type vmbus_chan_ktype = {
 	.sysfs_ops = &vmbus_chan_sysfs_ops,
 	.release = vmbus_chan_release,
 };
