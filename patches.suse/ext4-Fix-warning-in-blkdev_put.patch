From: Jan Kara <jack@suse.cz>
Date: Thu, 22 Jun 2023 18:51:07 +0200
Subject: ext4: Fix warning in blkdev_put()
Git-commit: a42fb5a75ccc37dfd69aa9bde5ba2866e802ff3c
Patch-mainline: v6.5-rc1
References: git-fixes

ext4_blkdev_remove() passes a wrong holder pointer to blkdev_put() which
triggers a warning there. Fix it.

Fixes: 2736e8eeb0cc ("block: use the holder as indication for exclusive opens")
Signed-off-by: Jan Kara <jack@suse.cz>
Reviewed-by: Christoph Hellwig <hch@lst.de>
Link: https://lore.kernel.org/r/20230622165107.13687-1-jack@suse.cz
Signed-off-by: Jens Axboe <axboe@kernel.dk>
Acked-by: Lee Duncan <lduncan@suse.com>
---
 fs/ext4/super.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/fs/ext4/super.c b/fs/ext4/super.c
index 94a7b56ed876..64342adcd679 100644
--- a/fs/ext4/super.c
+++ b/fs/ext4/super.c
@@ -1133,7 +1133,7 @@ static void ext4_blkdev_remove(struct ext4_sb_info *sbi)
 	struct block_device *bdev;
 	bdev = sbi->s_journal_bdev;
 	if (bdev) {
-		blkdev_put(bdev, sbi->s_es);
+		blkdev_put(bdev, sbi->s_sb);
 		sbi->s_journal_bdev = NULL;
 	}
 }

