From: Wyes Karny <wyes.karny@amd.com>
Date: Tue, 23 May 2023 16:18:15 +0000
Subject: acpi: Replace struct acpi_table_slit 1-element array with flex-array
Patch-mainline: v6.5-rc1
Git-commit: 41e7a72e1d3ca62560ec1ef1f4529e7a4c4ad8a3
References: jsc#PED-6741

struct acpi_table_slit is used for copying System Locality Information
Table data from ACPI tables. Here `entry` is a flex array but it was
using ancient 1-element fake flexible array, which has been deprecated.
Replace it with a C99 flexible array.

Signed-off-by: Wyes Karny <wyes.karny@amd.com>
Reviewed-by: Kees Cook <keescook@chromium.org>
Fixes: df8fc4e934c1 ("kbuild: Enable -fstrict-flex-arrays=3")
Signed-off-by: Kees Cook <keescook@chromium.org>
Link: https://lore.kernel.org/r/20230523161815.3083-1-wyes.karny@amd.com
Acked-by: Lee, Chun-Yi <jlee@suse.com>
---
 include/acpi/actbl3.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/include/acpi/actbl3.h
+++ b/include/acpi/actbl3.h
@@ -86,7 +86,7 @@ struct acpi_table_slic {
 struct acpi_table_slit {
 	struct acpi_table_header header;	/* Common ACPI table header */
 	u64 locality_count;
-	u8 entry[1];		/* Real size = localities^2 */
+	u8 entry[];				/* Real size = localities^2 */
 };
 
 /*******************************************************************************
