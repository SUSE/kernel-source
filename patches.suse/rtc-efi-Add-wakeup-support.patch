From eec79501cce6e8965e92174760c6a9e92d78a038 Mon Sep 17 00:00:00 2001
From: Riwen Lu <luriwen@kylinos.cn>
Date: Wed, 10 Aug 2022 15:01:09 +0800
Subject: [PATCH] rtc: efi: Add wakeup support
Git-commit: eec79501cce6e8965e92174760c6a9e92d78a038
Patch-mainline: v6.2-rc1
References: bsc#1213116

Add wakeup support for rtc-efi, so we can wakeup from S3/S4/S5 through
rtcwake.

Signed-off-by: Riwen Lu <luriwen@kylinos.cn>
Link: https://lore.kernel.org/r/TYWP286MB260191455377CEBD2336557EB1659@TYWP286MB2601.JPNP286.PROD.OUTLOOK.COM
Signed-off-by: Alexandre Belloni <alexandre.belloni@bootlin.com>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/rtc/rtc-efi.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/rtc/rtc-efi.c
+++ b/drivers/rtc/rtc-efi.c
@@ -270,6 +270,8 @@ static int __init efi_rtc_probe(struct p
 	rtc->ops = &efi_rtc_ops;
 	rtc->uie_unsupported = 1;
 
+	device_init_wakeup(&dev->dev, true);
+
 	return devm_rtc_register_device(rtc);
 }
 
