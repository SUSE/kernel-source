From: ran jianping <ran.jianping@zte.com.cn>
Date: Sun, 24 Apr 2022 06:24:13 +0000
Subject: scsi: qla2xxx: Remove unneeded flush_workqueue()
Patch-mainline: v5.19-rc1
Git-commit: cf97628fe1a1f25f3a5617fa10619d7bef904da1
References: bsc#1200046

All work currently pending will be done first by calling
destroy_workqueue(). There is no need to flush it explicitly.

Link: https://lore.kernel.org/r/20220424062413.3220315-1-ran.jianping@zte.com.cn
Reported-by: Zeal Robot <zealci@zte.com.cn>
Signed-off-by: ran jianping <ran.jianping@zte.com.cn>
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Acked-by: Daniel Wagner <dwagner@suse.de>
---
 drivers/scsi/qla2xxx/qla_os.c |    1 -
 1 file changed, 1 deletion(-)

--- a/drivers/scsi/qla2xxx/qla_os.c
+++ b/drivers/scsi/qla2xxx/qla_os.c
@@ -3934,7 +3934,6 @@ qla2x00_free_device(scsi_qla_host_t *vha
 
 	/* Flush the work queue and remove it */
 	if (ha->wq) {
-		flush_workqueue(ha->wq);
 		destroy_workqueue(ha->wq);
 		ha->wq = NULL;
 	}
