From: Zhuo Chen <chenzhuo.1@bytedance.com>
Date: Tue, 2 Aug 2022 11:29:37 +0800
Subject: [PATCH] crypto: hisilicon - Remove pci_aer_clear_nonfatal_status()
 call
Git-commit: 00278564a60e11df8bcca0ececd8b2f55434e406
Patch-mainline: v6.1-rc1
References: bsc#1232075

Calls to pci_cleanup_aer_uncorrect_error_status() have already been
removed after commit 62b36c3ea664 ("PCI/AER: Remove
pci_cleanup_aer_uncorrect_error_status() calls"). But in commit
6c6dd5802c2d ("crypto: hisilicon/qm - add controller reset interface")
pci_aer_clear_nonfatal_status() was used again, so remove it in
this patch.

Note: pci_cleanup_aer_uncorrect_error_status() was renamed to
pci_aer_clear_nonfatal_status() in commit 894020fdd88c
("pci/aer: Rationalize error status register clearing")

Signed-off-by: Zhuo Chen <chenzhuo.1@bytedance.com>
Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
Signed-off-by: David Sterba <dsterba@suse.com>
---
 drivers/crypto/hisilicon/qm.c |    2 --
 1 file changed, 2 deletions(-)

--- a/drivers/crypto/hisilicon/qm.c
+++ b/drivers/crypto/hisilicon/qm.c
@@ -4954,8 +4954,6 @@ pci_ers_result_t hisi_qm_dev_slot_reset(
 	if (pdev->is_virtfn)
 		return PCI_ERS_RESULT_RECOVERED;
 
-	pci_aer_clear_nonfatal_status(pdev);
-
 	/* reset pcie device controller */
 	ret = qm_controller_reset(qm);
 	if (ret) {
