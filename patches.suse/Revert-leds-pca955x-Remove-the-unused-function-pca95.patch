From 012825dbd5aa7454b93f7a17bd99efee114023ba Mon Sep 17 00:00:00 2001
From: Eddie James <eajames@linux.ibm.com>
Date: Fri, 21 Feb 2025 09:51:44 -0600
Subject: [PATCH] Revert "leds-pca955x: Remove the unused function pca95xx_num_led_regs()"
Git-commit: 012825dbd5aa7454b93f7a17bd99efee114023ba
Patch-mainline: v6.15-rc1
References: stable-fixes

This reverts commit 38bcb51f81af17a6d40fc135e565fc1fb8aa8e9d.

This function is needed by the hardware blink support just introduced.
Also rename the function to pca955x_num_led_regs() to match the rest of
the functions in the driver.

Signed-off-by: Eddie James <eajames@linux.ibm.com>
Link: https://lore.kernel.org/r/20250221155144.2109806-1-eajames@linux.ibm.com
Signed-off-by: Lee Jones <lee@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/leds/leds-pca955x.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/drivers/leds/leds-pca955x.c b/drivers/leds/leds-pca955x.c
index 156649e1e1c4..e9cfde9fe4b1 100644
--- a/drivers/leds/leds-pca955x.c
+++ b/drivers/leds/leds-pca955x.c
@@ -147,6 +147,12 @@ static inline int pca955x_num_input_regs(int bits)
 	return (bits + 7) / 8;
 }
 
+/* 4 bits per LED selector register */
+static inline int pca955x_num_led_regs(int bits)
+{
+	return (bits + 3)  / 4;
+}
+
 /*
  * Return an LED selector register value based on an existing one, with
  * the appropriate 2-bit state value set for the given LED number (0-3).
-- 
2.49.0

