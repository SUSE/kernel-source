From: Leon Romanovsky <leonro@nvidia.com>
Date: Mon, 9 Aug 2021 15:03:19 +0300
Subject: devlink: Fix port_type_set function pointer check
Patch-mainline: v5.15-rc1
Git-commit: 2a2b6e3640c43a808dcb5226963e2cc0669294b1
References: jsc#SLE-19253

Fix a typo when checking existence of port_type_set function pointer.

Fixes: 82564f6c706a ("devlink: Simplify devlink port API calls")
Reported-by: kernel test robot <lkp@intel.com>
Signed-off-by: Leon Romanovsky <leonro@nvidia.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 net/core/devlink.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/net/core/devlink.c
+++ b/net/core/devlink.c
@@ -1287,7 +1287,7 @@ static int devlink_port_type_set(struct
 {
 	int err;
 
-	if (devlink_port->devlink->ops->port_type_set)
+	if (!devlink_port->devlink->ops->port_type_set)
 		return -EOPNOTSUPP;
 
 	if (port_type == devlink_port->type)
