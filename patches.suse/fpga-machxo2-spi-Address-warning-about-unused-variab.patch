From 1e2658aef517bec2327b22e1ddb12e33cceee38e Mon Sep 17 00:00:00 2001
From: Moritz Fischer <mdf@kernel.org>
Date: Fri, 18 Jun 2021 15:46:18 -0700
Subject: [PATCH] fpga: machxo2-spi: Address warning about unused variable
Git-commit: 1e2658aef517bec2327b22e1ddb12e33cceee38e
Patch-mainline: v5.14-rc1
References: git-fixes

Address warning about unused variable in case CONFIG_OF is not set.

Warning: unused variable 'of_match' [-Wunused-const-variable]    static const struct of_device_id of_match[] = {

Fixes: 88fb3a002330 ("fpga: lattice machxo2: Add Lattice MachXO2 support")
Cc: Arnd Bergmann <arnd@arndb.de>
Cc: Tom Rix <trix@redhat.com>
Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Reported-by: Arnd Bergmann <arnd@arndb.de>
Signed-off-by: Moritz Fischer <mdf@kernel.org>
Link: https://lore.kernel.org/r/20210618224618.1487323-1-mdf@kernel.org
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/fpga/machxo2-spi.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/fpga/machxo2-spi.c
+++ b/drivers/fpga/machxo2-spi.c
@@ -381,11 +381,13 @@ static int machxo2_spi_remove(struct spi
 	return 0;
 }
 
+#ifdef CONFIG_OF
 static const struct of_device_id of_match[] = {
 	{ .compatible = "lattice,machxo2-slave-spi", },
 	{}
 };
 MODULE_DEVICE_TABLE(of, of_match);
+#endif
 
 static const struct spi_device_id lattice_ids[] = {
 	{ "machxo2-slave-spi", 0 },
