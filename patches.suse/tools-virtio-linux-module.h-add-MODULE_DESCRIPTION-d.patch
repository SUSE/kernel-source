Patch-mainline: v6.15-rc1
Git-commit: ec05544c858fef45bc00738c2ced196ed91be611
References: git-fixes
From: Yufeng Wang <wangyufeng@kylinos.cn>
Date: Tue, 14 Jan 2025 14:47:26 +0800
Subject: [PATCH] tools: virtio/linux/module.h add MODULE_DESCRIPTION() define.
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

when we build tools/virtio, meet below error information.

cc -g -O2 -Werror -Wno-maybe-uninitialized -Wall
-I. -I../include/ -I ../../usr/include/
-Wno-pointer-sign -fno-strict-overflow
-fno-strict-aliasing -fno-common -MMD
-U_FORTIFY_SOURCE -include ../../include/linux/kconfig.h
-mfunction-return=thunk -fcf-protection=none
-mindirect-branch-register -pthread
-c -o virtio_ring.o ../../drivers/virtio/virtio_ring.c
../../drivers/virtio/virtio_ring.c:3276:20: error：expected declaration specifiers or ‘...’ before string constant
 3276 | MODULE_DESCRIPTION("Virtio ring implementation");
      |

to fix, add MODULE_DESCRIPTION() define for virtio test.

Fixes: ab0727f3ddb8 ("virtio: add missing MODULE_DESCRIPTION() macros")
Signed-off-by: Yufeng Wang <wangyufeng@kylinos.cn>
Message-Id: <20250114064726.33079-1-wangyufeng@kylinos.cn>
Signed-off-by: Michael S. Tsirkin <mst@redhat.com>
Signed-off-by: Juergen Gross <jgross@suse.com>
---
 tools/virtio/linux/module.h | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/tools/virtio/linux/module.h b/tools/virtio/linux/module.h
index 9dfa96fea2b2..b91681fc1571 100644
--- a/tools/virtio/linux/module.h
+++ b/tools/virtio/linux/module.h
@@ -5,3 +5,10 @@
 	static __attribute__((unused)) const char *__MODULE_LICENSE_name = \
 		__MODULE_LICENSE_value
 
+#ifndef MODULE_AUTHOR
+#define MODULE_AUTHOR(x)
+#endif
+
+#ifndef MODULE_DESCRIPTION
+#define MODULE_DESCRIPTION(x)
+#endif
-- 
2.43.0

