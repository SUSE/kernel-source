From: Colin Ian King <colin.i.king@gmail.com>
Date: Thu, 17 Jul 2025 12:21:08 +0100
Subject: RDMA/mlx5: remove redundant check on err on return expression
Patch-mainline: v6.17-rc1
Git-commit: aee80e6ffc5878a90ca5c16760b2c4f3f3d7343f
References: jsc#PED-15334

Currently all paths that set err and then check it for an error
perform immediate returns, hence err always zero at the end of
the function _mlx5r_umr_zap_mkey.  The return expression
err ? err : nblocks has a redundant check on the err since err
is always zero, so just return nblocks instead.

Signed-off-by: Colin Ian King <colin.i.king@gmail.com>
Link: https://patch.msgid.link/20250717112108.4036171-1-colin.i.king@gmail.com
Signed-off-by: Leon Romanovsky <leon@kernel.org>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/infiniband/hw/mlx5/umr.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/infiniband/hw/mlx5/umr.c
+++ b/drivers/infiniband/hw/mlx5/umr.c
@@ -1050,7 +1050,7 @@ static int _mlx5r_umr_zap_mkey(struct ml
 		}
 	}
 
-	return err ? err : nblocks;
+	return nblocks;
 }
 
 /**
