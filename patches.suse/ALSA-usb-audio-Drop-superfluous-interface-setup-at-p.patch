From ac5e2fb425e1121ceef2b9d1b3ffccc195d55707 Mon Sep 17 00:00:00 2001
From: Takashi Iwai <tiwai@suse.de>
Date: Wed, 31 Aug 2022 15:00:21 +0200
Subject: [PATCH] ALSA: usb-audio: Drop superfluous interface setup at parsing
Git-commit: ac5e2fb425e1121ceef2b9d1b3ffccc195d55707
Patch-mainline: v6.1-rc1
References: git-fixes

We reset each interface that is being parsed for each stream, but this
is superfluous and even can lead to spurious errors.  Since the
interface is set up properly at opening the endpoint for each actual
stream operation, let's drop the superfluous one.

Link: https://lore.kernel.org/r/20220831130021.4762-1-tiwai@suse.de
Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 sound/usb/stream.c | 6 ------
 1 file changed, 6 deletions(-)

diff --git a/sound/usb/stream.c b/sound/usb/stream.c
index ceb93d798182..99578e9a8af0 100644
--- a/sound/usb/stream.c
+++ b/sound/usb/stream.c
@@ -1221,12 +1221,6 @@ static int __snd_usb_parse_audio_interface(struct snd_usb_audio *chip,
 			if (err < 0)
 				return err;
 		}
-
-		/* try to set the interface... */
-		usb_set_interface(chip->dev, iface_no, 0);
-		snd_usb_init_pitch(chip, fp);
-		snd_usb_init_sample_rate(chip, fp, fp->rate_max);
-		usb_set_interface(chip->dev, iface_no, altno);
 	}
 	return 0;
 }
-- 
2.35.3

