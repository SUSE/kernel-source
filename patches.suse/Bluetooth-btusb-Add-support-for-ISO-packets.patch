From: Luiz Augusto von Dentz <luiz.von.dentz@intel.com>
Date: Mon, 28 Oct 2019 17:09:09 +0200
Subject: Bluetooth: btusb: Add support for ISO packets
Patch-mainline: v6.0-rc1
Git-commit: 70405f02728e657c32ccfb1d3a2f6a801a948c77
References: jsc#PED-1407

This enabled btusb driver to properly transmit ISO packets.

Signed-off-by: Luiz Augusto von Dentz <luiz.von.dentz@intel.com>
Acked-by: Lee, Chun-Yi <jlee@suse.com>
---
 drivers/bluetooth/btusb.c |   14 ++++++++++++++
 1 file changed, 14 insertions(+)

--- a/drivers/bluetooth/btusb.c
+++ b/drivers/bluetooth/btusb.c
@@ -1780,6 +1780,13 @@ static int btusb_send_frame(struct hci_d
 
 		hdev->stat.sco_tx++;
 		return submit_tx_urb(hdev, urb);
+
+	case HCI_ISODATA_PKT:
+		urb = alloc_bulk_urb(hdev, skb);
+		if (IS_ERR(urb))
+			return PTR_ERR(urb);
+
+		return submit_or_queue_tx_urb(hdev, urb);
 	}
 
 	return -EILSEQ;
@@ -2272,6 +2279,13 @@ static int btusb_send_frame_intel(struct
 
 		hdev->stat.sco_tx++;
 		return submit_tx_urb(hdev, urb);
+
+	case HCI_ISODATA_PKT:
+		urb = alloc_bulk_urb(hdev, skb);
+		if (IS_ERR(urb))
+			return PTR_ERR(urb);
+
+		return submit_or_queue_tx_urb(hdev, urb);
 	}
 
 	return -EILSEQ;
