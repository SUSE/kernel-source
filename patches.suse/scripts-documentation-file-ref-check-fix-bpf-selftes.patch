From: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>
Date: Tue, 19 Oct 2021 08:42:51 +0100
Subject: scripts: documentation-file-ref-check: fix bpf selftests path
Patch-mainline: v5.16-rc1
Git-commit: 6e74e68d0b4cec4255d3af09cfa5426b8e20d549
References: jsc#PED-1368

tools/testing/selftests/bpf/test_bpftool_synctypes.py use
relative patches on the top of BPFTOOL_DIR:

	BPFTOOL_DIR = os.path.join(LINUX_ROOT, 'tools/bpf/bpftool')

Change the script to automatically convert:

	testing/selftests/bpf -> bpf/bpftool

In order to properly check the files used by such script.

Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>
Link: https://lore.kernel.org/r/49b765cbac6ccd22d627573154806ec9389d60f0.1634629094.git.mchehab+huawei@kernel.org
Signed-off-by: Jonathan Corbet <corbet@lwn.net>
Acked-by: Shung-Hsi Yu <shung-hsi.yu@suse.com>
---
 scripts/documentation-file-ref-check |    1 +
 1 file changed, 1 insertion(+)

--- a/scripts/documentation-file-ref-check
+++ b/scripts/documentation-file-ref-check
@@ -144,6 +144,7 @@ while (<IN>) {
 		if ($f =~ m/tools/) {
 			my $path = $f;
 			$path =~ s,(.*)/.*,$1,;
+			$path =~ s,testing/selftests/bpf,bpf/bpftool,;
 			next if (grep -e, glob("$path/$ref $path/../$ref $path/$fulref"));
 		}
 
