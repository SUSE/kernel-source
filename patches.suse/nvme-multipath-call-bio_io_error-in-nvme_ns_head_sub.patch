From: Guoqing Jiang <guoqing.jiang@linux.dev>
Date: Wed, 9 Mar 2022 14:02:28 +0800
Subject: nvme-multipath: call bio_io_error in nvme_ns_head_submit_bio
Patch-mainline: v5.18-rc1
Git-commit: 8f31dded50d927974a5a696196052ed53f1baf66
References: jsc#PED-1183

Use bio_io_error() here since bio_io_error does the same thing.

Signed-off-by: Guoqing Jiang <guoqing.jiang@linux.dev>
Reviewed-by: Chaitanya Kulkarni <kch@nvidia.com>
Signed-off-by: Christoph Hellwig <hch@lst.de>
Acked-by: Daniel Wagner <dwagner@suse.de>
---
 drivers/nvme/host/multipath.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

--- a/drivers/nvme/host/multipath.c
+++ b/drivers/nvme/host/multipath.c
@@ -387,8 +387,7 @@ static void nvme_ns_head_submit_bio(stru
 	} else {
 		dev_warn_ratelimited(dev, "no available path - failing I/O\n");
 
-		bio->bi_status = BLK_STS_IOERR;
-		bio_endio(bio);
+		bio_io_error(bio);
 	}
 
 	srcu_read_unlock(&head->srcu, srcu_idx);
