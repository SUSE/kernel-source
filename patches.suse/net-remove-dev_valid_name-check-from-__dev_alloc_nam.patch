From: Jakub Kicinski <kuba@kernel.org>
Date: Mon, 23 Oct 2023 08:23:45 -0700
Subject: net: remove dev_valid_name() check from __dev_alloc_name()
Patch-mainline: v6.7-rc1
Git-commit: 70e1b14c1bcbbb0854311ff8bed6cf4db75d5f05
References: bsc#1233749

__dev_alloc_name() is only called by dev_prep_valid_name(),
which already checks that name is valid.

Reviewed-by: Jiri Pirko <jiri@nvidia.com>
Link: https://lore.kernel.org/r/20231023152346.3639749-6-kuba@kernel.org
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Acked-by: Michal Kubecek <mkubecek@suse.cz>

---
 net/core/dev.c | 3 ---
 1 file changed, 3 deletions(-)

--- a/net/core/dev.c
+++ b/net/core/dev.c
@@ -1076,9 +1076,6 @@ static int __dev_alloc_name(struct net *net, const char *name, char *res)
 	struct net_device *d;
 	char buf[IFNAMSIZ];
 
-	if (!dev_valid_name(name))
-		return -EINVAL;
-
 	/* Verify the string as this thing may have come from the user.
 	 * There must be one "%d" and no other "%" characters.
 	 */
