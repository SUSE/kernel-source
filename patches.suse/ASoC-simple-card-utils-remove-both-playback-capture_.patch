From 45919c28134519080a85a5fb66d0f65955ef7572 Mon Sep 17 00:00:00 2001
From: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Date: Tue, 28 May 2024 05:05:14 +0000
Subject: [PATCH] ASoC: simple-card-utils: remove both playback/capture_only check
Git-commit: 45919c28134519080a85a5fb66d0f65955ef7572
Patch-mainline: v6.11-rc1
References: jsc#PED-9993 jsc#PED-10202

soc-pcm.c :: soc_get_playback_capture() will indicate error
if both playback_only / capture_only were true.

Thus, graph_util_parse_link_direction() which setup playback_only /
capture_only don't need to check it.
And, its return value is not used on existing driver. Let's remove it.

Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Link: https://msgid.link/r/87a5kah6gm.wl-kuninori.morimoto.gx@renesas.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 include/sound/simple_card_utils.h     | 2 +-
 sound/soc/generic/simple-card-utils.c | 7 +------
 2 files changed, 2 insertions(+), 7 deletions(-)

diff --git a/include/sound/simple_card_utils.h b/include/sound/simple_card_utils.h
index 2c2279d082ec..0a6435ac5c5f 100644
--- a/include/sound/simple_card_utils.h
+++ b/include/sound/simple_card_utils.h
@@ -197,7 +197,7 @@ int graph_util_is_ports0(struct device_node *port);
 int graph_util_parse_dai(struct device *dev, struct device_node *ep,
 			 struct snd_soc_dai_link_component *dlc, int *is_single_link);
 
-int graph_util_parse_link_direction(struct device_node *np,
+void graph_util_parse_link_direction(struct device_node *np,
 				    bool *is_playback_only, bool *is_capture_only);
 
 #ifdef DEBUG
diff --git a/sound/soc/generic/simple-card-utils.c b/sound/soc/generic/simple-card-utils.c
index 852989611362..bc4d518c35cb 100644
--- a/sound/soc/generic/simple-card-utils.c
+++ b/sound/soc/generic/simple-card-utils.c
@@ -1140,7 +1140,7 @@ int graph_util_parse_dai(struct device *dev, struct device_node *ep,
 }
 EXPORT_SYMBOL_GPL(graph_util_parse_dai);
 
-int graph_util_parse_link_direction(struct device_node *np,
+void graph_util_parse_link_direction(struct device_node *np,
 				    bool *playback_only, bool *capture_only)
 {
 	bool is_playback_only = false;
@@ -1149,13 +1149,8 @@ int graph_util_parse_link_direction(struct device_node *np,
 	is_playback_only = of_property_read_bool(np, "playback-only");
 	is_capture_only = of_property_read_bool(np, "capture-only");
 
-	if (is_playback_only && is_capture_only)
-		return -EINVAL;
-
 	*playback_only = is_playback_only;
 	*capture_only = is_capture_only;
-
-	return 0;
 }
 EXPORT_SYMBOL_GPL(graph_util_parse_link_direction);
 
-- 
2.43.0

