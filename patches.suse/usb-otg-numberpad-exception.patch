From 2ed5a9b3d5208a671e5f0fdf1cabf66f7b0a2cde Mon Sep 17 00:00:00 2001
From: Oliver Neukum <oneukum@suse.com>
Date: Tue, 16 Jan 2024 09:01:21 +0100
Subject: [PATCH] usb: otg numberpad exception
Patch-mainline: Never (suse specific workaround)
References: bsc#1218527

Quick fix adding an exception for a number pad
not working with OTG.

Signed-off-by: Oliver Neukum <oneukum@suse.com>
---
 drivers/usb/core/hub.c | 3 +++
 scripts/bpf_doc.py     | 0
 2 files changed, 3 insertions(+)
 mode change 100644 => 100755 scripts/bpf_doc.py

diff --git a/drivers/usb/core/hub.c b/drivers/usb/core/hub.c
index 756e17004..750c69bfb 100644
--- a/drivers/usb/core/hub.c
+++ b/drivers/usb/core/hub.c
@@ -2368,6 +2368,9 @@ static int usb_enumerate_device_otg(struct usb_device *udev)
 			}
 		} else if (desc->bLength == sizeof
 				(struct usb_otg_descriptor)) {
+			if (udev->descriptor.idVendor == 0x1753 &&
+					udev->descriptor.idProduct == 0xc901)
+				return 0;
 			/* Set a_alt_hnp_support for legacy otg device */
 			err = usb_control_msg(udev,
 				usb_sndctrlpipe(udev, 0),
diff --git a/scripts/bpf_doc.py b/scripts/bpf_doc.py
old mode 100644
new mode 100755
-- 
2.43.0

