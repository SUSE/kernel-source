From: Zhang Rui <rui.zhang@intel.com>
Date: Wed, 9 Apr 2025 08:50:25 +0800
Subject: ACPI: processor: idle: Set pr->flags.power unconditionally
Patch-mainline: v6.16-rc1
Git-commit: 8fa2f8bd6ad10ecf12f9872cdc5d8df7056e98e3
References: jsc#PED-14260

acpi_processor_get_power_info_default() ensures that the processor's
ACPI_STATE_C1 state is always valid. Consequently, the pr->flags.power
should be set unconditionally after this.

Remove conditional checks and directly set pr->flags.power.

No functional change.

Signed-off-by: Zhang Rui <rui.zhang@intel.com>
Link: https://patch.msgid.link/20250409005026.1932637-2-rui.zhang@intel.com
Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
Acked-by: Chun-Yi Lee <jlee@suse.com>
---
 drivers/acpi/processor_idle.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/acpi/processor_idle.c
+++ b/drivers/acpi/processor_idle.c
@@ -481,11 +481,11 @@ static int acpi_processor_get_cstate_inf
 	acpi_processor_get_power_info_default(pr);
 
 	pr->power.count = acpi_processor_power_verify(pr);
+	pr->flags.power = 1;
 
 	for (i = 1; i < ACPI_PROCESSOR_MAX_POWER; i++) {
 		if (pr->power.states[i].valid) {
 			pr->power.count = i;
-			pr->flags.power = 1;
 		}
 	}
 
