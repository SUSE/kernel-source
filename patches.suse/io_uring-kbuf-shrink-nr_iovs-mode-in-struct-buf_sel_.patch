From 120443321dfaaab8eb9290af617abcc37734c1e2 Mon Sep 17 00:00:00 2001
From: Jens Axboe <axboe@kernel.dk>
Date: Thu, 8 Aug 2024 12:54:55 -0600
Subject: [PATCH] io_uring/kbuf: shrink nr_iovs/mode in struct buf_sel_arg
Git-commit: 120443321dfaaab8eb9290af617abcc37734c1e2
Patch-mainline: v6.12-rc1
References: bsc#1230569

nr_iovs is capped at 1024, and mode only has a few low values. We can
safely make them u16, in preparation for adding a few more members.

Signed-off-by: Jens Axboe <axboe@kernel.dk>
Signed-off-by: Gabriel Krisman Bertazi <krisman@suse.de>
---
 io_uring/kbuf.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/io_uring/kbuf.h b/io_uring/kbuf.h
index 2ed141d7662e..ab30aa13fb5e 100644
--- a/io_uring/kbuf.h
+++ b/io_uring/kbuf.h
@@ -56,8 +56,8 @@ struct buf_sel_arg {
 	struct iovec *iovs;
 	size_t out_len;
 	size_t max_len;
-	int nr_iovs;
-	int mode;
+	unsigned short nr_iovs;
+	unsigned short mode;
 };
 
 void __user *io_buffer_select(struct io_kiocb *req, size_t *len,
-- 
2.47.0

