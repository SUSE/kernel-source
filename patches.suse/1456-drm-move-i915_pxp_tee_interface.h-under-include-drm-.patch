From 2d4765f0c7878714467e12d41883d8db2d50b2d4 Mon Sep 17 00:00:00 2001
From: Jani Nikula <jani.nikula@intel.com>
Date: Thu, 30 May 2024 16:19:07 +0300
Subject: drm: move i915_pxp_tee_interface.h under include/drm/intel
Git-commit: cce3819a5f5a55e08e5a3c9dcd1f46a3c5276ea8
Patch-mainline: v6.11-rc1
References: jsc#PED-9898 jsc#PED-10191 jsc#PED-10197 jsc#PED-10226 jsc#PED-10237 jsc#PED-10340 jsc#PED-10852 jsc#PED-11022

Clean up the top level include/drm directory by grouping all the Intel
specific files under a common subdirectory.

Cc: Daniel Vetter <daniel@ffwll.ch>
Cc: Dave Airlie <airlied@gmail.com>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Cc: Tomas Winkler <tomas.winkler@intel.com>
Acked-by: Lucas De Marchi <lucas.demarchi@intel.com>
Acked-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
Signed-off-by: Jani Nikula <jani.nikula@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/5c1626978d2552ef5732dcf9427c903046afb9c1.1717075103.git.jani.nikula@intel.com
Acked-by: Patrik Jakobsson <pjakobsson@suse.de>
---
 drivers/gpu/drm/i915/pxp/intel_pxp_tee.c   |  2 +-
 drivers/misc/mei/pxp/mei_pxp.c             |  2 +-
 include/drm/i915_pxp_tee_interface.h       | 62 ----------------------
 include/drm/intel/i915_pxp_tee_interface.h | 62 ++++++++++++++++++++++
 4 files changed, 64 insertions(+), 64 deletions(-)
 delete mode 100644 include/drm/i915_pxp_tee_interface.h
 create mode 100644 include/drm/intel/i915_pxp_tee_interface.h

diff --git a/drivers/gpu/drm/i915/pxp/intel_pxp_tee.c b/drivers/gpu/drm/i915/pxp/intel_pxp_tee.c
index 051b6cdcf721..1784153f0cf8 100644
--- a/drivers/gpu/drm/i915/pxp/intel_pxp_tee.c
+++ b/drivers/gpu/drm/i915/pxp/intel_pxp_tee.c
@@ -5,7 +5,7 @@
 
 #include <linux/component.h>
 
-#include <drm/i915_pxp_tee_interface.h>
+#include <drm/intel/i915_pxp_tee_interface.h>
 #include <drm/intel/i915_component.h>
 
 #include "gem/i915_gem_lmem.h"
diff --git a/drivers/misc/mei/pxp/mei_pxp.c b/drivers/misc/mei/pxp/mei_pxp.c
index ed88d6df4397..2820d389c88e 100644
--- a/drivers/misc/mei/pxp/mei_pxp.c
+++ b/drivers/misc/mei/pxp/mei_pxp.c
@@ -20,7 +20,7 @@
 #include <linux/component.h>
 #include <drm/drm_connector.h>
 #include <drm/intel/i915_component.h>
-#include <drm/i915_pxp_tee_interface.h>
+#include <drm/intel/i915_pxp_tee_interface.h>
 
 #include "mei_pxp.h"
 
diff --git a/include/drm/i915_pxp_tee_interface.h b/include/drm/i915_pxp_tee_interface.h
deleted file mode 100644
index a532d32f58f3..000000000000
--- a/include/drm/i915_pxp_tee_interface.h
+++ /dev/null
@@ -1,62 +0,0 @@
-/* SPDX-License-Identifier: MIT */
-/*
- * Copyright © 2020 Intel Corporation
- */
-
-#ifndef _I915_PXP_TEE_INTERFACE_H_
-#define _I915_PXP_TEE_INTERFACE_H_
-
-#include <linux/mutex.h>
-#include <linux/device.h>
-struct scatterlist;
-
-/**
- * struct i915_pxp_component_ops - ops for PXP services.
- */
-struct i915_pxp_component_ops {
-	/**
-	 * @owner: Module providing the ops.
-	 */
-	struct module *owner;
-
-	/**
-	 * @send: Send a PXP message.
-	 */
-	int (*send)(struct device *dev, const void *message, size_t size,
-		    unsigned long timeout_ms);
-	/**
-	 * @recv: Receive a PXP message.
-	 */
-	int (*recv)(struct device *dev, void *buffer, size_t size,
-		    unsigned long timeout_ms);
-	/**
-	 * @gsc_command: Send a GSC command.
-	 */
-	ssize_t (*gsc_command)(struct device *dev, u8 client_id, u32 fence_id,
-			       struct scatterlist *sg_in, size_t total_in_len,
-			       struct scatterlist *sg_out);
-
-};
-
-/**
- * struct i915_pxp_component - Used for communication between i915 and TEE
- * drivers for the PXP services
- */
-struct i915_pxp_component {
-	/**
-	 * @tee_dev: device that provide the PXP service from TEE Bus.
-	 */
-	struct device *tee_dev;
-
-	/**
-	 * @ops: Ops implemented by TEE driver, used by i915 driver.
-	 */
-	const struct i915_pxp_component_ops *ops;
-
-	/**
-	 * @mutex: To protect the above members.
-	 */
-	struct mutex mutex;
-};
-
-#endif /* _I915_TEE_PXP_INTERFACE_H_ */
diff --git a/include/drm/intel/i915_pxp_tee_interface.h b/include/drm/intel/i915_pxp_tee_interface.h
new file mode 100644
index 000000000000..a532d32f58f3
--- /dev/null
+++ b/include/drm/intel/i915_pxp_tee_interface.h
@@ -0,0 +1,62 @@
+/* SPDX-License-Identifier: MIT */
+/*
+ * Copyright © 2020 Intel Corporation
+ */
+
+#ifndef _I915_PXP_TEE_INTERFACE_H_
+#define _I915_PXP_TEE_INTERFACE_H_
+
+#include <linux/mutex.h>
+#include <linux/device.h>
+struct scatterlist;
+
+/**
+ * struct i915_pxp_component_ops - ops for PXP services.
+ */
+struct i915_pxp_component_ops {
+	/**
+	 * @owner: Module providing the ops.
+	 */
+	struct module *owner;
+
+	/**
+	 * @send: Send a PXP message.
+	 */
+	int (*send)(struct device *dev, const void *message, size_t size,
+		    unsigned long timeout_ms);
+	/**
+	 * @recv: Receive a PXP message.
+	 */
+	int (*recv)(struct device *dev, void *buffer, size_t size,
+		    unsigned long timeout_ms);
+	/**
+	 * @gsc_command: Send a GSC command.
+	 */
+	ssize_t (*gsc_command)(struct device *dev, u8 client_id, u32 fence_id,
+			       struct scatterlist *sg_in, size_t total_in_len,
+			       struct scatterlist *sg_out);
+
+};
+
+/**
+ * struct i915_pxp_component - Used for communication between i915 and TEE
+ * drivers for the PXP services
+ */
+struct i915_pxp_component {
+	/**
+	 * @tee_dev: device that provide the PXP service from TEE Bus.
+	 */
+	struct device *tee_dev;
+
+	/**
+	 * @ops: Ops implemented by TEE driver, used by i915 driver.
+	 */
+	const struct i915_pxp_component_ops *ops;
+
+	/**
+	 * @mutex: To protect the above members.
+	 */
+	struct mutex mutex;
+};
+
+#endif /* _I915_TEE_PXP_INTERFACE_H_ */
-- 
2.46.1

