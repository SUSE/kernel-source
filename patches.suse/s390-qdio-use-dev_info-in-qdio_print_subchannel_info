From: Julian Wiedmann <jwi@linux.ibm.com>
Date: Mon, 12 Jul 2021 09:39:57 +0200
Subject: s390/qdio: use dev_info() in qdio_print_subchannel_info()
Git-commit: f86991b3a95ab245510ccd111926d1f40ae13b91
Patch-mainline: v5.15-rc1
References: jsc#PED-455 bsc#1203836 LTC#198623

Prefer dev_info() over a raw printk. This also adds the device and
driver names into the output, so that we have:

Before:
    qdio: 0.0.17c0 ZFCP on SC 17 using [...]

After:
    zfcp 0.0.17c0: qdio: ZFCP on SC 17 using [...]

Signed-off-by: Julian Wiedmann <jwi@linux.ibm.com>
Reviewed-by: Benjamin Block <bblock@linux.ibm.com>
Signed-off-by: Vasily Gorbik <gor@linux.ibm.com>
Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/s390/cio/qdio_setup.c |    7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

--- a/drivers/s390/cio/qdio_setup.c
+++ b/drivers/s390/cio/qdio_setup.c
@@ -479,10 +479,8 @@ void qdio_shutdown_irq(struct qdio_irq *
 
 void qdio_print_subchannel_info(struct qdio_irq *irq_ptr)
 {
-	char s[80];
-
-	snprintf(s, 80, "qdio: %s %s on SC %x using AI:%d QEBSM:%d PRI:%d TDD:%d SIGA:%s%s%s\n",
-		 dev_name(&irq_ptr->cdev->dev),
+	dev_info(&irq_ptr->cdev->dev,
+		 "qdio: %s on SC %x using AI:%d QEBSM:%d PRI:%d TDD:%d SIGA:%s%s%s\n",
 		 (irq_ptr->qib.qfmt == QDIO_QETH_QFMT) ? "OSA" :
 			((irq_ptr->qib.qfmt == QDIO_ZFCP_QFMT) ? "ZFCP" : "HS"),
 		 irq_ptr->schid.sch_no,
@@ -493,7 +491,6 @@ void qdio_print_subchannel_info(struct q
 		 qdio_need_siga_in(irq_ptr) ? "R" : " ",
 		 qdio_need_siga_out(irq_ptr) ? "W" : " ",
 		 qdio_need_siga_sync(irq_ptr) ? "S" : " ");
-	printk(KERN_INFO "%s", s);
 }
 
 int __init qdio_setup_init(void)
