From 6cb13609a07ba466b4613fdce7da8c98508069b7 Mon Sep 17 00:00:00 2001
From: Zhang Rui <rui.zhang@intel.com>
Date: Thu, 31 Aug 2023 16:00:33 +0800
Subject: [PATCH] tools/power/turbostat: Rename rapl probing function
Git-commit: 6cb13609a07ba466b4613fdce7da8c98508069b7
Patch-mainline: v6.7-rc2
References: bsc#1218556

Rename rapl_probe() to probe_rapl() to be consistent with other probing
function names.

Probe rapl after probing uncore frequency.

Signed-off-by: Zhang Rui <rui.zhang@intel.com>
Reviewed-by: Len Brown <len.brown@intel.com>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 tools/power/x86/turbostat/turbostat.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/tools/power/x86/turbostat/turbostat.c b/tools/power/x86/turbostat/turbostat.c
index a956a30d81de..bf2b1d1b2627 100644
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@ -4865,11 +4865,11 @@ void rapl_probe_amd(void)
 }
 
 /*
- * rapl_probe()
+ * probe_rapl()
  *
  * sets rapl_power_units, rapl_energy_units, rapl_time_units
  */
-void rapl_probe(void)
+void probe_rapl(void)
 {
 	if (!platform->rapl_msrs)
 		return;
@@ -5558,11 +5558,11 @@ void process_cpuid()
 
 	probe_intel_uncore_frequency();
 
+	probe_rapl();
+
 	if (platform->has_nhm_msrs)
 		BIC_PRESENT(BIC_SMI);
 
-	rapl_probe();
-
 	if (!access("/sys/class/drm/card0/power/rc6_residency_ms", R_OK))
 		BIC_PRESENT(BIC_GFX_rc6);
 
-- 
2.35.3

