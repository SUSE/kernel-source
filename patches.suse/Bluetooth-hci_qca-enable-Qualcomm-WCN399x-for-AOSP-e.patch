From: Joseph Hwang <josephsih@chromium.org>
Date: Sun, 26 Sep 2021 15:07:47 +0800
Subject: Bluetooth: hci_qca: enable Qualcomm WCN399x for AOSP extension
Patch-mainline: v5.16-rc1
Git-commit: 34af56e8ad3a628de108cb5221c44ebffa001f97
References: jsc#PED-1407

This patch enables Qualcomm WCN399x to support the AOSP extension.

Reviewed-by: Miao-chen Chou <mcchou@chromium.org>
Signed-off-by: Joseph Hwang <josephsih@chromium.org>
Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
Acked-by: Lee, Chun-Yi <jlee@suse.com>
---
 drivers/bluetooth/hci_qca.c |    1 +
 1 file changed, 1 insertion(+)

--- a/drivers/bluetooth/hci_qca.c
+++ b/drivers/bluetooth/hci_qca.c
@@ -1730,6 +1730,7 @@ retry:
 	if (qca_is_wcn399x(soc_type) ||
 	    qca_is_wcn6750(soc_type)) {
 		set_bit(HCI_QUIRK_USE_BDADDR_PROPERTY, &hdev->quirks);
+		hci_set_aosp_capable(hdev);
 
 		ret = qca_read_soc_version(hdev, &ver, soc_type);
 		if (ret)
