From 1814159b0d0a21bb05ab7b62d2defadfad84ef68 Mon Sep 17 00:00:00 2001
From: Pawel Chmielewski <pawel.chmielewski@linux.intel.com>
Date: Fri, 16 Jan 2026 18:52:50 +0100
Subject: [PATCH] intel_th: pci: Add Nova Lake support
Git-commit: 1814159b0d0a21bb05ab7b62d2defadfad84ef68
Patch-mainline: v7.0-rc1
References: jsc#PED-13783

Add support for the Trace Hub in Nova Lake-P/H/S and PCH.

Signed-off-by: Pawel Chmielewski <pawel.chmielewski@linux.intel.com>
Reviewed-by: Alan Borzeszkowski <alan.borzeszkowski@linux.intel.com>
Reviewed-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
Signed-off-by: Alexander Shishkin <alexander.shishkin@linux.intel.com>
Link: https://patch.msgid.link/20260116175250.821002-3-alexander.shishkin@linux.intel.com
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/hwtracing/intel_th/pci.c     | 4 ++++
 drivers/hwtracing/intel_th/pci_ids.h | 4 ++++
 2 files changed, 8 insertions(+)

diff --git a/drivers/hwtracing/intel_th/pci.c b/drivers/hwtracing/intel_th/pci.c
index de069c7aea7c..6cd5ac3c6430 100644
--- a/drivers/hwtracing/intel_th/pci.c
+++ b/drivers/hwtracing/intel_th/pci.c
@@ -165,6 +165,7 @@ static const struct pci_device_id intel_th_pci_id_table[] = {
 	{ PCI_DEVICE_DATA(INTEL, NPK_ADL_P,	&intel_th_2x) },   /* Alder Lake-P */
 	{ PCI_DEVICE_DATA(INTEL, NPK_ADL_M,	&intel_th_2x) },   /* Alder Lake-M */
 	{ PCI_DEVICE_DATA(INTEL, NPK_APL,	NULL) },	   /* Apollo Lake */
+	{ PCI_DEVICE_DATA(INTEL, NPK_NVL_PCH,	&intel_th_2x) },   /* Nova Lake-PCH */
 	{ PCI_DEVICE_DATA(INTEL, NPK_ARL,	&intel_th_2x) },   /* Arrow Lake */
 	{ PCI_DEVICE_DATA(INTEL, NPK_RPL_S,	&intel_th_2x) },   /* Raptor Lake-S */
 	{ PCI_DEVICE_DATA(INTEL, NPK_ADL,	&intel_th_2x) },   /* Alder Lake */
@@ -184,6 +185,9 @@ static const struct pci_device_id intel_th_pci_id_table[] = {
 	{ PCI_DEVICE_DATA(INTEL, NPK_RPL_S_CPU,	&intel_th_2x) },   /* Raptor Lake-S CPU */
 	{ PCI_DEVICE_DATA(INTEL, NPK_LNL,	&intel_th_2x) },   /* Lunar Lake */
 	{ PCI_DEVICE_DATA(INTEL, NPK_MTL_S_CPU,	&intel_th_2x) },   /* Meteor Lake-S CPU */
+	{ PCI_DEVICE_DATA(INTEL, NPK_NVL_P,	&intel_th_2x) },   /* Nova Lake-P */
+	{ PCI_DEVICE_DATA(INTEL, NPK_NVL_H,	&intel_th_2x) },   /* Nova Lake-H */
+	{ PCI_DEVICE_DATA(INTEL, NPK_NVL_S,	&intel_th_2x) },   /* Nova Lake-S */
 	{ PCI_DEVICE_DATA(INTEL, NPK_PTL_H,	&intel_th_2x) },   /* Panther Lake-H */
 	{ PCI_DEVICE_DATA(INTEL, NPK_PTL_PU,	&intel_th_2x) },   /* Panther Lake-P/U */
 	{ }
diff --git a/drivers/hwtracing/intel_th/pci_ids.h b/drivers/hwtracing/intel_th/pci_ids.h
index 7dad5d7621f5..4a0c53beac22 100644
--- a/drivers/hwtracing/intel_th/pci_ids.h
+++ b/drivers/hwtracing/intel_th/pci_ids.h
@@ -31,6 +31,7 @@
 #define PCI_DEVICE_ID_INTEL_NPK_ADL_P	0x51a6
 #define PCI_DEVICE_ID_INTEL_NPK_ADL_M	0x54a6
 #define PCI_DEVICE_ID_INTEL_NPK_APL	0x5a8e
+#define PCI_DEVICE_ID_INTEL_NPK_NVL_PCH	0x6e26
 #define PCI_DEVICE_ID_INTEL_NPK_ARL	0x7724
 #define PCI_DEVICE_ID_INTEL_NPK_RPL_S	0x7a26
 #define PCI_DEVICE_ID_INTEL_NPK_ADL	0x7aa6
@@ -50,6 +51,9 @@
 #define PCI_DEVICE_ID_INTEL_NPK_RPL_S_CPU	0xa76f
 #define PCI_DEVICE_ID_INTEL_NPK_LNL	0xa824
 #define PCI_DEVICE_ID_INTEL_NPK_MTL_S_CPU	0xae24
+#define PCI_DEVICE_ID_INTEL_NPK_NVL_P	0xd224
+#define PCI_DEVICE_ID_INTEL_NPK_NVL_H	0xd324
+#define PCI_DEVICE_ID_INTEL_NPK_NVL_S	0xd424
 #define PCI_DEVICE_ID_INTEL_NPK_PTL_H	0xe324
 #define PCI_DEVICE_ID_INTEL_NPK_PTL_PU	0xe424
 
-- 
2.53.0

