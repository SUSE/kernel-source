From: Miroslav Benes <mbenes@suse.cz>
Date: Wed, 1 Sep 2021 11:52:11 +0200
Subject: Revert "kallsyms: unexport kallsyms_lookup_name() and
 kallsyms_on_each_symbol()"
Patch-mainline: Never, SUSE-specific
References: bsc#1190003 jsc#SLE-17360

This reverts commit 0bd476e6c67190b5eb7b6e105c8db8ff61103281.

Re-export two kallsyms symbols we need for our live patches development.

Signed-off-by: Miroslav Benes <mbenes@suse.cz>
---
 kernel/kallsyms.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/kernel/kallsyms.c b/kernel/kallsyms.c
index 0ba87982d017..9f5847a50a2b 100644
--- a/kernel/kallsyms.c
+++ b/kernel/kallsyms.c
@@ -203,6 +203,7 @@ unsigned long kallsyms_lookup_name(const char *name)
 	}
 	return module_kallsyms_lookup_name(name);
 }
+EXPORT_SYMBOL_GPL(kallsyms_lookup_name);
 
 #ifdef CONFIG_LIVEPATCH
 /*
@@ -226,6 +227,7 @@ int kallsyms_on_each_symbol(int (*fn)(void *, const char *, struct module *,
 	}
 	return 0;
 }
+EXPORT_SYMBOL_GPL(kallsyms_on_each_symbol);
 #endif /* CONFIG_LIVEPATCH */
 
 static unsigned long get_symbol_pos(unsigned long addr,

