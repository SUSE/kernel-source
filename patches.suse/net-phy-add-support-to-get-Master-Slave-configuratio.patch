From: Raju Lakkaraju <Raju.Lakkaraju@microchip.com>
Date: Thu, 16 Jun 2022 09:42:26 +0530
Subject: net: phy: add support to get Master-Slave configuration
Patch-mainline: v6.0-rc1
Git-commit: 311abcdddc00aa733211fb3e92815155066896e1
References: jsc#PED-829

Add support to Master-Slave configuration and state

Signed-off-by: Raju Lakkaraju <Raju.Lakkaraju@microchip.com>
Reviewed-by: Andrew Lunn <andrew@lunn.ch>
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/net/phy/mxl-gpy.c |    3 +++
 1 file changed, 3 insertions(+)

--- a/drivers/net/phy/mxl-gpy.c
+++ b/drivers/net/phy/mxl-gpy.c
@@ -295,6 +295,9 @@ static void gpy_update_interface(struct
 				   ret);
 		break;
 	}
+
+	if (phydev->speed == SPEED_2500 || phydev->speed == SPEED_1000)
+		genphy_read_master_slave(phydev);
 }
 
 static int gpy_read_status(struct phy_device *phydev)
