From: Bennett Amodio <bamodio@purestorage.com>
Date: Tue, 15 Aug 2017 17:48:43 -0700
Subject: [PATCH] NFS: Allow multiple connections to NFSv4.0 servers
Patch-mainline: v5.9-rc1
References: fate#322786
Git-commit: dbc4fec6b6dd2d23e161b250d51cbd28bd9c8497
X-note: Fixed by a different developer but the end result is the same

Enable nconnect mount option and multipathing behavior for NFSv4.0.

Signed-off-by: Jui-Yu Chang <juchang@purestorage.com>
Acked-by: NeilBrown <neilb@suse.com>

---
 fs/nfs/nfs4client.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/fs/nfs/nfs4client.c
+++ b/fs/nfs/nfs4client.c
@@ -880,7 +880,7 @@ static int nfs4_set_client(struct nfs_se
 
 	if (minorversion == 0)
 		__set_bit(NFS_CS_REUSEPORT, &cl_init.init_flags);
-	if (minorversion > 0 && proto == XPRT_TRANSPORT_TCP)
+	if (proto == XPRT_TRANSPORT_TCP)
 		cl_init.nconnect = nconnect;
 	if (server->flags & NFS_MOUNT_NORESVPORT)
 		set_bit(NFS_CS_NORESVPORT, &cl_init.init_flags);
