From 446b31e894935ebbcf84302061a4e0e2efb2368f Mon Sep 17 00:00:00 2001
From: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Date: Tue, 8 Aug 2023 22:59:03 +0000
Subject: [PATCH] ASoC: soc-dai.h: remove unused call back functions
Git-commit: 446b31e894935ebbcf84302061a4e0e2efb2368f
Patch-mainline: v6.6-rc1
References: jsc#PED-9993 jsc#PED-10202

Now, all drivers are using ops call backs.
Let's remove unused other call back functions.

Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Link: https://lore.kernel.org/r/87cyzx9m4o.wl-kuninori.morimoto.gx@renesas.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 include/sound/soc-dai.h | 13 -------------
 sound/soc/soc-core.c    | 25 -------------------------
 2 files changed, 38 deletions(-)

diff --git a/include/sound/soc-dai.h b/include/sound/soc-dai.h
index 85f897fea21a..5fcfba47d98c 100644
--- a/include/sound/soc-dai.h
+++ b/include/sound/soc-dai.h
@@ -414,15 +414,6 @@ struct snd_soc_dai_driver {
 	struct snd_soc_dobj dobj;
 	struct of_phandle_args *dai_args;
 
-	/* DAI driver callbacks */
-	int (*probe)(struct snd_soc_dai *dai);
-	int (*remove)(struct snd_soc_dai *dai);
-	/* compress dai */
-	int (*compress_new)(struct snd_soc_pcm_runtime *rtd, int num);
-	/* Optional Callback used at pcm creation*/
-	int (*pcm_new)(struct snd_soc_pcm_runtime *rtd,
-		       struct snd_soc_dai *dai);
-
 	/* ops */
 	const struct snd_soc_dai_ops *ops;
 	const struct snd_soc_cdai_ops *cops;
@@ -433,10 +424,6 @@ struct snd_soc_dai_driver {
 	unsigned int symmetric_rate:1;
 	unsigned int symmetric_channels:1;
 	unsigned int symmetric_sample_bits:1;
-
-	/* probe ordering - for components with runtime dependencies */
-	int probe_order;
-	int remove_order;
 };
 
 /* for Playback/Capture */
diff --git a/sound/soc/soc-core.c b/sound/soc/soc-core.c
index 7dbf37e0ba2f..a5b96c17633a 100644
--- a/sound/soc/soc-core.c
+++ b/sound/soc/soc-core.c
@@ -2510,7 +2510,6 @@ struct snd_soc_dai *snd_soc_register_dai(struct snd_soc_component *component,
 {
 	struct device *dev = component->dev;
 	struct snd_soc_dai *dai;
-	struct snd_soc_dai_ops *ops; /* REMOVE ME */
 
 	lockdep_assert_held(&client_mutex);
 
@@ -2539,30 +2538,6 @@ struct snd_soc_dai *snd_soc_register_dai(struct snd_soc_component *component,
 	if (!dai->name)
 		return NULL;
 
-	/* REMOVE ME */
-	if (dai_drv->probe		||
-	    dai_drv->remove		||
-	    dai_drv->compress_new	||
-	    dai_drv->pcm_new		||
-	    dai_drv->probe_order	||
-	    dai_drv->remove_order) {
-
-		ops = devm_kzalloc(dev, sizeof(struct snd_soc_dai_ops), GFP_KERNEL);
-		if (!ops)
-			return NULL;
-		if (dai_drv->ops)
-			memcpy(ops, dai_drv->ops, sizeof(struct snd_soc_dai_ops));
-
-		ops->probe		= dai_drv->probe;
-		ops->remove		= dai_drv->remove;
-		ops->compress_new	= dai_drv->compress_new;
-		ops->pcm_new		= dai_drv->pcm_new;
-		ops->probe_order	= dai_drv->probe_order;
-		ops->remove_order	= dai_drv->remove_order;
-
-		dai_drv->ops = ops;
-	}
-
 	dai->component = component;
 	dai->dev = dev;
 	dai->driver = dai_drv;
-- 
2.43.0

