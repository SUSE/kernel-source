From 300432f58b99449076f8a662504bb74cb452efcf Mon Sep 17 00:00:00 2001
From: Mike Snitzer <snitzer@redhat.com>
Date: Thu, 17 Feb 2022 23:40:28 -0500
Subject: [PATCH] dm: reduce dm_io and dm_target_io struct sizes
Git-commit: 300432f58b99449076f8a662504bb74cb452efcf
Patch-mainline: v5.18-rc1
References: jsc#PED-2765

Remove one 4 byte hole in dm_io struct.
Remove two 4 byte holes in dm_target_io struct.

Reviewed-by: Mikulas Patocka <mpatocka@redhat.com>
Signed-off-by: Mike Snitzer <snitzer@redhat.com>
Signed-off-by: Coly Li <colyli@suse.de>

---
 drivers/md/dm-core.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/md/dm-core.h b/drivers/md/dm-core.h
index e2128d176831..a86b5dacef0e 100644
--- a/drivers/md/dm-core.h
+++ b/drivers/md/dm-core.h
@@ -211,9 +211,9 @@ struct dm_table {
 #define DM_TIO_MAGIC 7282014
 struct dm_target_io {
 	unsigned int magic;
+	unsigned int target_bio_nr;
 	struct dm_io *io;
 	struct dm_target *ti;
-	unsigned int target_bio_nr;
 	unsigned int *len_ptr;
 	bool inside_dm_io;
 	sector_t old_sector;
@@ -227,10 +227,10 @@ struct dm_target_io {
 #define DM_IO_MAGIC 5191977
 struct dm_io {
 	unsigned int magic;
-	struct mapped_device *md;
-	blk_status_t status;
 	atomic_t io_count;
+	struct mapped_device *md;
 	struct bio *orig_bio;
+	blk_status_t status;
 	unsigned long start_time;
 	spinlock_t endio_lock;
 	struct dm_stats_aux stats_aux;
-- 
2.35.3

