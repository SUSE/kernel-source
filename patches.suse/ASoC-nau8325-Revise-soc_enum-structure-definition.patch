From 91ebd32eee6cd7714b49ca4463a0f315bc26ce0e Mon Sep 17 00:00:00 2001
From: Seven Lee <wtli@nuvoton.com>
Date: Mon, 1 Apr 2024 18:47:53 +0800
Subject: [PATCH] ASoC: nau8325: Revise soc_enum structure definition.
Git-commit: 91ebd32eee6cd7714b49ca4463a0f315bc26ce0e
Patch-mainline: v6.10-rc1
References: jsc#PED-9993 jsc#PED-10202

This patch is modified nau8325_dac_oversampl_enum enumerated.
Use SOC_VALUE_ENUM instead to hide empty (presumably invalid) options.

Signed-off-by: Seven Lee <wtli@nuvoton.com>
Link: https://msgid.link/r/20240401104753.3432507-1-wtli@nuvoton.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 sound/soc/codecs/nau8325.c | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

diff --git a/sound/soc/codecs/nau8325.c b/sound/soc/codecs/nau8325.c
index a00a30364c89..d65f73144597 100644
--- a/sound/soc/codecs/nau8325.c
+++ b/sound/soc/codecs/nau8325.c
@@ -174,13 +174,20 @@ static bool nau8325_volatile_reg(struct device *dev, unsigned int reg)
 	}
 }
 
-static const char * const nau8325_dac_oversampl[] = {
-	"64", "256", "128", "", "32" };
+static const char * const nau8325_dac_oversampl_texts[] = {
+	"64", "256", "128", "32",
+};
+
+static const unsigned int nau8325_dac_oversampl_values[] = {
+	0, 1, 2, 4,
+};
 
 static const struct soc_enum nau8325_dac_oversampl_enum =
-	SOC_ENUM_SINGLE(NAU8325_R29_DAC_CTRL1, NAU8325_DAC_OVERSAMPLE_SFT,
-			ARRAY_SIZE(nau8325_dac_oversampl),
-			nau8325_dac_oversampl);
+	SOC_VALUE_ENUM_SINGLE(NAU8325_R29_DAC_CTRL1,
+			      NAU8325_DAC_OVERSAMPLE_SFT, 0x7,
+			      ARRAY_SIZE(nau8325_dac_oversampl_texts),
+			      nau8325_dac_oversampl_texts,
+			      nau8325_dac_oversampl_values);
 
 static const DECLARE_TLV_DB_MINMAX_MUTE(dac_vol_tlv, -8000, 600);
 
-- 
2.43.0

