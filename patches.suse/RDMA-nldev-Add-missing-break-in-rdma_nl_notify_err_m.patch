From: Nathan Chancellor <nathan@kernel.org>
Date: Mon, 16 Sep 2024 06:24:34 -0700
Subject: RDMA/nldev: Add missing break in rdma_nl_notify_err_msg()
Patch-mainline: v6.12-rc1
Git-commit: 7acad3c442df6d5158c5b732a7a0ccf3a01d9b30
References: jsc#PED-11324

Clang warns (or errors with CONFIG_WERROR=y):

  drivers/infiniband/core/nldev.c:2795:2: error: unannotated fall-through between switch labels [-Werror,-Wimplicit-fallthrough]
   2795 |         default:
        |         ^

Clang is a little more pedantic than GCC, which does not warn when
falling through to a case that is just break or return. Clang's version
is more in line with the kernel's own stance in deprecated.rst, which
states that all switch/case blocks must end in either break,
fallthrough, continue, goto, or return. Add the missing break to silence
the warning.

Fixes: 9cbed5aab5ae ("RDMA/nldev: Add support for RDMA monitoring")
Signed-off-by: Nathan Chancellor <nathan@kernel.org>
Link: https://patch.msgid.link/20240916-rdma-fix-clang-fallthrough-nl_notify_err_msg-v1-1-89de6a7423f1@kernel.org
Signed-off-by: Leon Romanovsky <leon@kernel.org>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/infiniband/core/nldev.c |    1 +
 1 file changed, 1 insertion(+)

--- a/drivers/infiniband/core/nldev.c
+++ b/drivers/infiniband/core/nldev.c
@@ -2792,6 +2792,7 @@ static void rdma_nl_notify_err_msg(struc
 		dev_warn_ratelimited(&device->dev,
 				     "Failed to send RDMA monitor netdev detach event: port %d\n",
 				     port_num);
+		break;
 	default:
 		break;
 	}
