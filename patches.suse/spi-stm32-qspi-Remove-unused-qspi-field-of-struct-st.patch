From 6a5976f23dc38749afcb62cc3acf5e3e2b53d5ba Mon Sep 17 00:00:00 2001
From: Patrice Chotard <patrice.chotard@foss.st.com>
Date: Tue, 15 Jun 2021 11:01:15 +0200
Subject: [PATCH] spi: stm32-qspi: Remove unused qspi field of struct stm32_qspi_flash
Git-commit: 6a5976f23dc38749afcb62cc3acf5e3e2b53d5ba
Patch-mainline: v5.14-rc1
References: git-fixes

Remove struct stm32_qspi_flash's field qspi which is not used.

Fixes: c530cd1d9d5e ("spi: spi-mem: add stm32 qspi controller")
Signed-off-by: Patrice Chotard <patrice.chotard@foss.st.com>
Link: https://lore.kernel.org/r/20210615090115.30702-1-patrice.chotard@foss.st.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/spi/spi-stm32-qspi.c |    2 --
 1 file changed, 2 deletions(-)

--- a/drivers/spi/spi-stm32-qspi.c
+++ b/drivers/spi/spi-stm32-qspi.c
@@ -89,7 +89,6 @@
 #define STM32_COMP_TIMEOUT_MS 1000
 
 struct stm32_qspi_flash {
-	struct stm32_qspi *qspi;
 	u32 cs;
 	u32 presc;
 };
@@ -457,7 +456,6 @@ static int stm32_qspi_setup(struct spi_d
 	presc = DIV_ROUND_UP(qspi->clk_rate, spi->max_speed_hz) - 1;
 
 	flash = &qspi->flash[spi->chip_select];
-	flash->qspi = qspi;
 	flash->cs = spi->chip_select;
 	flash->presc = presc;
 
