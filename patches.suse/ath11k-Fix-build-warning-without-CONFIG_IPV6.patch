From 67888630addeaa2ae1c04d8d020daccbd26d05d9 Mon Sep 17 00:00:00 2001
From: YueHaibing <yuehaibing@huawei.com>
Date: Mon, 11 Apr 2022 10:08:43 +0800
Subject: [PATCH] ath11k: Fix build warning without CONFIG_IPV6
Mime-version: 1.0
Content-type: text/plain; charset=UTF-8
Content-transfer-encoding: 8bit
Git-commit: 67888630addeaa2ae1c04d8d020daccbd26d05d9
Patch-mainline: v5.19-rc1
References: bsc#1206451

drivers/net/wireless/ath/ath11k/mac.c:8175:13: error: ‘ath11k_mac_op_ipv6_changed’ defined but not used [-Werror=unused-function]
 static void ath11k_mac_op_ipv6_changed(struct ieee80211_hw *hw,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~

Wrap it with #ifdef block to fix this.

Fixes: c3c36bfe998b ("ath11k: support ARP and NS offload")
Signed-off-by: YueHaibing <yuehaibing@huawei.com>
Signed-off-by: Kalle Valo <quic_kvalo@quicinc.com>
Link: https://lore.kernel.org/r/20220411020843.10284-1-yuehaibing@huawei.com
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/net/wireless/ath/ath11k/mac.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/wireless/ath/ath11k/mac.c b/drivers/net/wireless/ath/ath11k/mac.c
index 12fd30742664..c987f365c63a 100644
--- a/drivers/net/wireless/ath/ath11k/mac.c
+++ b/drivers/net/wireless/ath/ath11k/mac.c
@@ -8145,6 +8145,7 @@ static void ath11k_mac_op_sta_statistics(struct ieee80211_hw *hw,
 	}
 }
 
+#if IS_ENABLED(CONFIG_IPV6)
 static void ath11k_generate_ns_mc_addr(struct ath11k *ar,
 				       struct ath11k_arp_ns_offload *offload)
 {
@@ -8239,6 +8240,7 @@ static void ath11k_mac_op_ipv6_changed(struct ieee80211_hw *hw,
 	/* generate ns multicast address */
 	ath11k_generate_ns_mc_addr(ar, offload);
 }
+#endif
 
 static void ath11k_mac_op_set_rekey_data(struct ieee80211_hw *hw,
 					 struct ieee80211_vif *vif,
-- 
2.35.3

