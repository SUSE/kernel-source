From: Minjie Du <duminjie@vivo.com>
Date: Wed, 12 Jul 2023 19:18:37 +0800
Subject: nvme: fix parameter check in nvme_fault_inject_init()
Patch-mainline: v6.5-rc2
Git-commit: 733ba346d941d37e0814bac37b6a5c188ac3c9b2
References: jsc#PED-6252 jsc#PED-5728 jsc#PED-5062 jsc#PED-3535

Make IS_ERR() judge the debugfs_create_dir() function return.

Signed-off-by: Minjie Du <duminjie@vivo.com>
Reviewed-by: Christoph Hellwig <hch@lst.de>
Signed-off-by: Keith Busch <kbusch@kernel.org>
Acked-by: Daniel Wagner <dwagner@suse.de>
---
 drivers/nvme/host/fault_inject.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/nvme/host/fault_inject.c
+++ b/drivers/nvme/host/fault_inject.c
@@ -27,7 +27,7 @@ void nvme_fault_inject_init(struct nvme_
 
 	/* create debugfs directory and attribute */
 	parent = debugfs_create_dir(dev_name, NULL);
-	if (!parent) {
+	if (IS_ERR(parent)) {
 		pr_warn("%s: failed to create debugfs directory\n", dev_name);
 		return;
 	}
