From 96255b007099f9088b61aafd28ba9ff0d834f727 Mon Sep 17 00:00:00 2001
From: Patrik Jakobsson <pjakobsson@suse.de>
Date: Thu, 27 Jan 2022 16:25:55 +0100
Subject: [PATCH] drm: Add kabi placeholders to commonly used structs
Patch-mainline: Never, kABI padding
References: bsc#1179531

Signed-off-by: Patrik Jakobsson <pjakobsson@suse.de>
---
 include/drm/display/drm_dp_helper.h     |    2 ++
 include/drm/display/drm_dp_mst_helper.h |    2 ++
 include/drm/drm_atomic.h                |    2 ++
 include/drm/drm_connector.h             |    4 ++++
 include/drm/drm_crtc.h                  |    4 ++++
 include/drm/drm_device.h                |    2 ++
 include/drm/drm_gem.h                   |    2 ++
 include/drm/drm_mode_object.h           |    2 ++
 include/drm/drm_modes.h                 |    1 +
 include/drm/drm_plane.h                 |    4 ++++
 include/drm/ttm/ttm_device.h            |    2 ++
 11 files changed, 27 insertions(+)

--- a/include/drm/display/drm_dp_helper.h
+++ b/include/drm/display/drm_dp_helper.h
@@ -518,6 +518,8 @@ struct drm_dp_aux {
 	 * @powered_down: If true then the remote endpoint is powered down.
 	 */
 	bool powered_down;
+
+	void *suse_kabi_padding;
 };
 
 int drm_dp_dpcd_probe(struct drm_dp_aux *aux, unsigned int offset);
--- a/include/drm/display/drm_dp_mst_helper.h
+++ b/include/drm/display/drm_dp_mst_helper.h
@@ -815,6 +815,8 @@ struct drm_dp_mst_topology_mgr {
 	 */
 	struct mutex topology_ref_history_lock;
 #endif
+
+	void *suse_kabi_padding;
 };
 
 int drm_dp_mst_topology_mgr_init(struct drm_dp_mst_topology_mgr *mgr,
--- a/include/drm/drm_atomic.h
+++ b/include/drm/drm_atomic.h
@@ -474,6 +474,8 @@ struct drm_atomic_state {
 	 * commit without blocking.
 	 */
 	struct work_struct commit_work;
+
+	void *suse_kabi_padding;
 };
 
 void __drm_crtc_commit_free(struct kref *kref);
--- a/include/drm/drm_connector.h
+++ b/include/drm/drm_connector.h
@@ -1139,6 +1139,8 @@ struct drm_connector_state {
 	 * @drm_atomic_helper_connector_hdmi_check().
 	 */
 	struct drm_connector_hdmi_state hdmi;
+
+	void *suse_kabi_padding;
 };
 
 /**
@@ -2118,6 +2120,8 @@ struct drm_connector {
 	 * @hdmi: HDMI-related variable and properties.
 	 */
 	struct drm_connector_hdmi hdmi;
+
+	void *suse_kabi_padding;
 };
 
 #define obj_to_connector(x) container_of(x, struct drm_connector, base)
--- a/include/drm/drm_crtc.h
+++ b/include/drm/drm_crtc.h
@@ -385,6 +385,8 @@ struct drm_crtc_state {
 
 	/** @state: backpointer to global drm_atomic_state */
 	struct drm_atomic_state *state;
+
+	void *suse_kabi_padding;
 };
 
 /**
@@ -1175,6 +1177,8 @@ struct drm_crtc {
 	 * Initialized via drm_self_refresh_helper_init().
 	 */
 	struct drm_self_refresh_data *self_refresh_data;
+
+	void *suse_kabi_padding;
 };
 
 /**
--- a/include/drm/drm_device.h
+++ b/include/drm/drm_device.h
@@ -317,6 +317,8 @@ struct drm_device {
 	 * Root directory for debugfs files.
 	 */
 	struct dentry *debugfs_root;
+
+	void *suse_kabi_padding;
 };
 
 #endif
--- a/include/drm/drm_gem.h
+++ b/include/drm/drm_gem.h
@@ -430,6 +430,8 @@ struct drm_gem_object {
 	 * The current LRU list that the GEM object is on.
 	 */
 	struct drm_gem_lru *lru;
+
+	void *suse_kabi_padding;
 };
 
 /**
--- a/include/drm/drm_mode_object.h
+++ b/include/drm/drm_mode_object.h
@@ -58,6 +58,8 @@ struct drm_mode_object {
 	struct drm_object_properties *properties;
 	struct kref refcount;
 	void (*free_cb)(struct kref *kref);
+
+	void *suse_kabi_padding;
 };
 
 #define DRM_OBJECT_MAX_PROPERTY 64
--- a/include/drm/drm_modes.h
+++ b/include/drm/drm_modes.h
@@ -417,6 +417,7 @@ struct drm_display_mode {
 	 */
 	enum hdmi_picture_aspect picture_aspect_ratio;
 
+	void *suse_kabi_padding;
 };
 
 /**
--- a/include/drm/drm_plane.h
+++ b/include/drm/drm_plane.h
@@ -260,6 +260,8 @@ struct drm_plane_state {
 	 * flow.
 	 */
 	bool color_mgmt_changed : 1;
+
+	void *suse_kabi_padding;
 };
 
 static inline struct drm_rect
@@ -786,6 +788,8 @@ struct drm_plane {
 	 * @kmsg_panic: Used to register a panic notifier for this plane
 	 */
 	struct kmsg_dumper kmsg_panic;
+
+	void *suse_kabi_padding;
 };
 
 #define obj_to_plane(x) container_of(x, struct drm_plane, base)
--- a/include/drm/ttm/ttm_device.h
+++ b/include/drm/ttm/ttm_device.h
@@ -266,6 +266,8 @@ struct ttm_device {
 	 * @wq: Work queue structure for the delayed delete workqueue.
 	 */
 	struct workqueue_struct *wq;
+
+	void *suse_kabi_padding;
 };
 
 int ttm_global_swapout(struct ttm_operation_ctx *ctx, gfp_t gfp_flags);
