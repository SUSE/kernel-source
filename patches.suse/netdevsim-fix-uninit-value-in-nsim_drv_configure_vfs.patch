From: Jakub Kicinski <kuba@kernel.org>
Date: Mon, 1 Nov 2021 15:18:45 -0700
Subject: netdevsim: fix uninit value in nsim_drv_configure_vfs()
Patch-mainline: v5.16-rc1
Git-commit: 047304d0bfa5be2ace106974f87eec51e0832cd0
References: jsc#PED-1549

Build bot points out that I missed initializing ret
after refactoring.

Reported-by: kernel test robot <lkp@intel.com>
Fixes: 1c401078bcf3 ("netdevsim: move details of vf config to dev")
Link: https://lore.kernel.org/r/20211101221845.3188490-1-kuba@kernel.org
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/net/netdevsim/dev.c |    6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

--- a/drivers/net/netdevsim/dev.c
+++ b/drivers/net/netdevsim/dev.c
@@ -1723,13 +1723,11 @@ int nsim_drv_configure_vfs(struct nsim_b
 			   unsigned int num_vfs)
 {
 	struct nsim_dev *nsim_dev = dev_get_drvdata(&nsim_bus_dev->dev);
-	int ret;
+	int ret = 0;
 
 	mutex_lock(&nsim_dev->vfs_lock);
-	if (nsim_bus_dev->num_vfs == num_vfs) {
-		ret = 0;
+	if (nsim_bus_dev->num_vfs == num_vfs)
 		goto exit_unlock;
-	}
 	if (nsim_bus_dev->num_vfs && num_vfs) {
 		ret = -EBUSY;
 		goto exit_unlock;
