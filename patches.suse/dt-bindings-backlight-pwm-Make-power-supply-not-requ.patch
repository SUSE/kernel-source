From a8b09e6fe3eee4525ef6b6d5bd0e69c785e2f757 Mon Sep 17 00:00:00 2001
From: Geert Uytterhoeven <geert+renesas@glider.be>
Date: Tue, 23 May 2023 17:38:37 +0200
Subject: [PATCH] dt-bindings: backlight: pwm: Make power-supply not required
Git-commit: a8b09e6fe3eee4525ef6b6d5bd0e69c785e2f757
Patch-mainline: v6.5-rc1
References: git-fixes

make dtbs_check:

    arch/arm/boot/dts/renesas/r8a7742-iwg21d-q7.dtb: backlight: 'power-supply' is a required property
	    From schema: Documentation/devicetree/bindings/leds/backlight/pwm-backlight.yaml

As that backlight device node already has an "enable-gpios" property to
control the power supplied to the backlight, it sounds a bit silly to
have to add a "power-supply" property just to silence this warning.  In
addition, as of commit deaeeda2051fa280 ("backlight: pwm_bl: Don't rely
on a disabled PWM emiting inactive state"), the Linux driver considers
the power supply optional.

Fix this by synchronizing the bindings with actual driver behavior by
making the "power-supply" optional.

Fixes: deaeeda2051fa280 ("backlight: pwm_bl: Don't rely on a disabled PWM emiting inactive state")
Signed-off-by: Geert Uytterhoeven <geert+renesas@glider.be>
Acked-by: Conor Dooley <conor.dooley@microchip.com>
Link: https://lore.kernel.org/r/29943059c80c8db0db437f9548f084a67326647b.1684856131.git.geert+renesas@glider.be
Signed-off-by: Lee Jones <lee@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 .../devicetree/bindings/leds/backlight/pwm-backlight.yaml        | 1 -
 1 file changed, 1 deletion(-)

diff --git a/Documentation/devicetree/bindings/leds/backlight/pwm-backlight.yaml b/Documentation/devicetree/bindings/leds/backlight/pwm-backlight.yaml
index 5ec47a8c6568..535690288990 100644
--- a/Documentation/devicetree/bindings/leds/backlight/pwm-backlight.yaml
+++ b/Documentation/devicetree/bindings/leds/backlight/pwm-backlight.yaml
@@ -68,7 +68,6 @@ dependencies:
 required:
   - compatible
   - pwms
-  - power-supply
 
 additionalProperties: false
 
-- 
2.35.3

