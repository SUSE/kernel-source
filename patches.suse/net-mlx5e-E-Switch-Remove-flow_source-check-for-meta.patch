From: Roi Dayan <roid@nvidia.com>
Date: Tue, 31 Jan 2023 12:06:45 +0200
Subject: net/mlx5e: E-Switch, Remove flow_source check for metadata matching
Patch-mainline: v6.5-rc1
Git-commit: edab80b89337b826566ff7fdbbc8ae2dcfb22fee
References: jsc#PED-3311

There is no reason to check for flow_source cap to allow metadata
matching. When flow_source match is being used the flow_source cap
is being checked.

Signed-off-by: Roi Dayan <roid@nvidia.com>
Reviewed-by: Maor Dickman <maord@nvidia.com>
Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c |    3 ---
 1 file changed, 3 deletions(-)

--- a/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
@@ -2834,9 +2834,6 @@ bool mlx5_esw_vport_match_metadata_suppo
 	      MLX5_FDB_TO_VPORT_REG_C_0))
 		return false;
 
-	if (!MLX5_CAP_ESW_FLOWTABLE(esw->dev, flow_source))
-		return false;
-
 	return true;
 }
 
