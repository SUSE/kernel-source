From: Yeqi Fu <asuk4.q@gmail.com>
Date: Thu, 18 May 2023 01:31:11 +0800
Subject: EDAC/thunderx: Check debugfs file creation retval properly
Patch-mainline: v6.5-rc1
Git-commit: bf5c04ddd378dbd62d41d9c5bd18cca03bee2946
References: jsc#PED-6747

edac_debugfs_create_file() returns ERR_PTR by way of the respective
debugfs function it calls, if an error occurs.

The appropriate way to verify for errors is to use IS_ERR(). Do so.

  [ bp: Rewrite all text. ]

Signed-off-by: Yeqi Fu <asuk4.q@gmail.com>
Signed-off-by: Borislav Petkov (AMD) <bp@alien8.de>
Link: https://lore.kernel.org/r/20230517173111.365787-1-asuk4.q@gmail.com
Acked-by: Lee, Chun-Yi <jlee@suse.com>
---
 drivers/edac/thunderx_edac.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/edac/thunderx_edac.c
+++ b/drivers/edac/thunderx_edac.c
@@ -481,7 +481,7 @@ static int thunderx_create_debugfs_nodes
 		ent = edac_debugfs_create_file(attrs[i]->name, attrs[i]->mode,
 					       parent, data, &attrs[i]->fops);
 
-		if (!ent)
+		if (IS_ERR(ent))
 			break;
 	}
 
