From: Vasant Karasulli <vkarasulli@suse.de>
Date: Mon, 25 Aug 2025 12:18:41 +0200
Subject: [PATCH] x86/boot/compressed: remove compiler warning
Patch-mainline: Never, precautionary patch to avoid redefinition of a macro
References: bsc#1199657 CVE-2022-29900 CVE-2022-29901

compiler warns about redefinition of symbol __DISABLE_EXPORTS.
Define this symbol only if it's undefined.

Signed-off-by: Vasant Karasulli <vkarasulli@suse.de>
---
 arch/x86/boot/compressed/kaslr.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/arch/x86/boot/compressed/kaslr.c b/arch/x86/boot/compressed/kaslr.c
index 32f99af04..34720f5b6 100644
--- a/arch/x86/boot/compressed/kaslr.c
+++ b/arch/x86/boot/compressed/kaslr.c
@@ -24,7 +24,9 @@
  * While both lib/ctype.c and lib/cmdline.c will bring EXPORT_SYMBOL
  * which is meaningless and will cause compiling error in some cases.
  */
+#ifndef __DISABLE_EXPORTS
 #define __DISABLE_EXPORTS
+#endif
 
 #include "misc.h"
 #include "error.h"
-- 
2.34.1

