From: Vasant Hegde <vasant.hegde@amd.com>
Date: Mon, 16 Oct 2023 05:13:05 +0000
Subject: iommu/amd: Remove DMA_FQ type from domain allocation path
Git-commit: cedc811c76778bdef91d405717acee0de54d8db5
Patch-mainline: v6.7-rc1
References: jsc#PED-7779 jsc#PED-7780

.. as drivers won't see DMA_FQ any more.

See commit a4fdd9762272 ("iommu: Use flush queue capability") for
details.

Suggested-by: Robin Murphy <robin.murphy@arm.com>
Signed-off-by: Vasant Hegde <vasant.hegde@amd.com>
Link: https://lore.kernel.org/r/20231016051305.13091-1-vasant.hegde@amd.com
Signed-off-by: Joerg Roedel <jroedel@suse.de>
---
 drivers/iommu/amd/iommu.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/drivers/iommu/amd/iommu.c b/drivers/iommu/amd/iommu.c
index d996a6f22a5f..a284768cb542 100644
--- a/drivers/iommu/amd/iommu.c
+++ b/drivers/iommu/amd/iommu.c
@@ -2148,7 +2148,6 @@ static struct protection_domain *protection_domain_alloc(unsigned int type)
 	case IOMMU_DOMAIN_IDENTITY:
 		return domain;
 	case IOMMU_DOMAIN_DMA:
-	case IOMMU_DOMAIN_DMA_FQ:
 		pgtable = amd_iommu_pgtable;
 		break;
 	/*

