From 46765aaec4d78b9fef59e647ab228283991de075 Mon Sep 17 00:00:00 2001
From: Alex Shi <alexs@kernel.org>
Date: Fri, 16 Aug 2024 17:33:12 +0800
Subject: [PATCH] KVM: PPC: Book3S HV: remove unused varible

References: bsc#1194869
Patch-mainline: v6.12-rc1
Git-commit: 46765aaec4d78b9fef59e647ab228283991de075

During build testing, we found a error:
  arch/powerpc/kvm/book3s_hv.c:4052:17: error: variable 'loops' set but not used
                unsigned long loops = 0;
1 error generated.

Fix it by removing the unused variable.

Fixes: b4deba5c41e9 ("KVM: PPC: Book3S HV: Implement dynamic micro-threading on POWER8")
Signed-off-by: Alex Shi <alexs@kernel.org>
Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
Link: https://msgid.link/20240816093313.327268-1-alexs@kernel.org
Acked-by: Michal Suchanek <msuchanek@suse.de>
---
 arch/powerpc/kvm/book3s_hv.c | 2 --
 1 file changed, 2 deletions(-)

diff --git a/arch/powerpc/kvm/book3s_hv.c b/arch/powerpc/kvm/book3s_hv.c
index 0c06d2a59861..ba0492f9de65 100644
--- a/arch/powerpc/kvm/book3s_hv.c
+++ b/arch/powerpc/kvm/book3s_hv.c
@@ -4057,7 +4057,6 @@ static noinline void kvmppc_run_core(struct kvmppc_vcore *vc)
 	/* Return to whole-core mode if we split the core earlier */
 	if (cmd_bit) {
 		unsigned long hid0 = mfspr(SPRN_HID0);
-		unsigned long loops = 0;
 
 		hid0 &= ~HID0_POWER8_DYNLPARDIS;
 		stat_bit = HID0_POWER8_2LPARMODE | HID0_POWER8_4LPARMODE;
@@ -4069,7 +4068,6 @@ static noinline void kvmppc_run_core(struct kvmppc_vcore *vc)
 			if (!(hid0 & stat_bit))
 				break;
 			cpu_relax();
-			++loops;
 		}
 		split_info.do_nap = 0;
 	}
-- 
2.47.0

