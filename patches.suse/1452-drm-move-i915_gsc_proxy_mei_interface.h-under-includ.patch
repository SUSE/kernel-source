From 06773dabd6527bbc5d64a34799f59e051a3945d8 Mon Sep 17 00:00:00 2001
From: Jani Nikula <jani.nikula@intel.com>
Date: Thu, 30 May 2024 16:19:03 +0300
Subject: drm: move i915_gsc_proxy_mei_interface.h under include/drm/intel
Git-commit: 0706d57100fd0b2b34d50855726f648b8bfa7d2b
Patch-mainline: v6.11-rc1
References: jsc#PED-9898 jsc#PED-10191 jsc#PED-10197 jsc#PED-10226 jsc#PED-10237 jsc#PED-10340 jsc#PED-10852 jsc#PED-11022

Clean up the top level include/drm directory by grouping all the Intel
specific files under a common subdirectory.

Cc: Daniel Vetter <daniel@ffwll.ch>
Cc: Dave Airlie <airlied@gmail.com>
Cc: Lucas De Marchi <lucas.demarchi@intel.com>
Cc: Tomas Winkler <tomas.winkler@intel.com>
Reviewed-by: Andi Shyti <andi.shyti@linux.intel.com>
Acked-by: Lucas De Marchi <lucas.demarchi@intel.com>
Acked-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
Signed-off-by: Jani Nikula <jani.nikula@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/461662d528c3f327c81b764b7c883cd4519d8729.1717075103.git.jani.nikula@intel.com
Acked-by: Patrik Jakobsson <pjakobsson@suse.de>
---
 drivers/gpu/drm/i915/gt/uc/intel_gsc_proxy.c  |  2 +-
 drivers/gpu/drm/xe/xe_gsc_proxy.c             |  2 +-
 drivers/misc/mei/gsc_proxy/mei_gsc_proxy.c    |  2 +-
 include/drm/i915_gsc_proxy_mei_interface.h    | 53 -------------------
 .../drm/intel/i915_gsc_proxy_mei_interface.h  | 53 +++++++++++++++++++
 5 files changed, 56 insertions(+), 56 deletions(-)
 delete mode 100644 include/drm/i915_gsc_proxy_mei_interface.h
 create mode 100644 include/drm/intel/i915_gsc_proxy_mei_interface.h

diff --git a/drivers/gpu/drm/i915/gt/uc/intel_gsc_proxy.c b/drivers/gpu/drm/i915/gt/uc/intel_gsc_proxy.c
index a7d5465655f9..e7619d81353c 100644
--- a/drivers/gpu/drm/i915/gt/uc/intel_gsc_proxy.c
+++ b/drivers/gpu/drm/i915/gt/uc/intel_gsc_proxy.c
@@ -6,7 +6,7 @@
 #include <linux/component.h>
 
 #include <drm/i915_component.h>
-#include <drm/i915_gsc_proxy_mei_interface.h>
+#include <drm/intel/i915_gsc_proxy_mei_interface.h>
 
 #include "gt/intel_gt.h"
 #include "gt/intel_gt_print.h"
diff --git a/drivers/gpu/drm/xe/xe_gsc_proxy.c b/drivers/gpu/drm/xe/xe_gsc_proxy.c
index 6d6d1068cf23..cc3426fcfa89 100644
--- a/drivers/gpu/drm/xe/xe_gsc_proxy.c
+++ b/drivers/gpu/drm/xe/xe_gsc_proxy.c
@@ -10,7 +10,7 @@
 
 #include <drm/drm_managed.h>
 #include <drm/i915_component.h>
-#include <drm/i915_gsc_proxy_mei_interface.h>
+#include <drm/intel/i915_gsc_proxy_mei_interface.h>
 
 #include "abi/gsc_proxy_commands_abi.h"
 #include "regs/xe_gsc_regs.h"
diff --git a/drivers/misc/mei/gsc_proxy/mei_gsc_proxy.c b/drivers/misc/mei/gsc_proxy/mei_gsc_proxy.c
index 89364bdbb129..d5fbaf5d0c8e 100644
--- a/drivers/misc/mei/gsc_proxy/mei_gsc_proxy.c
+++ b/drivers/misc/mei/gsc_proxy/mei_gsc_proxy.c
@@ -18,7 +18,7 @@
 #include <linux/uuid.h>
 #include <drm/drm_connector.h>
 #include <drm/i915_component.h>
-#include <drm/i915_gsc_proxy_mei_interface.h>
+#include <drm/intel/i915_gsc_proxy_mei_interface.h>
 
 /**
  * mei_gsc_proxy_send - Sends a proxy message to ME FW.
diff --git a/include/drm/i915_gsc_proxy_mei_interface.h b/include/drm/i915_gsc_proxy_mei_interface.h
deleted file mode 100644
index 850dfbf40607..000000000000
--- a/include/drm/i915_gsc_proxy_mei_interface.h
+++ /dev/null
@@ -1,53 +0,0 @@
-/* SPDX-License-Identifier: MIT */
-/*
- * Copyright (c) 2022-2023 Intel Corporation
- */
-
-#ifndef _I915_GSC_PROXY_MEI_INTERFACE_H_
-#define _I915_GSC_PROXY_MEI_INTERFACE_H_
-
-#include <linux/types.h>
-
-struct device;
-struct module;
-
-/**
- * struct i915_gsc_proxy_component_ops - ops for GSC Proxy services.
- * @owner: Module providing the ops
- * @send: sends a proxy message from GSC FW to ME FW
- * @recv: receives a proxy message for GSC FW from ME FW
- */
-struct i915_gsc_proxy_component_ops {
-	struct module *owner;
-
-	/**
-	 * @send: Sends a proxy message to ME FW.
-	 * @dev: device struct corresponding to the mei device
-	 * @buf: message buffer to send
-	 * @size: size of the message
-	 * Return: bytes sent on success, negative errno value on failure
-	 */
-	int (*send)(struct device *dev, const void *buf, size_t size);
-
-	/**
-	 * @recv: Receives a proxy message from ME FW.
-	 * @dev: device struct corresponding to the mei device
-	 * @buf: message buffer to contain the received message
-	 * @size: size of the buffer
-	 * Return: bytes received on success, negative errno value on failure
-	 */
-	int (*recv)(struct device *dev, void *buf, size_t size);
-};
-
-/**
- * struct i915_gsc_proxy_component - Used for communication between i915 and
- * MEI drivers for GSC proxy services
- * @mei_dev: device that provide the GSC proxy service.
- * @ops: Ops implemented by GSC proxy driver, used by i915 driver.
- */
-struct i915_gsc_proxy_component {
-	struct device *mei_dev;
-	const struct i915_gsc_proxy_component_ops *ops;
-};
-
-#endif /* _I915_GSC_PROXY_MEI_INTERFACE_H_ */
diff --git a/include/drm/intel/i915_gsc_proxy_mei_interface.h b/include/drm/intel/i915_gsc_proxy_mei_interface.h
new file mode 100644
index 000000000000..850dfbf40607
--- /dev/null
+++ b/include/drm/intel/i915_gsc_proxy_mei_interface.h
@@ -0,0 +1,53 @@
+/* SPDX-License-Identifier: MIT */
+/*
+ * Copyright (c) 2022-2023 Intel Corporation
+ */
+
+#ifndef _I915_GSC_PROXY_MEI_INTERFACE_H_
+#define _I915_GSC_PROXY_MEI_INTERFACE_H_
+
+#include <linux/types.h>
+
+struct device;
+struct module;
+
+/**
+ * struct i915_gsc_proxy_component_ops - ops for GSC Proxy services.
+ * @owner: Module providing the ops
+ * @send: sends a proxy message from GSC FW to ME FW
+ * @recv: receives a proxy message for GSC FW from ME FW
+ */
+struct i915_gsc_proxy_component_ops {
+	struct module *owner;
+
+	/**
+	 * @send: Sends a proxy message to ME FW.
+	 * @dev: device struct corresponding to the mei device
+	 * @buf: message buffer to send
+	 * @size: size of the message
+	 * Return: bytes sent on success, negative errno value on failure
+	 */
+	int (*send)(struct device *dev, const void *buf, size_t size);
+
+	/**
+	 * @recv: Receives a proxy message from ME FW.
+	 * @dev: device struct corresponding to the mei device
+	 * @buf: message buffer to contain the received message
+	 * @size: size of the buffer
+	 * Return: bytes received on success, negative errno value on failure
+	 */
+	int (*recv)(struct device *dev, void *buf, size_t size);
+};
+
+/**
+ * struct i915_gsc_proxy_component - Used for communication between i915 and
+ * MEI drivers for GSC proxy services
+ * @mei_dev: device that provide the GSC proxy service.
+ * @ops: Ops implemented by GSC proxy driver, used by i915 driver.
+ */
+struct i915_gsc_proxy_component {
+	struct device *mei_dev;
+	const struct i915_gsc_proxy_component_ops *ops;
+};
+
+#endif /* _I915_GSC_PROXY_MEI_INTERFACE_H_ */
-- 
2.46.1

