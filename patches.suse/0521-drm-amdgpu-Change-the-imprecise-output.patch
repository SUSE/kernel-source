From 4873eb681bbe68f7e01a7436711b7629c6c453e4 Mon Sep 17 00:00:00 2001
From: Roy Sun <Roy.Sun@amd.com>
Date: Thu, 22 Jul 2021 13:55:42 +0800
Subject: drm/amdgpu: Change the imprecise output
Git-commit: fe6b1032b23eac106292f57330dd4dc64124ef81
Patch-mainline: v5.15-rc1
References: jsc#PED-1166 jsc#PED-1168 jsc#PED-1170 jsc#PED-1218 jsc#PED-1220 jsc#PED-1222 jsc#PED-1223 jsc#PED-1225

The fail reason is that the vfgate is disabled

Signed-off-by: Roy Sun <Roy.Sun@amd.com>
Reviewed-by: Peng Ju Zhou <PengJu.Zhou@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Acked-by: Patrik Jakobsson <pjakobsson@suse.de>
---
 drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c b/drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c
index 9f3d82dfb79c..f94ef15b3166 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c
@@ -56,7 +56,7 @@
 #define GFX10_NUM_GFX_RINGS_Sienna_Cichlid	1
 #define GFX10_MEC_HPD_SIZE	2048
 
-#define RLCG_INTERFACE_NOT_ENABLED	0x4000000
+#define RLCG_VFGATE_DISABLED	0x4000000
 #define RLCG_WRONG_OPERATION_TYPE	0x2000000
 #define RLCG_NOT_IN_RANGE	0x1000000
 
@@ -1571,8 +1571,8 @@ static u32 gfx_v10_rlcg_rw(struct amdgpu_device *adev, u32 offset, u32 v, uint32
 
 		if (i >= retries) {
 			if (RLCG_ERROR_REPORT_ENABLED(adev)) {
-				if (tmp & RLCG_INTERFACE_NOT_ENABLED)
-					pr_err("The interface is not enabled, program reg:0x%05x failed!\n", offset);
+				if (tmp & RLCG_VFGATE_DISABLED)
+					pr_err("The vfgate is disabled, program reg:0x%05x failed!\n", offset);
 				else if (tmp & RLCG_WRONG_OPERATION_TYPE)
 					pr_err("Wrong operation type, program reg:0x%05x failed!\n", offset);
 				else if (tmp & RLCG_NOT_IN_RANGE)
-- 
2.38.1

