From: Hou Pu <houpu.main@gmail.com>
Date: Fri, 9 Jul 2021 10:32:47 +0800
Subject: nvme-fabrics: remove superfluous nvmf_host_put in nvmf_parse_options
Patch-mainline: v5.15-rc1
Git-commit: e23439e977ed2b247912c2b5c6945ef1bc380100
References: bsc#1190569

Opts->host is NULL there. It is checked just before. So remove
nvmf_host_put. It is introduced by commit 59a2f3f00fd7 ("nvme: fix
potential memory leak in option parsing").

Signed-off-by: Hou Pu <houpu.main@gmail.com>
Signed-off-by: Christoph Hellwig <hch@lst.de>
Acked-by: Daniel Wagner <dwagner@suse.de>
---
 drivers/nvme/host/fabrics.c |    1 -
 1 file changed, 1 deletion(-)

--- a/drivers/nvme/host/fabrics.c
+++ b/drivers/nvme/host/fabrics.c
@@ -719,7 +719,6 @@ static int nvmf_parse_options(struct nvm
 				ret = -EINVAL;
 				goto out;
 			}
-			nvmf_host_put(opts->host);
 			opts->host = nvmf_host_add(p);
 			kfree(p);
 			if (!opts->host) {
