From: Thomas Bogendoerfer <tbogendoerfer@suse.de>
Subject: staging: rtl8188eu fix fallout of constifying dev_addr
Patch-mainline: never, fix for old driver
References: jsc#PED-1565

There is a big update for the rtl8188eu driver, which will not
be backported to SLE15-SP5. Therefore this patch fixes the
fallout of the constifying of dev_addr.

Signed-off-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>

---
 drivers/staging/rtl8188eu/os_dep/mon.c      |    7 +++++--
 drivers/staging/rtl8188eu/os_dep/usb_intf.c |    2 +-
 2 files changed, 6 insertions(+), 3 deletions(-)

--- a/drivers/staging/rtl8188eu/os_dep/mon.c
+++ b/drivers/staging/rtl8188eu/os_dep/mon.c
@@ -143,6 +143,8 @@ static const struct net_device_ops mon_n
 
 static void mon_setup(struct net_device *dev)
 {
+	u8 addr[ETH_ALEN];
+
 	dev->netdev_ops = &mon_netdev_ops;
 	dev->needs_free_netdev = true;
 	ether_setup(dev);
@@ -152,8 +154,9 @@ static void mon_setup(struct net_device
 	 * Use a locally administered address (IEEE 802)
 	 * XXX: Copied from mac80211_hwsim driver. Revisit.
 	 */
-	eth_zero_addr(dev->dev_addr);
-	dev->dev_addr[0] = 0x12;
+	eth_zero_addr(addr);
+	addr[0] = 0x12;
+	eth_hw_addr_set(dev, addr);
 }
 
 struct net_device *rtl88eu_mon_init(void)
--- a/drivers/staging/rtl8188eu/os_dep/usb_intf.c
+++ b/drivers/staging/rtl8188eu/os_dep/usb_intf.c
@@ -373,7 +373,7 @@ static int rtw_usb_if1_init(struct usb_i
 	netif_carrier_off(pnetdev);
 
 	rtw_macaddr_cfg(padapter->eeprompriv.mac_addr);
-	memcpy(pnetdev->dev_addr, padapter->eeprompriv.mac_addr, ETH_ALEN);
+	eth_hw_addr_set(pnetdev, padapter->eeprompriv.mac_addr);
 	pr_debug("MAC Address from pnetdev->dev_addr =  %pM\n",
 		 pnetdev->dev_addr);
 
