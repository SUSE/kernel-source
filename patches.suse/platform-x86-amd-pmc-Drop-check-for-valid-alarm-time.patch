From 9587f39277ef799ab3be7bb04b191bdf1a3e697a Mon Sep 17 00:00:00 2001
From: Mario Limonciello <mario.limonciello@amd.com>
Date: Tue, 26 Oct 2021 12:14:43 -0500
Subject: [PATCH] platform/x86: amd-pmc: Drop check for valid alarm time
Git-commit: 9587f39277ef799ab3be7bb04b191bdf1a3e697a
Patch-mainline: v5.16-rc1
References: bsc#1210644

This is already checked when calling rtc_read_alarm.

Suggested-by: Alexandre Belloni <alexandre.belloni@bootlin.com>
Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
Link: https://lore.kernel.org/r/20211026171443.289-3-mario.limonciello@amd.com
Reviewed-by: Hans de Goede <hdegoede@redhat.com>
Signed-off-by: Hans de Goede <hdegoede@redhat.com>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/platform/x86/amd-pmc.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/drivers/platform/x86/amd-pmc.c b/drivers/platform/x86/amd-pmc.c
index 81f3b9d79f43..b7e50ed050a8 100644
--- a/drivers/platform/x86/amd-pmc.c
+++ b/drivers/platform/x86/amd-pmc.c
@@ -435,9 +435,6 @@ static int amd_pmc_verify_czn_rtc(struct amd_pmc_dev *pdev, u32 *arg)
 		dev_dbg(pdev->dev, "alarm not enabled\n");
 		return 0;
 	}
-	rc = rtc_valid_tm(&alarm.time);
-	if (rc)
-		return rc;
 	rc = rtc_read_time(rtc_device, &tm);
 	if (rc)
 		return rc;
-- 
2.35.3

