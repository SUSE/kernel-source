From: Lee Duncan <lduncan@suse.com>
Date: Sat 24 Dec 2022 02:20:06 PM PST
Subject: scsi: iscsi: kabi: add iscsi_conn_queue_work back
References: git-fixes
Patch-mainline: never, SUSE kABI fix

Patch scsi-iscsi-Rename-iscsi_conn_queue_work.patch renamed
iscsi_conn_queue_work() to iscsi_conn_queue_xmit(), so
add back the original version for kABI.
---
 drivers/scsi/libiscsi.c |    8 ++++++++
 include/scsi/libiscsi.h |    3 +++
 2 files changed, 11 insertions(+)

--- a/drivers/scsi/libiscsi.c
+++ b/drivers/scsi/libiscsi.c
@@ -93,6 +93,14 @@ inline void iscsi_conn_queue_xmit(struct
 }
 EXPORT_SYMBOL_GPL(iscsi_conn_queue_xmit);
 
+/* for kABI, add back old version of iscsi_conn_queue_xmit */
+inline void iscsi_conn_queue_work(struct iscsi_conn *conn)
+{
+	iscsi_conn_queue_xmit(conn);
+}
+EXPORT_SYMBOL_GPL(iscsi_conn_queue_work);
+
+
 inline void iscsi_conn_queue_recv(struct iscsi_conn *conn)
 {
 	struct Scsi_Host *shost = conn->session->host;
--- a/include/scsi/libiscsi.h
+++ b/include/scsi/libiscsi.h
@@ -472,6 +472,9 @@ extern void iscsi_suspend_queue(struct i
 extern void iscsi_conn_queue_xmit(struct iscsi_conn *conn);
 extern void iscsi_conn_queue_recv(struct iscsi_conn *conn);
 
+/* for kABI */
+extern void iscsi_conn_queue_work(struct iscsi_conn *conn);
+
 #define iscsi_conn_printk(prefix, _c, fmt, a...) \
 	iscsi_cls_conn_printk(prefix, ((struct iscsi_conn *)_c)->cls_conn, \
 			      fmt, ##a)
