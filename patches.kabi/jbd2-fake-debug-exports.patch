From: Jan Kara <jack@suse.cz>
Subject: [PATCH] jbd2: Fake symbols defined under CONFIG_JBD2_DEBUG
Patch-mainline: Never, kABI
References: bsc#1198971

Fake symbols that will get undefined when disabling CONFIG_JBD2_DEBUG. Neither
of these is (or can sensibly be) used outside of jbd2.

Signed-off-by: Jan Kara <jack@suse.cz>

---
 fs/jbd2/journal.c |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

--- a/fs/jbd2/journal.c
+++ b/fs/jbd2/journal.c
@@ -48,10 +48,10 @@
 #include <linux/uaccess.h>
 #include <asm/page.h>
 
-#ifdef CONFIG_JBD2_DEBUG
 ushort jbd2_journal_enable_debug __read_mostly;
 EXPORT_SYMBOL(jbd2_journal_enable_debug);
 
+#ifdef CONFIG_JBD2_DEBUG
 module_param_named(jbd2_debug, jbd2_journal_enable_debug, ushort, 0644);
 MODULE_PARM_DESC(jbd2_debug, "Debugging level for jbd2");
 #endif
@@ -116,6 +116,12 @@ void __jbd2_debug(int level, const char
 	va_end(args);
 }
 EXPORT_SYMBOL(__jbd2_debug);
+#else
+void __jbd2_debug(int level, const char *file, const char *func,
+		  unsigned int line, const char *fmt, ...)
+{
+}
+EXPORT_SYMBOL(__jbd2_debug);
 #endif
 
 /* Checksumming functions */
