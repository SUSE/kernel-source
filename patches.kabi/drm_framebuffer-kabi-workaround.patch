From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for struct drm_framebuffer changes
Patch-mainline: Never, kABI workaround
References: git-fixes

patches.suse/drm-framebuffer-Acquire-internal-references-on-GEM-h.patch
introduced a new field, internal_flags, to the struct frame_buffer.
In order to keep kABI compatibility, move it to a 4-bytes hole.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 include/drm/drm_framebuffer.h |    3 +++
 1 file changed, 3 insertions(+)

--- a/include/drm/drm_framebuffer.h
+++ b/include/drm/drm_framebuffer.h
@@ -191,10 +191,13 @@ struct drm_framebuffer {
 	 * DRM_MODE_FB_MODIFIERS.
 	 */
 	int flags;
+#ifndef __GENKSYMS__
+	/* FIXME: put into a 4-bytes hole for kABI compatibility */
 	/**
 	 * @internal_flags: Framebuffer flags like DRM_FRAMEBUFFER_HAS_HANDLE_REF.
 	 */
 	unsigned int internal_flags;
+#endif
 	/**
 	 * @filp_head: Placed on &drm_file.fbs, protected by &drm_file.fbs_lock.
 	 */
