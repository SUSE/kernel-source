From: Jiri Slaby <jslaby@suse.cz>
Subject: kABI: serial: mctrl_gpio: split disable_ms into sync and no_sync APIs
Patch-mainline: never, kabi
References: git-fixes

Commit 1bd2aad57da9 (mctrl_gpio: split disable_ms into sync and no_sync
APIs) renamed exported mctrl_gpio_disable_ms() to
mctrl_gpio_disable_ms_sync(). This broke kabi for already built
modules.

Reintroduce the old function, incl. the export.

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 drivers/tty/serial/serial_mctrl_gpio.c |   12 +++++++++---
 drivers/tty/serial/serial_mctrl_gpio.h |    1 +
 2 files changed, 10 insertions(+), 3 deletions(-)

--- a/drivers/tty/serial/serial_mctrl_gpio.c
+++ b/drivers/tty/serial/serial_mctrl_gpio.c
@@ -322,7 +322,7 @@ void mctrl_gpio_enable_ms(struct mctrl_g
 }
 EXPORT_SYMBOL_GPL(mctrl_gpio_enable_ms);
 
-static void mctrl_gpio_disable_ms(struct mctrl_gpios *gpios, bool sync)
+static void __mctrl_gpio_disable_ms(struct mctrl_gpios *gpios, bool sync)
 {
 	enum mctrl_gpio_idx i;
 
@@ -352,7 +352,7 @@ static void mctrl_gpio_disable_ms(struct
  */
 void mctrl_gpio_disable_ms_sync(struct mctrl_gpios *gpios)
 {
-	mctrl_gpio_disable_ms(gpios, true);
+	__mctrl_gpio_disable_ms(gpios, true);
 }
 EXPORT_SYMBOL_GPL(mctrl_gpio_disable_ms_sync);
 
@@ -363,10 +363,16 @@ EXPORT_SYMBOL_GPL(mctrl_gpio_disable_ms_
  */
 void mctrl_gpio_disable_ms_no_sync(struct mctrl_gpios *gpios)
 {
-	mctrl_gpio_disable_ms(gpios, false);
+	__mctrl_gpio_disable_ms(gpios, false);
 }
 EXPORT_SYMBOL_GPL(mctrl_gpio_disable_ms_no_sync);
 
+void mctrl_gpio_disable_ms(struct mctrl_gpios *gpios)
+{
+	mctrl_gpio_disable_ms_sync(gpios);
+}
+EXPORT_SYMBOL_GPL(mctrl_gpio_disable_ms);
+
 void mctrl_gpio_enable_irq_wake(struct mctrl_gpios *gpios)
 {
 	enum mctrl_gpio_idx i;
--- a/drivers/tty/serial/serial_mctrl_gpio.h
+++ b/drivers/tty/serial/serial_mctrl_gpio.h
@@ -91,6 +91,7 @@ void mctrl_gpio_enable_ms(struct mctrl_g
  * any corresponding IRQ is processed
  */
 void mctrl_gpio_disable_ms_sync(struct mctrl_gpios *gpios);
+void mctrl_gpio_disable_ms(struct mctrl_gpios *gpios);
 
 /*
  * Disable gpio interrupts to report status line changes, and return
