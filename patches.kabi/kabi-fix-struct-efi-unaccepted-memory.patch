From: Vlastimil Babka <vbabka@suse.cz>
Subject: kabi: fix struct efi after adding unaccepted memory table
Patch-mainline: Never, KABI
References: jsc#PED-7167

Move "unaccepted" as the last field and hide it from kabi checker. Assuming no
external module would create own instances of struct efi.

Signed-off-by: Vlastimil Babka <vbabka@suse.cz>
---
 include/linux/efi.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/include/linux/efi.h
+++ b/include/linux/efi.h
@@ -624,7 +624,6 @@ extern struct efi {
 	unsigned long			tpm_final_log;		/* TPM2 Final Events Log table */
 	unsigned long			mokvar_table;		/* MOK variable config table */
 	unsigned long			coco_secret;		/* Confidential computing secret table */
-	unsigned long			unaccepted;		/* Unaccepted memory table */
 
 	efi_get_time_t			*get_time;
 	efi_set_time_t			*set_time;
@@ -643,6 +642,9 @@ extern struct efi {
 
 	struct efi_memory_map		memmap;
 	unsigned long			flags;
+#ifndef __GENKSYMS__
+	unsigned long			unaccepted;		/* Unaccepted memory table */
+#endif
 } efi;
 
 #define EFI_RT_SUPPORTED_GET_TIME				0x0001
