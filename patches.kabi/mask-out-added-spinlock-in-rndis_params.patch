From 610307455b82354d949e72e56499c23cb5b84338 Mon Sep 17 00:00:00 2001
From: Oliver Neukum <oneukum@suse.com>
Date: Wed, 9 Mar 2022 11:09:36 +0100
Subject: [PATCH] mask out added spinlock in rndis_params
Patch-mainline: Never (kABI fixup)
References: git-fixes

It is already added to the end and the structure is generated with
a constructor. Simply mask the change.

Signed-off-by: Oliver Neukum <oneukum@suse.com>
---
 drivers/usb/gadget/function/rndis.h | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/usb/gadget/function/rndis.h b/drivers/usb/gadget/function/rndis.h
index c996ba28b..24836860f 100644
--- a/drivers/usb/gadget/function/rndis.h
+++ b/drivers/usb/gadget/function/rndis.h
@@ -174,7 +174,9 @@ typedef struct rndis_params {
 	void			(*resp_avail)(void *v);
 	void			*v;
 	struct list_head	resp_queue;
+#ifndef __GENKSYMS__
 	spinlock_t		resp_lock;
+#endif
 } rndis_params;
 
 /* RNDIS Message parser and other useless functions */
-- 
2.34.1

