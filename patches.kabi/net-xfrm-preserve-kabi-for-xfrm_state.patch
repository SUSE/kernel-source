From: Thomas Bogendoerfer <tbogendoerfer@suse.de>
Subject: net: xfrm: preserve kabi for xfrm_state
Patch-mainline: Never, kabi workaround
References: bsc#1233754

Commit 07b87f9eea0c ("xfrm: Fix unregister netdevice hang on hardware
offload.") moves field bysrc into a new union. Hide this change from
the kABI checker.

Signed-off-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 include/net/xfrm.h |    4 ++++
 1 file changed, 4 insertions(+)

--- a/include/net/xfrm.h
+++ b/include/net/xfrm.h
@@ -176,10 +176,14 @@ struct xfrm_state {
 		struct hlist_node	gclist;
 		struct hlist_node	bydst;
 	};
+#ifdef __GENKSYMS__
+	struct hlist_node       bysrc;
+#else
 	union {
 		struct hlist_node	dev_gclist;
 		struct hlist_node	bysrc;
 	};
+#endif
 	struct hlist_node	byspi;
 	struct hlist_node	byseq;
 
