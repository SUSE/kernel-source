From 8d3567571f7e257eaac1246dc4a64c0061331e07 Mon Sep 17 00:00:00 2001
From: Vasant Karasulli <vkarasulli@suse.de>
Date: Mon, 26 Aug 2024 09:40:03 +0200
Subject: [PATCH] iommu: Add static iommu_ops->release_domain
Patch-mainline: Never, kabi
References: bsc#1223742 CVE-2024-27079

Move the new field to the end of the struct and hide from kabi.

Signed-off-by: Vasant Karasulli <vkarasulli@suse.de>

---
 include/linux/iommu.h | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/include/linux/iommu.h b/include/linux/iommu.h
index 25f5c4622..d9f9f5bb9 100644
--- a/include/linux/iommu.h
+++ b/include/linux/iommu.h
@@ -414,8 +414,10 @@ struct iommu_ops {
 	struct module *owner;
 	struct iommu_domain *identity_domain;
 	struct iommu_domain *blocked_domain;
-	struct iommu_domain *release_domain;
 	struct iommu_domain *default_domain;
+#ifndef __GENKSYMS__
+	struct iommu_domain *release_domain;
+#endif
 };
 
 /**
-- 
2.34.1

