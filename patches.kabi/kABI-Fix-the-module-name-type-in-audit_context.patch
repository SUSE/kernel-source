From: Petr Pavlu <petr.pavlu@suse.com>
Date: Thu, 7 Aug 2025 13:37:55 +0200
Subject: kABI: Fix the module::name type in audit_context
Patch-mainline: Never, kABI workaround
References: git-fixes

Commit ae1ae11fb277 ("audit,module: restore audit logging in load failure
case") changed the type of the member audit_context::module::name from
'char *' to 'const char *'.

This is mostly a cleanup since the name is owned by the audit subsystem and
should not be modified by other code.

Mark the change as ok from the kABI perspective.

Signed-off-by: Petr Pavlu <petr.pavlu@suse.com>
---
 kernel/audit.h |    4 ++++
 1 file changed, 4 insertions(+)

--- a/kernel/audit.h
+++ b/kernel/audit.h
@@ -199,7 +199,11 @@ struct audit_context {
 			int			argc;
 		} execve;
 		struct {
+#ifndef __GENKSYMS__
 			const char		*name;
+#else
+			char			*name;
+#endif
 		} module;
 		struct {
 			struct audit_ntp_data	ntp_data;
