From: NeilBrown <neilb@suse.de>
Subject: kabi ix for SUNRPC: defer slow parts of rpc_free_client() to a workqueue.
Patch-mainline: never, kabi
References: bsc#1168202 bsc#1188924

cl_work is an internal-use field which isn't needed in kabi.
cl_work is LARGER than cl_xpi, so this changes the size of rpc_clnt and moves
cl_cred.  All of these details are of no interest to modules so this should be safe.

Acked-by: NeilBrown <neilb@suse.com>
Signed-off-by: Neil Brown <neilb@suse.com>

---
 include/linux/sunrpc/clnt.h |    4 ++++
 1 file changed, 4 insertions(+)

--- a/include/linux/sunrpc/clnt.h
+++ b/include/linux/sunrpc/clnt.h
@@ -71,6 +71,9 @@ struct rpc_clnt {
 #if IS_ENABLED(CONFIG_SUNRPC_DEBUG)
 	struct dentry		*cl_debugfs;	/* debugfs directory */
 #endif
+#ifdef __GENKSYMS__
+	struct rpc_xprt_iter	cl_xpi;
+#else
 	/* cl_work is only needed after cl_xpi is no longer used,
 	 * and that are of similar size
 	 */
@@ -78,6 +81,7 @@ struct rpc_clnt {
 		struct rpc_xprt_iter	cl_xpi;
 		struct work_struct	cl_work;
 	};
+#endif
 	const struct cred	*cl_cred;
 };
 
