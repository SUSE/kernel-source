From 86e081dd62716e5396b44a1be2cde37591234c23 Mon Sep 17 00:00:00 2001
From: Michal Suchanek <msuchanek@suse.de>
Date: Thu, 7 May 2020 20:04:22 +0200
Subject: [PATCH] libnvdimm: cover up nd_region changes

References: bsc#1162400
Patch-mainline: Never, kabi

Functions using this structure are exported but the layout is declared
in nd.h header internal to nvdimm core. The size and layout of the
structure has changed but out-of-tree users should not be able to tell.

Signed-off-by: Michal Suchanek <msuchanek@suse.de>
---
 drivers/nvdimm/nd.h | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/nvdimm/nd.h b/drivers/nvdimm/nd.h
index 6bf0529ff6d2..f92099ad5a59 100644
--- a/drivers/nvdimm/nd.h
+++ b/drivers/nvdimm/nd.h
@@ -146,7 +146,9 @@ struct nd_region {
 	struct device *btt_seed;
 	struct device *pfn_seed;
 	struct device *dax_seed;
+#ifndef __GENKSYMS__
 	unsigned long align;
+#endif
 	u16 ndr_mappings;
 	u64 ndr_size;
 	u64 ndr_start;
-- 
2.26.2

