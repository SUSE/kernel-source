From: Lee Duncan <lduncan@suse.com>
Date: Fri 15 Jul 2022 12:27:43 PM PDT
Subject: [PATCH] kABI: fix adding field to scsi_device
Patch-mainline: Never, kABI fix
References: git-fixes

Patch scsi-libiscsi-Teardown-iscsi_cls_conn-gracefully.patch removed
iscsi_destroy_conn() since it was no longer needed, but this patch
puts it back, in case any external module expects it to be present,
for kABI compatability.

[lduncan: refreshed to apply: context had changed]
---
 include/scsi/scsi_device.h |    3 +++
 1 file changed, 3 insertions(+)

--- a/include/scsi/scsi_device.h
+++ b/include/scsi/scsi_device.h
@@ -209,7 +209,10 @@ struct scsi_device {
 	unsigned unmap_limit_for_ws:1;	/* Use the UNMAP limit for WRITE SAME */
 	unsigned rpm_autosuspend:1;	/* Enable runtime autosuspend at device
 					 * creation time */
+#ifndef __GENKSYMS__
+	/* kABI: there should be room for this single bit */
 	unsigned silence_suspend:1;	/* Do not print runtime PM related messages */
+#endif
 	unsigned no_vpd_size:1;		/* No VPD size reported in header */
 
 	unsigned int queue_stopped;	/* request queue is quiesced */
