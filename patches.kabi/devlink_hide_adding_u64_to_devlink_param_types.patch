From: Thomas Bogendoerfer <tbogendoerfer@suse.de>
Subject: kabi: Hide adding of u64 to devlink_param_type
Patch-mainline: Never, kabi workaround
References: jsc#PED-12745

Commit c0ef14469591 ("devlink: Add support for u64 parameters") is
needed for backporting microchip dpll driver. Prerequisite patch for that
is commit f9e78932eac6 ("devlink: avoid param type value translations").
These patches break kABI for enum devlink_param_type and union
devlink_param_value. Hide these changes.

Signed-off-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 include/net/devlink.h |   10 ++++++++++
 1 file changed, 10 insertions(+)

--- a/include/net/devlink.h
+++ b/include/net/devlink.h
@@ -419,19 +419,29 @@ typedef u64 devlink_resource_occ_get_t(v
 
 #define __DEVLINK_PARAM_MAX_STRING_VALUE 32
 enum devlink_param_type {
+#ifdef __GENKSYMS__
+	DEVLINK_PARAM_TYPE_U8,
+	DEVLINK_PARAM_TYPE_U16,
+	DEVLINK_PARAM_TYPE_U32,
+	DEVLINK_PARAM_TYPE_STRING,
+	DEVLINK_PARAM_TYPE_BOOL,
+#else
 	DEVLINK_PARAM_TYPE_U8 = DEVLINK_VAR_ATTR_TYPE_U8,
 	DEVLINK_PARAM_TYPE_U16 = DEVLINK_VAR_ATTR_TYPE_U16,
 	DEVLINK_PARAM_TYPE_U32 = DEVLINK_VAR_ATTR_TYPE_U32,
 	DEVLINK_PARAM_TYPE_U64 = DEVLINK_VAR_ATTR_TYPE_U64,
 	DEVLINK_PARAM_TYPE_STRING = DEVLINK_VAR_ATTR_TYPE_STRING,
 	DEVLINK_PARAM_TYPE_BOOL = DEVLINK_VAR_ATTR_TYPE_FLAG,
+#endif
 };
 
 union devlink_param_value {
 	u8 vu8;
 	u16 vu16;
 	u32 vu32;
+#ifndef __GENKSYMS__
 	u64 vu64;
+#endif
 	char vstr[__DEVLINK_PARAM_MAX_STRING_VALUE];
 	bool vbool;
 };
