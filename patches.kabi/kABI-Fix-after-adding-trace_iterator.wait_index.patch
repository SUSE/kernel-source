From: Petr Pavlu <petr.pavlu@suse.com>
Date: Sun, 30 Oct 2022 14:09:24 +0100
Subject: kABI: Fix after adding trace_iterator.wait_index
Patch-mainline: Never, kABI fix
References: git-fixes

Change type of the new field trace_iterator.wait_index from long to int
so it fits in a 4-byte hole after cpu_file. The smaller size is
sufficient.

Signed-off-by: Petr Pavlu <petr.pavlu@suse.com>
---
 include/linux/trace_events.h | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/include/linux/trace_events.h b/include/linux/trace_events.h
index 05a6a0f..ad78336 100644
--- a/include/linux/trace_events.h
+++ b/include/linux/trace_events.h
@@ -77,10 +77,12 @@ struct trace_iterator {
 	struct trace_buffer	*trace_buffer;
 	void			*private;
 	int			cpu_file;
+#ifndef __GENKSYMS__
+	int			wait_index;
+#endif
 	struct mutex		mutex;
 	struct ring_buffer_iter	**buffer_iter;
 	unsigned long		iter_flags;
-	long			wait_index;
 
 	/* trace_seq for __print_flags() and __print_symbolic() etc. */
 	struct trace_seq	tmp_seq;
-- 
2.35.3

