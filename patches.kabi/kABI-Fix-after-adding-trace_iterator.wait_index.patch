From: Petr Pavlu <petr.pavlu@suse.com>
Date: Sun, 30 Oct 2022 10:56:12 +0100
Subject: kABI: Fix after adding trace_iterator.wait_index
Patch-mainline: Never, kABI fix
References: git-fixes

Change type of the new field trace_iterator.wait_index from long to int
so it fits in a 4-byte hole at its location. The smaller size is
sufficient.

Signed-off-by: Petr Pavlu <petr.pavlu@suse.com>
---
 include/linux/trace_events.h | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/include/linux/trace_events.h b/include/linux/trace_events.h
index eef67e2..aff43cc 100644
--- a/include/linux/trace_events.h
+++ b/include/linux/trace_events.h
@@ -91,7 +91,9 @@ struct trace_iterator {
 	unsigned int		temp_size;
 	char			*fmt;	/* modified format holder */
 	unsigned int		fmt_size;
-	long			wait_index;
+#ifndef __GENKSYMS__
+	int			wait_index;
+#endif
 
 	/* trace_seq for __print_flags() and __print_symbolic() etc. */
 	struct trace_seq	tmp_seq;
-- 
2.35.3

