From: Takashi Iwai <tiwai@suse.de>
Subject: struct pci_config_window kABI workaround
Patch-mainline: Never, kABI workaround
References: bsc#1204382

The patch patches.suse/PCI-Dynamically-map-ECAM-regions.patch adds a new
field to struct pci_config_window that breaks kABI.
As the object is always dynamically assigned by pci_ecam_create(), let's
apply the standard kABI workaround to put the new stuff at the tail.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 include/linux/pci-ecam.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/include/linux/pci-ecam.h
+++ b/include/linux/pci-ecam.h
@@ -28,7 +28,6 @@ struct pci_ecam_ops {
 struct pci_config_window {
 	struct resource			res;
 	struct resource			busr;
-	unsigned int			bus_shift;
 	void				*priv;
 	const struct pci_ecam_ops	*ops;
 	union {
@@ -36,6 +35,9 @@ struct pci_config_window {
 		void __iomem		**winp; /* 32-bit per-bus mapping */
 	};
 	struct device			*parent;/* ECAM res was from this dev */
+#ifndef __GENKSYMS__
+	unsigned int			bus_shift;
+#endif
 };
 
 /* create and free pci_config_window */
