From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for drivers/of/dynamic.c
Patch-mainline: Never, kABI workaround
References: CVE-2024-35879 bsc#1224524

Fix kABI breakage by
  patches.suse/of-dynamic-Synchronize-of_changeset_destroy-with-the.patch

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/of/dynamic.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/of/dynamic.c
+++ b/drivers/of/dynamic.c
@@ -9,7 +9,9 @@
 
 #define pr_fmt(fmt)	"OF: " fmt
 
+#ifndef __GENKSYMS__
 #include <linux/device.h>
+#endif
 #include <linux/of.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
