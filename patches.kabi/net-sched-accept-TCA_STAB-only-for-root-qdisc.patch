From: Davide Benini <davide.benini@suse.com>
Date: Mon Dec  9 14:54:31 CET 2024
Subject: Restore deleted EXPORT_SYMBOL(__qdisc_calculate_pkt_len)
Patch-mainline: Never, kABI workaround
References: CVE-2024-50039 bsc#1231909

Patch 3cb7cf1540ddf ("net/sched: accept TCA_STAB only for root qdisc") removed 
exported symbol __qdisc_calculate_pkt_len; here re-adding for __GENKSYMS__

Signed-off-by: Davide Benini <davide.benini@suse.com>


---
 net/sched/sch_api.c |    1 +
 1 file changed, 1 insertion(+)

--- a/net/sched/sch_api.c
+++ b/net/sched/sch_api.c
@@ -593,6 +593,7 @@ out:
 		pkt_len = 1;
 	qdisc_skb_cb(skb)->pkt_len = pkt_len;
 }
+EXPORT_SYMBOL(__qdisc_calculate_pkt_len);
 
 void qdisc_warn_nonwc(const char *txt, struct Qdisc *qdisc)
 {
