From: Jan Kara <jack@suse.cz>
Subject: nfs: Fix up kabi after adding write_congestion_wait
Patch-mainline: Never, kabi fixup
References: bsc#1218442

struct nfs_server is allocated and initialized by a helper nfs_alloc_server()
so it is safe to fix kABI by moving the new entry at the end of the structure.

Signed-off-by: Jan Kara <jack@suse.cz>

---
 include/linux/nfs_fs_sb.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/include/linux/nfs_fs_sb.h
+++ b/include/linux/nfs_fs_sb.h
@@ -139,7 +139,6 @@ struct nfs_server {
 	struct rpc_clnt *	client_acl;	/* ACL RPC client handle */
 	struct nlm_host		*nlm_host;	/* NLM client handle */
 	struct nfs_iostats __percpu *io_stats;	/* I/O statistics */
-	wait_queue_head_t	write_congestion_wait;	/* wait until write congestion eases */
 	atomic_long_t		writeback;	/* number of writeback pages */
 	unsigned int		write_congested;/* flag set when writeback gets too high */
 	unsigned int		flags;		/* various flags */
@@ -262,6 +261,9 @@ struct nfs_server {
 	/* User namespace info */
 	const struct cred	*cred;
 	bool			has_sec_mnt_opts;
+#ifndef __GENKSYMS__
+	wait_queue_head_t	write_congestion_wait;	/* wait until write congestion eases */
+#endif
 };
 
 /* Server capabilities */
