From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for commit 3d788b2fbe6a backport
Patch-mainline: Never, kABI workaround
References: bsc#1225717, CVE-2024-36910, bsc#1229040

Rename to SUSE-specific one for kABI workaround.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/uio/uio_hv_generic.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

--- a/drivers/uio/uio_hv_generic.c
+++ b/drivers/uio/uio_hv_generic.c
@@ -181,13 +181,13 @@ hv_uio_cleanup(struct hv_device *dev, st
 {
 	if (pdata->send_gpadl.gpadl_handle) {
 		vmbus_teardown_gpadl(dev->channel, &pdata->send_gpadl);
-		if (!pdata->send_gpadl.decrypted)
+		if (!SUSE_vmbus_gpadl_get_decrypted(&pdata->send_gpadl))
 			vfree(pdata->send_buf);
 	}
 
 	if (pdata->recv_gpadl.gpadl_handle) {
 		vmbus_teardown_gpadl(dev->channel, &pdata->recv_gpadl);
-		if (!pdata->recv_gpadl.decrypted)
+		if (!SUSE_vmbus_gpadl_get_decrypted(&pdata->recv_gpadl))
 			vfree(pdata->recv_buf);
 	}
 }
@@ -297,7 +297,7 @@ hv_uio_probe(struct hv_device *dev,
 	ret = vmbus_establish_gpadl(channel, pdata->recv_buf,
 				    RECV_BUFFER_SIZE, &pdata->recv_gpadl);
 	if (ret) {
-		if (!pdata->recv_gpadl.decrypted)
+		if (!SUSE_vmbus_gpadl_get_decrypted(&pdata->recv_gpadl))
 			vfree(pdata->recv_buf);
 		goto fail_close;
 	}
@@ -320,7 +320,7 @@ hv_uio_probe(struct hv_device *dev,
 	ret = vmbus_establish_gpadl(channel, pdata->send_buf,
 				    SEND_BUFFER_SIZE, &pdata->send_gpadl);
 	if (ret) {
-		if (!pdata->send_gpadl.decrypted)
+		if (!SUSE_vmbus_gpadl_get_decrypted(&pdata->send_gpadl))
 			vfree(pdata->send_buf);
 		goto fail_close;
 	}
