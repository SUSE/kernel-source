From: Steffen Jaeckel <sjaeckel@suse.de>
Date: Mon, 19 Aug 2024 10:18:20 +0200
Subject: [PATCH 1/1] kABI fix for rxrpc: Fix delayed ACKs to not set the
 reference serial number
Patch-mainline: Never, kABI workaround
References: CVE-2024-26677 bsc#1222387

Bring back struct element that was removed in the patch

Signed-off-by: Steffen Jaeckel <sjaeckel@suse.de>

---
 net/rxrpc/ar-internal.h | 1 +
 1 file changed, 1 insertion(+)

diff --git a/net/rxrpc/ar-internal.h b/net/rxrpc/ar-internal.h
index 7687ee18921a6..5204eca3b95bf 100644
--- a/net/rxrpc/ar-internal.h
+++ b/net/rxrpc/ar-internal.h
@@ -692,6 +692,7 @@ struct rxrpc_call {
 	/* Receive-phase ACK management (ACKs we send). */
 	u8			ackr_reason;	/* reason to ACK */
 	u16			ackr_sack_base;	/* Starting slot in SACK table ring */
+	rxrpc_serial_t		ackr_serial;	/* unused since e7870cf1, returned to fix kABI */
 	rxrpc_seq_t		ackr_window;	/* Base of SACK window */
 	rxrpc_seq_t		ackr_wtop;	/* Base of SACK window */
 	unsigned int		ackr_nr_unacked; /* Number of unacked packets */
-- 
2.46.0

