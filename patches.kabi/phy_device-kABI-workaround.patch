From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for phy_device changes
Patch-mainline: Never, kABI workaround
References: git-fixes

The recent fix for phy added a couple of new bit fields to struct
phy_device.  Wrap them with the standard __GENKSYMS__ trick for kABI
compatibility, as well as wrapping the new inclusion in phy.c.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/net/phy/phy.c |    2 ++
 include/linux/phy.h   |    2 ++
 2 files changed, 4 insertions(+)

--- a/include/linux/phy.h
+++ b/include/linux/phy.h
@@ -594,8 +594,10 @@ struct phy_device {
 
 	/* Interrupts are enabled */
 	unsigned interrupts:1;
+#ifndef __GENKSYMS__
 	unsigned irq_suspended:1;
 	unsigned irq_rerun:1;
+#endif
 
 	enum phy_state state;
 
--- a/drivers/net/phy/phy.c
+++ b/drivers/net/phy/phy.c
@@ -31,7 +31,9 @@
 #include <linux/io.h>
 #include <linux/uaccess.h>
 #include <linux/atomic.h>
+#ifndef __GENKSYMS__
 #include <linux/suspend.h>
+#endif
 #include <net/netlink.h>
 #include <net/genetlink.h>
 #include <net/sock.h>
