From: Takashi Iwai <tiwai@suse.de>
Subject: bluetooth hci_uart_register_device() kABI workaround
Patch-mainline: Never, kABI workaround
References: git-fixes

Re-export the recently dropped function hci_uart_register_device().

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/bluetooth/hci_serdev.c |    8 ++++++++
 drivers/bluetooth/hci_uart.h   |    8 ++------
 2 files changed, 10 insertions(+), 6 deletions(-)

--- a/drivers/bluetooth/hci_serdev.c
+++ b/drivers/bluetooth/hci_serdev.c
@@ -397,6 +397,14 @@ err_rwsem:
 }
 EXPORT_SYMBOL_GPL(hci_uart_register_device_priv);
 
+/* FIXME: SLE kABI compatibility */
+int hci_uart_register_device(struct hci_uart *hu,
+			     const struct hci_uart_proto *p)
+{
+	return hci_uart_register_device_priv(hu, p, 0);
+}
+EXPORT_SYMBOL_GPL(hci_uart_register_device);
+
 void hci_uart_unregister_device(struct hci_uart *hu)
 {
 	struct hci_dev *hdev = hu->hdev;
--- a/drivers/bluetooth/hci_uart.h
+++ b/drivers/bluetooth/hci_uart.h
@@ -101,12 +101,8 @@ int hci_uart_unregister_proto(const stru
 int hci_uart_register_device_priv(struct hci_uart *hu,
 				  const struct hci_uart_proto *p,
 				  int sizeof_priv);
-
-static inline int hci_uart_register_device(struct hci_uart *hu,
-					   const struct hci_uart_proto *p)
-{
-	return hci_uart_register_device_priv(hu, p, 0);
-}
+int hci_uart_register_device(struct hci_uart *hu,
+			     const struct hci_uart_proto *p);
 
 void hci_uart_unregister_device(struct hci_uart *hu);
 
