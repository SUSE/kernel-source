From: Miroslav Benes <mbenes@suse.cz>
Subject: x86/unwind: kABI workaround for unwind_state changes
Patch-mainline: Never, kABI workaround
References: bsc#1193277

The patch patches.suse/x86-unwind-Recover-kretprobe-trampoline-entry.patch
introduced a new field to struct unwind_state. Move it to the tail for kABI
workaround as usual.

Signed-off-by: Miroslav Benes <mbenes@suse.cz>
---
 arch/x86/include/asm/unwind.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/arch/x86/include/asm/unwind.h
+++ b/arch/x86/include/asm/unwind.h
@@ -16,7 +16,6 @@ struct unwind_state {
 	unsigned long stack_mask;
 	struct task_struct *task;
 	int graph_idx;
-	struct llist_node *kr_cur;
 	bool error;
 #if defined(CONFIG_UNWINDER_ORC)
 	bool signal, full_regs;
@@ -35,6 +34,9 @@ struct unwind_state {
 #else
 	unsigned long *sp;
 #endif
+#ifndef __GENKSYMS__
+	struct llist_node *kr_cur;
+#endif
 };
 
 void __unwind_start(struct unwind_state *state, struct task_struct *task,
