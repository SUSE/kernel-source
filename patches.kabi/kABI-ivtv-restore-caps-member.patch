From a3b644c57d22d256734d759f3dc5db24e412b49b Mon Sep 17 00:00:00 2001
From: Oliver Neukum <oneukum@suse.com>
Date: Wed, 11 May 2022 11:01:05 +0200
Subject: [PATCH] kABI: ivtv: restore caps member
Patch-mainline: Never (kABI fixup)
References: git-fixes

The member of a structure must be resurrected.

Signed-off-by: Oliver Neukum <oneukum@suse.com>
---
 drivers/media/pci/ivtv/ivtv-driver.h  | 1 +
 drivers/media/pci/ivtv/ivtv-streams.c | 1 +
 2 files changed, 2 insertions(+)

diff --git a/drivers/media/pci/ivtv/ivtv-driver.h b/drivers/media/pci/ivtv/ivtv-driver.h
index ce3a7ca51..8c7662a8b 100644
--- a/drivers/media/pci/ivtv/ivtv-driver.h
+++ b/drivers/media/pci/ivtv/ivtv-driver.h
@@ -330,6 +330,7 @@ struct ivtv_stream {
 	struct ivtv *itv;		/* for ease of use */
 	const char *name;		/* name of the stream */
 	int type;			/* stream type */
+	u32 caps; /* SUSE dummy - updated but not used by the driver */
 
 	struct v4l2_fh *fh;		/* pointer to the streaming filehandle */
 	spinlock_t qlock;		/* locks access to the queues */
diff --git a/drivers/media/pci/ivtv/ivtv-streams.c b/drivers/media/pci/ivtv/ivtv-streams.c
index f9de5d160..a71a49a34 100644
--- a/drivers/media/pci/ivtv/ivtv-streams.c
+++ b/drivers/media/pci/ivtv/ivtv-streams.c
@@ -176,6 +176,7 @@ static void ivtv_stream_init(struct ivtv *itv, int type)
 	s->itv = itv;
 	s->type = type;
 	s->name = ivtv_stream_info[type].name;
+	s->caps = ivtv_stream_info[type].v4l2_caps;
 	s->vdev.device_caps = ivtv_stream_info[type].v4l2_caps;
 
 	if (ivtv_stream_info[type].pio)
-- 
2.35.3

