From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for mt76_poll_msec()
Patch-mainline: Never, kABI workaround
References: git-fixes

Re-create a dummy function __mt76_poll_msec() and re-export for kABI
compatibility, which was converted to a macro in
wifi-mt76-add-flexible-polling-wait-interval-support.patch.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/net/wireless/mediatek/mt76/util.c |    9 +++++++++
 1 file changed, 9 insertions(+)

--- a/drivers/net/wireless/mediatek/mt76/util.c
+++ b/drivers/net/wireless/mediatek/mt76/util.c
@@ -138,4 +138,13 @@ int __mt76_worker_fn(void *ptr)
 }
 EXPORT_SYMBOL_GPL(__mt76_worker_fn);
 
+/* FIXME: re-added for SLE kABI compatibility */
+#undef __mt76_poll_msec
+bool __mt76_poll_msec(struct mt76_dev *dev, u32 offset, u32 mask, u32 val,
+		      int timeout)
+{
+	return ____mt76_poll_msec(dev, offset, mask, val, timeout, 10);
+}
+EXPORT_SYMBOL_GPL(__mt76_poll_msec);
+
 MODULE_LICENSE("Dual BSD/GPL");
