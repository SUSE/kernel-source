From: Juergen Gross <jgross@suse.com>
Date: Wed, 26 Oct 2022 16:29:29 +0200
Subject: [PATCH] kABI: Fix kABI after backport Add pmc->intr to refactor
 kvm_perf_overflow{_intr}()
Patch-mainline: Never, kABI fix
References: git-fixes

Add the bool intr to a hole in the structure.

Signed-off-by: Juergen Gross <jgross@suse.com>
---
 arch/x86/include/asm/kvm_host.h | 4 +++-
 1 file changed, 3 insertion(+), 1 deletion(-)

diff --git a/arch/x86/include/asm/kvm_host.h b/arch/x86/include/asm/kvm_host.h
index e55e469cdd8c..eb282da0458a 100644
--- a/arch/x86/include/asm/kvm_host.h
+++ b/arch/x86/include/asm/kvm_host.h
@@ -477,6 +477,9 @@ enum pmc_type {
 struct kvm_pmc {
 	enum pmc_type type;
 	u8 idx;
+#ifndef __GENKSYMS__
+	bool intr;
+#endif
 	u64 counter;
 	u64 eventsel;
 	struct perf_event *perf_event;
@@ -486,7 +489,6 @@ struct kvm_pmc {
 	 * ctrl value for fixed counters.
 	 */
 	u64 current_config;
-	bool intr;
 };
 
 struct kvm_pmu {
-- 
2.36.1

