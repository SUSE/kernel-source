From: Jiri Slaby <jslaby@suse.cz>
Subject: kABI: x86/msi: Fix msi message data shadow struct
Patch-mainline: never, kabi
References: kabi

Commit 59b18a1e65b7 (x86/msi: Fix msi message data shadow struct) fixed
struct x86_msi_data layout. Now, dmar_subhandle properly overlays the
legacy members. But this made the kABI checker to complain.

Hide the change from the checker as this is a HW structure and is
supposed to be in this format. If there were anyone using
dmar_subhandle, they would have failed anyway.

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 arch/x86/include/asm/msi.h |    6 ++++++
 1 file changed, 6 insertions(+)

--- a/arch/x86/include/asm/msi.h
+++ b/arch/x86/include/asm/msi.h
@@ -12,17 +12,23 @@ int pci_msi_prepare(struct irq_domain *d
 /* Structs and defines for the X86 specific MSI message format */
 
 typedef struct x86_msi_data {
+#ifndef __GENKSYMS__
 	union {
 		struct {
+#endif
 			u32	vector			:  8,
 				delivery_mode		:  3,
 				dest_mode_logical	:  1,
 				reserved		:  2,
 				active_low		:  1,
 				is_level		:  1;
+#ifndef __GENKSYMS__
 		};
+#endif
 		u32	dmar_subhandle;
+#ifndef __GENKSYMS__
 	};
+#endif
 } __attribute__ ((packed)) arch_msi_msg_data_t;
 #define arch_msi_msg_data	x86_msi_data
 
