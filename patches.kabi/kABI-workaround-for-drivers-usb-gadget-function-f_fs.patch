From c2c7fd18923615c9eee4cf67b7c77ffb79d4ebb9 Mon Sep 17 00:00:00 2001
From: Jessica Yu <jeyu@suse.de>
Date: Thu, 22 Jul 2021 13:51:18 +0200
Subject: [PATCH] kABI workaround for drivers/usb/gadget/function/f_fs.c
Patch-mainline: never, kABI fix
References: git-fixes

The addition of patches.suse/vfs-Convert-functionfs-to-use-the-new-mount-API.patch
from the SLE15-SP2 merge introduces a header inclusion which causes a
kABI change in SLE15-SP3. Just wrap with the standard ifdef.

Signed-off-by: Jessica Yu <jeyu@suse.de>
---
 drivers/usb/gadget/function/f_fs.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/usb/gadget/function/f_fs.c b/drivers/usb/gadget/function/f_fs.c
index 9c0c393abb39..5369ff1d2c7b 100644
--- a/drivers/usb/gadget/function/f_fs.c
+++ b/drivers/usb/gadget/function/f_fs.c
@@ -17,7 +17,9 @@
 #include <linux/blkdev.h>
 #include <linux/pagemap.h>
 #include <linux/export.h>
+#ifndef __GENKSYMS__
 #include <linux/fs_parser.h>
+#endif
 #include <linux/hid.h>
 #include <linux/mm.h>
 #include <linux/module.h>
-- 
2.32.0

