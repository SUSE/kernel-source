From 2da4bc45a0d0c03bd2af804d84db21522b4d19fd Mon Sep 17 00:00:00 2001
From: Oliver Neukum <oneukum@suse.com>
Date: Wed, 17 Sep 2025 11:56:07 +0200
Subject: [PATCH] struct l2cap_chan: shift new member rx_avail to end
Patch-mainline: Never (kABI fixup)
References: git-fixes

Centrally allocated in l2cap_chan_create()
A new member can go to the end.

Signed-off-by: Oliver Neukum <oneukum@suse.com>
Reviewed-by: Takashi Iwai <tiwai@suse.de>
---
 include/net/bluetooth/l2cap.h | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/include/net/bluetooth/l2cap.h b/include/net/bluetooth/l2cap.h
index 306df61ec..c5bc85bac 100644
--- a/include/net/bluetooth/l2cap.h
+++ b/include/net/bluetooth/l2cap.h
@@ -584,9 +584,6 @@ struct l2cap_chan {
 	__u16		tx_credits;
 	__u16		rx_credits;
 
-	/* estimated available receive buffer space or -1 if unknown */
-	ssize_t		rx_avail;
-
 	__u8		tx_state;
 	__u8		rx_state;
 
@@ -648,6 +645,10 @@ struct l2cap_chan {
 	void			*data;
 	const struct l2cap_ops	*ops;
 	struct mutex		lock;
+#ifndef __GENKSYMS__
+	/* estimated available receive buffer space or -1 if unknown */
+	ssize_t         rx_avail;
+#endif
 };
 
 struct l2cap_ops {
-- 
2.51.0

