From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for cec_adapter
Patch-mainline: Never, kABI workaround
References: CVE-2024-23848 bsc#1219104

Add a standard trick for the newly added bool in struct cec_adapter
for keeping the kABI.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 include/media/cec.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/include/media/cec.h
+++ b/include/media/cec.h
@@ -251,12 +251,14 @@ struct cec_adapter {
 	u16 phys_addr;
 	bool needs_hpd;
 	bool is_enabled;
-	bool is_claiming_log_addrs;
 	bool is_configuring;
 	bool must_reconfigure;
 	bool is_configured;
 	bool cec_pin_is_high;
 	bool adap_controls_phys_addr;
+#ifndef __GENKSYMS__
+	bool is_claiming_log_addrs:1;
+#endif
 	u8 last_initiator;
 	u32 monitor_all_cnt;
 	u32 monitor_pin_cnt;
