From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for cec_adapter
Patch-mainline: Never, kABI workaround
References: CVE-2024-23848 bsc#1219104

Add a standard trick for the newly added bool in struct cec_adapter
for keeping the kABI.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 include/media/cec.h |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

--- a/include/media/cec.h
+++ b/include/media/cec.h
@@ -222,7 +222,9 @@ struct cec_adapter {
 	struct list_head wait_queue;
 	struct cec_data *transmitting;
 	bool transmit_in_progress;
+#ifndef __GENKSYMS__
 	bool transmit_in_progress_aborted;
+#endif
 
 	struct task_struct *kthread_config;
 	struct completion config_completion;
@@ -237,11 +239,13 @@ struct cec_adapter {
 
 	u16 phys_addr;
 	bool needs_hpd;
-	bool is_claiming_log_addrs;
 	bool is_configuring;
 	bool is_configured;
 	bool cec_pin_is_high;
 	bool adap_controls_phys_addr;
+#ifndef __GENKSYMS__
+	bool is_claiming_log_addrs:1;
+#endif
 	u8 last_initiator;
 	u32 monitor_all_cnt;
 	u32 monitor_pin_cnt;
