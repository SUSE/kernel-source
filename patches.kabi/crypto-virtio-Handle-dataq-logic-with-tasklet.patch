Patch-mainline: never, kABI workaround
References: git-fixes
From: Juergen Gross <jgross@suse.com>
Date: Mon, 23 Sep 2024 11:49:45 +0000
Subject: [PATCH] kABI, crypto: virtio - Handle dataq logic with tasklet

Upstream patch fed93fb62e05 ("crypto: virtio - Handle dataq logic
with tasklet") adds another struct member to struct data_queue. The
new member is added at the end of the struct and the struct's size is
not important for using modules, as the memory for this struct is
allocated by a central helper.

Signed-off-by: Juergen Gross <jgross@suse.com>
---
 drivers/crypto/virtio/virtio_crypto_common.h |  2 ++
 1 file changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/crypto/virtio/virtio_crypto_common.h b/drivers/crypto/virtio/virtio_crypto_common.h
index 154590e1f764..7059bbe5a2eb 100644
--- a/drivers/crypto/virtio/virtio_crypto_common.h
+++ b/drivers/crypto/virtio/virtio_crypto_common.h
@@ -29,7 +29,9 @@ struct data_queue {
 	char name[32];
 
 	struct crypto_engine *engine;
+#ifndef __GENKSYMS__
 	struct tasklet_struct done_task;
+#endif
 };
 
 struct virtio_crypto {
-- 
2.35.3

