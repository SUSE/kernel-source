From: Lee Duncan <lduncan@suse.com>
Date: Wed 20 Nov 2024 12:44:24 PM PST
Subject: scsi: kABI: restore no_start_on_resume to scsi_device
Patch-mainline: Never, kABI workaround
References: git-fixes

The patch "scsi-Remove-scsi-device-no_start_on_resume-flag.patch"
removed the field "no_start_on_resume".  Restore this field
in struct scsi_device, even though it will no longer be used, so
that the kABI is happy, and to keep later bit fields aligned.

Signed-off-by: Lee Duncan <lduncan@suse.com>
---
 include/scsi/scsi_device.h |    1 +
 1 file changed, 1 insertion(+)

--- a/include/scsi/scsi_device.h
+++ b/include/scsi/scsi_device.h
@@ -215,6 +215,7 @@ struct scsi_device {
 	unsigned use_192_bytes_for_3f:1; /* ask for 192 bytes from page 0x3f */
 	unsigned no_start_on_add:1;	/* do not issue start on add */
 	unsigned allow_restart:1; /* issue START_UNIT in error handler */
+	unsigned no_start_on_resume:1; /* (unused) Do not issue START_STOP_UNIT on resume */
 	unsigned start_stop_pwr_cond:1;	/* Set power cond. in START_STOP_UNIT */
 	unsigned no_uld_attach:1; /* disable connecting to upper level drivers */
 	unsigned select_no_atn:1;
