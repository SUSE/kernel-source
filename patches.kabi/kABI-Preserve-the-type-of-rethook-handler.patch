From: Petr Pavlu <petr.pavlu@suse.com>
Date: Fri Dec 15 11:30:19 2023 +0100
Subject: kABI: Preserve the type of rethook::handler
Patch-mainline: Never, kABI fix
References: git-fixes

Hide how rethook::handle is newly defined from genksyms. The actual type
remains the same.

Signed-off-by: Petr Pavlu <petr.pavlu@suse.com>
---
 include/linux/rethook.h |    4 ++++
 1 file changed, 4 insertions(+)

--- a/include/linux/rethook.h
+++ b/include/linux/rethook.h
@@ -34,7 +34,11 @@ struct rethook {
 	 * __rcu, instead of rethook_handler_t. But this must be same as
 	 * rethook_handler_t.
 	 */
+#ifndef __GENKSYMS__
 	void (__rcu *handler) (struct rethook_node *, void *, struct pt_regs *);
+#else
+	rethook_handler_t	handler;
+#endif
 	struct freelist_head	pool;
 	refcount_t		ref;
 	struct rcu_head		rcu;
