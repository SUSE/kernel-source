Patch-mainline: never, kabi workaround
References: git-fixes
From: Juergen Gross <jgross@suse.com>
Date: Fri, 16 Sep 2024 18:05:57 -0700
Subject: [PATCH] kabi fix of KVM: arm64: Preserve PSTATE.SS for the guest while
 single-step is enabled

Hide the struct kvm_vcpu_arch member guest_debug_preserved_pstate_ss
from genksyms. It has been added to a padding hole, so kabi is fine.

Signed-off-by: Juergen Gross <jgross@suse.com>
---
diff --git a/arch/arm64/include/asm/kvm_host.h b/arch/arm64/include/asm/kvm_host.h
index e9c9388ccc02..ccf8a144f009 100644
--- a/arch/arm64/include/asm/kvm_host.h
+++ b/arch/arm64/include/asm/kvm_host.h
@@ -393,7 +393,9 @@ struct kvm_vcpu_arch {
 	/* Don't run the guest (internal implementation need) */
 	bool pause;
 
+#ifndef __GENKSYMS__
 	bool	guest_debug_preserved_pstate_ss;
+#endif
 
 	/* Cache some mmu pages needed inside spinlock regions */
 	struct kvm_mmu_memory_cache mmu_page_cache;
 
-- 
2.35.3

