From: Juergen Gross <jgross@suse.com>
Date: Wed, 26 Oct 2022 16:29:29 +0200
Subject: [PATCH] kABI: Fix kABI after backport Update vPMCs when
 retiring branch instructions (git-fixes).
Patch-mainline: Never, kABI fix
References: git-fixes

Move the is_branch bool to a hole in the structure.

Signed-off-by: Juergen Gross <jgross@suse.com>
---
 arch/x86/kvm/kvm_emulate.h | 4 +++-
 1 file changed, 3 insertion(+), 1 deletion(-)

diff --git a/arch/x86/kvm/kvm_emulate.h b/arch/x86/kvm/kvm_emulate.h
index e55e469cdd8c..eb282da0458a 100644
--- a/arch/x86/kvm/kvm_emulate.h
+++ b/arch/x86/kvm/kvm_emulate.h
@@ -315,6 +315,9 @@ struct x86_emulate_ctxt {
 	bool tf;	/* TF value before instruction (after for syscall/sysret) */
 
 	bool have_exception;
+#ifndef __GENKSYMS__
+	bool is_branch;
+#endif
 	struct x86_exception exception;
 
 	/* GPA available */
@@ -369,7 +372,6 @@ struct x86_emulate_ctxt {
 	struct fetch_cache fetch;
 	struct read_cache io_read;
 	struct read_cache mem_read;
-	bool is_branch;
 };
 
 /* Repeat String Operation Prefix */
-- 
2.36.1

