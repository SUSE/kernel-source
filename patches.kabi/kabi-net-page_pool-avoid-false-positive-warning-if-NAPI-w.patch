From: Pedro Falcato <pfalcato@suse.de>
Date: Mon, 2 Jun 2025 20:44:54 +0100
Subject: kABI: net: page_pool: avoid false positive warning if NAPI was never added
Patch-mainline: Never, kABI workaround
References: git-fixes

The patch added an include that breaks the kABI checks.

net/core/page_pool.c:112: warning: page_pool_get_stats: modversion changed because of changes in struct netdev_name_node (became defined)
net/core/page_pool.c:361: warning: page_pool_create_percpu: modversion changed because of changes in struct netdev_name_node (became defined)
net/core/page_pool.c:371: warning: page_pool_create: modversion changed because of changes in struct netdev_name_node (became defined)
net/core/page_pool.c:598: warning: page_pool_alloc_netmems: modversion changed because of changes in struct netdev_name_node (became defined)
net/core/page_pool.c:604: warning: page_pool_alloc_pages: modversion changed because of changes in struct netdev_name_node (became defined)
[...]
net/core/page_pool.c:1196: warning: page_pool_update_nid: modversion changed because of changes in struct netdev_name_node (became defined)

Since defining struct netdev_name_node is problematic, hide this include from genksyms.

Signed-off-by: Pedro Falcato <pfalcato@suse.de>
---
 net/core/page_pool.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/net/core/page_pool.c
+++ b/net/core/page_pool.c
@@ -25,7 +25,9 @@
 
 #include <trace/events/page_pool.h>
 
+#ifndef __GENKSYMS__
 #include "dev.h"
+#endif
 #include "mp_dmabuf_devmem.h"
 #include "netmem_priv.h"
 #include "page_pool_priv.h"
