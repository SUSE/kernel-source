From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for commit 30d18df6567b backport
Patch-mainline: Never, kABI workaround
References: bsc#1225744, CVE-2024-36909, bsc#1229040

Rename to SUSE-specific one for kABI workaround.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/hv/channel.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/hv/channel.c
+++ b/drivers/hv/channel.c
@@ -154,7 +154,7 @@ void vmbus_free_ring(struct vmbus_channe
 
 	if (channel->ringbuffer_page) {
 		/* In a CoCo VM leak the memory if it didn't get re-encrypted */
-		if (!channel->ringbuffer_gpadlhandle.decrypted)
+		if (!SUSE_vmbus_gpadl_get_decrypted(&channel->ringbuffer_gpadlhandle))
 			__free_pages(channel->ringbuffer_page,
 			     get_order(channel->ringbuffer_pagecount
 				       << PAGE_SHIFT));
