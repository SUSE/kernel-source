From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for intel_th_driver
Patch-mainline: Never, kABI workaround
References: git-fixes

The recent fix
  a/patches.suse/intel_th-Wait-until-port-is-in-reset-before-programm.patch
introduced a new driver ops to intel_th_driver.

Shuffle the field to make it backward compatible.
(Although it's not 100% safe, all drivers are in-tree, so it's OK.)

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/hwtracing/intel_th/intel_th.h |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

--- a/drivers/hwtracing/intel_th/intel_th.h
+++ b/drivers/hwtracing/intel_th/intel_th.h
@@ -165,8 +165,6 @@ struct intel_th_driver {
 					  struct intel_th_device *othdev);
 	void			(*unassign)(struct intel_th_device *thdev,
 					    struct intel_th_device *othdev);
-	void			(*prepare)(struct intel_th_device *thdev,
-					   struct intel_th_output *output);
 	void			(*enable)(struct intel_th_device *thdev,
 					  struct intel_th_output *output);
 	void			(*trig_switch)(struct intel_th_device *thdev,
@@ -186,6 +184,10 @@ struct intel_th_driver {
 	/* source ops */
 	int			(*set_output)(struct intel_th_device *thdev,
 					      unsigned int master);
+#ifndef __GENKSYMS__
+	void			(*prepare)(struct intel_th_device *thdev,
+					   struct intel_th_output *output);
+#endif
 };
 
 #define to_intel_th_driver(_d)					\
