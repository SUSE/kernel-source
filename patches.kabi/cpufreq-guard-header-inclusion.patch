From: Giovanni Gherdovich <ggherdovich@suse.cz>
Subject: cpufreq: guard header inclusion from kABI checker
Patch-mainline: Never, kABI workaround
References: jsc#PED-13111

Including linux/acpi.h from linux/cpufreq.h turns some forward
declarations into full declarations, changing modversion.
The change is inconsequential for the kABI, yet it needs to be
guarded or else the kABI check fails.

Signed-off-by: Giovanni Gherdovich <ggherdovich@suse.cz>
---
 include/linux/cpufreq.h |    4 ++++
 1 file changed, 4 insertions(+)

--- a/include/linux/cpufreq.h
+++ b/include/linux/cpufreq.h
@@ -1217,7 +1217,11 @@ static inline void cpufreq_register_em_w
 }
 
 #ifdef CONFIG_ACPI
+
+#ifndef __GENKSYMS__
 #include <linux/acpi.h>
+#endif
+
 static inline bool cpufreq_should_get_performance_governor(void)
 {
 	if (!acpi_disabled && acpi_os_get_root_pointer()) {
