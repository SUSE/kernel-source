From: Juergen Gross <jgross@suse.com>
Subject: kABI fix after Restore kABI for NVidia vGPU driver
Patch-mainline: Never, kABI workaround
References: bsc#1210825

Fix kABI after breakage due to
  patches.suse/Restore-kABI-for-NVidia-vGPU-driver.patch

Signed-off-by: Juergen Gross <jgross@suse.com>
---
 include/linux/mdev.h |   4 +++-
 1 file changed, 3 insertions(+), 1 deletions(-)

--- a/include/linux/mdev.h
+++ b/include/linux/mdev.h
@@ -17,8 +17,10 @@ struct mdev_device {
 	guid_t uuid;
 	struct list_head next;
 	struct mdev_type *type;
-	struct device *iommu_device;
 	bool active;
+#ifndef __GENKSYMS__
+	struct device *iommu_device;
+#endif
 };
 
 static inline struct mdev_device *to_mdev_device(struct device *dev)
