From: Juergen Gross <jgross@suse.com>
Subject: kABI fix after Add TDX support for vSphere
Patch-mainline: Never, kABI workaround
References: jsc#PED-13302

Hide additions to the union inside struct kvm_run from kABI check.

Signed-off-by: Juergen Gross <jgross@suse.com>
---
diff --git a/include/uapi/linux/kvm.h b/include/uapi/linux/kvm.h
--- a/include/uapi/linux/kvm.h
+++ b/include/uapi/linux/kvm.h
@@ -448,6 +448,7 @@ struct kvm_run {
 			__u64 gpa;
 			__u64 size;
 		} memory_fault;
+#ifndef __GENKSYMS__
 		/* KVM_EXIT_TDX */
 		struct {
 			__u64 flags;
@@ -473,6 +474,7 @@ struct kvm_run {
 				} setup_event_notify;
 			};
 		} tdx;
+#endif
 		/* Fix the size of the union. */
 		char padding[256];
 	};
